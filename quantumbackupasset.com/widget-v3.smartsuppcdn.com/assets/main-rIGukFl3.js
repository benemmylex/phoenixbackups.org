const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.parent.smartsupp.getAssetUrl("assets/WidgetMessenger-BTQIYQ4X.js"),window.parent.smartsupp.getAssetUrl("assets/WidgetMessengerInput-DOFW4Mx1.js"),window.parent.smartsupp.getAssetUrl("assets/WidgetPopup-DhhOIFGq.js")])))=>i.map(i=>d[i]);
var cu=Array.isArray,Pf=Array.prototype.indexOf,Lf=Array.from,uu=Object.defineProperty,bt=Object.getOwnPropertyDescriptor,lu=Object.getOwnPropertyDescriptors,$f=Object.prototype,Nf=Array.prototype,Hi=Object.getPrototypeOf,Ko=Object.isExtensible;function Jt(e){return typeof e=="function"}const de=()=>{};function qf(e){return e()}function Fn(e){for(var t=0;t<e.length;t++)e[t]()}const He=2,fu=4,Lr=8,$r=16,ut=32,ln=64,Ar=128,Re=256,Er=512,Ae=1024,at=2048,Ht=4096,tn=8192,Nr=16384,du=32768,fn=65536,zf=1<<17,jf=1<<19,hu=1<<20,yi=1<<21,tt=Symbol("$state"),pu=Symbol("legacy props"),Uf=Symbol("");function gu(e){return e===this.v}function qr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Vf(e,t){return e!==t}function Gi(e){return!qr(e,this.v)}function Hf(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Gf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Wf(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Kf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xf(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Zf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Yf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Jf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let dn=!1;function Qf(){dn=!0}const DC=1,RC=2,BC=4,IC=8,PC=16,ed=1,td=2,nd=4,rd=8,sd=16,id=1,od=2,ad=4,cd=1,ud=2,ge=Symbol(),ld="http://www.w3.org/1999/xhtml";function Wi(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let N=null;function Xo(e){N=e}function LC(e){return vu().get(e)}function $C(e,t){return vu().set(e,t),t}function ae(e,t=!1,n){var r=N={p:N,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};dn&&!t&&(N.l={s:null,u:null,r1:[],r2:Ki(!1)}),Ji(()=>{r.d=!0})}function ce(e){const t=N;if(t!==null){const l=t.e;if(l!==null){var n=U,r=q;t.e=null;try{for(var i=0;i<l.length;i++){var o=l[i];rt(o.effect),Ne(o.reaction),Pn(o.fn)}}finally{rt(n),Ne(r)}}N=t.p,t.m=!0}return{}}function In(){return!dn||N!==null&&N.l===null}function vu(e){return N===null&&Wi(),N.c??(N.c=new Map(fd(N)||void 0))}function fd(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function pt(e){if(typeof e!="object"||e===null||tt in e)return e;const t=Hi(e);if(t!==$f&&t!==Nf)return e;var n=new Map,r=cu(e),i=te(0),o=q,l=u=>{var d=q;Ne(o);var c=u();return Ne(d),c};return r&&n.set("length",te(e.length)),new Proxy(e,{defineProperty(u,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Zf();var a=n.get(d);return a===void 0?(a=l(()=>te(c.value)),n.set(d,a)):$(a,l(()=>pt(c.value))),!0},deleteProperty(u,d){var c=n.get(d);if(c===void 0)d in u&&(n.set(d,l(()=>te(ge))),fs(i));else{if(r&&typeof d=="string"){var a=n.get("length"),s=Number(d);Number.isInteger(s)&&s<a.v&&$(a,s)}$(c,ge),fs(i)}return!0},get(u,d,c){var h;if(d===tt)return e;var a=n.get(d),s=d in u;if(a===void 0&&(!s||(h=bt(u,d))!=null&&h.writable)&&(a=l(()=>te(pt(s?u[d]:ge))),n.set(d,a)),a!==void 0){var f=k(a);return f===ge?void 0:f}return Reflect.get(u,d,c)},getOwnPropertyDescriptor(u,d){var c=Reflect.getOwnPropertyDescriptor(u,d);if(c&&"value"in c){var a=n.get(d);a&&(c.value=k(a))}else if(c===void 0){var s=n.get(d),f=s==null?void 0:s.v;if(s!==void 0&&f!==ge)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(u,d){var f;if(d===tt)return!0;var c=n.get(d),a=c!==void 0&&c.v!==ge||Reflect.has(u,d);if(c!==void 0||U!==null&&(!a||(f=bt(u,d))!=null&&f.writable)){c===void 0&&(c=l(()=>te(a?pt(u[d]):ge)),n.set(d,c));var s=k(c);if(s===ge)return!1}return a},set(u,d,c,a){var y;var s=n.get(d),f=d in u;if(r&&d==="length")for(var h=c;h<s.v;h+=1){var p=n.get(h+"");p!==void 0?$(p,ge):h in u&&(p=l(()=>te(ge)),n.set(h+"",p))}s===void 0?(!f||(y=bt(u,d))!=null&&y.writable)&&(s=l(()=>te(void 0)),$(s,l(()=>pt(c))),n.set(d,s)):(f=s.v!==ge,$(s,l(()=>pt(c))));var v=Reflect.getOwnPropertyDescriptor(u,d);if(v!=null&&v.set&&v.set.call(a,c),!f){if(r&&typeof d=="string"){var g=n.get("length"),m=Number(d);Number.isInteger(m)&&m>=g.v&&$(g,m+1)}fs(i)}return!0},ownKeys(u){k(i);var d=Reflect.ownKeys(u).filter(s=>{var f=n.get(s);return f===void 0||f.v!==ge});for(var[c,a]of n)a.v!==ge&&!(c in u)&&d.push(c);return d},setPrototypeOf(){Yf()}})}function fs(e,t=1){$(e,e.v+t)}function Zo(e){try{if(e!==null&&typeof e=="object"&&tt in e)return e[tt]}catch{}return e}function NC(e,t){return Object.is(Zo(e),Zo(t))}function nn(e){var t=He|at,n=q!==null&&(q.f&He)!==0?q:null;return U===null||n!==null&&(n.f&Re)!==0?t|=Re:U.f|=hu,{ctx:N,deps:null,effects:null,equals:gu,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??U}}function Ge(e){const t=nn(e);return Mu(t),t}function rn(e){const t=nn(e);return t.equals=Gi,t}function mu(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)wt(t[n])}}function dd(e){for(var t=e.parent;t!==null;){if((t.f&He)===0)return t;t=t.parent}return null}function yu(e){var t,n=U;rt(dd(e));try{mu(e),t=Iu(e)}finally{rt(n)}return t}function bu(e){var t=yu(e),n=(vt||(e.f&Re)!==0)&&e.deps!==null?Ht:Ae;We(e,n),e.equals(t)||(e.v=t,e.wv=Ru())}const Sn=new Map;function Ki(e,t){var n={f:0,v:e,reactions:null,equals:gu,rv:0,wv:0};return n}function te(e,t){const n=Ki(e);return Mu(n),n}function Xi(e,t=!1){var r;const n=Ki(e);return t||(n.equals=Gi),dn&&N!==null&&N.l!==null&&((r=N.l).s??(r.s=[])).push(n),n}function $(e,t,n=!1){q!==null&&!et&&In()&&(q.f&(He|$r))!==0&&!(me!=null&&me.includes(e))&&Jf();let r=n?pt(t):t;return hd(e,r)}function hd(e,t){if(!e.equals(t)){var n=e.v;$n?Sn.set(e,t):Sn.set(e,n),e.v=t,(e.f&He)!==0&&((e.f&at)!==0&&yu(e),We(e,(e.f&Re)===0?Ae:Ht)),e.wv=Ru(),_u(e,at),In()&&U!==null&&(U.f&Ae)!==0&&(U.f&(ut|ln))===0&&(Le===null?Cd([e]):Le.push(e))}return t}function _u(e,t){var n=e.reactions;if(n!==null)for(var r=In(),i=n.length,o=0;o<i;o++){var l=n[o],u=l.f;(u&at)===0&&(!r&&l===U||(We(l,t),(u&(Ae|Re))!==0&&((u&He)!==0?_u(l,Ht):Ur(l))))}}var Yo,wu,Cu,Au;function pd(){if(Yo===void 0){Yo=window,wu=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Cu=bt(t,"firstChild").get,Au=bt(t,"nextSibling").get,Ko(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ko(n)&&(n.__t=void 0)}}function Zi(e=""){return document.createTextNode(e)}function sn(e){return Cu.call(e)}function Yi(e){return Au.call(e)}function R(e,t){return sn(e)}function _e(e,t){{var n=sn(e);return n instanceof Comment&&n.data===""?Yi(n):n}}function j(e,t=1,n=!1){let r=e;for(;t--;)r=Yi(r);return r}function qC(e){e.textContent=""}function Eu(e){U===null&&q===null&&Wf(),q!==null&&(q.f&Re)!==0&&U===null&&Gf(),$n&&Hf()}function gd(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function hn(e,t,n,r=!0){var i=U,o={ctx:N,deps:null,nodes_start:null,nodes_end:null,f:e|at,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{eo(o),o.f|=du}catch(d){throw wt(o),d}else t!==null&&Ur(o);var l=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(hu|Ar))===0;if(!l&&r&&(i!==null&&gd(o,i),q!==null&&(q.f&He)!==0)){var u=q;(u.effects??(u.effects=[])).push(o)}return o}function Ji(e){const t=hn(Lr,null,!1);return We(t,Ae),t.teardown=e,t}function nt(e){Eu();var t=U!==null&&(U.f&ut)!==0&&N!==null&&!N.m;if(t){var n=N;(n.e??(n.e=[])).push({fn:e,effect:U,reaction:q})}else{var r=Pn(e);return r}}function vd(e){return Eu(),Qi(e)}function md(e){const t=hn(ln,e,!0);return(n={})=>new Promise(r=>{n.outro?kn(t,()=>{wt(t),r(void 0)}):(wt(t),r(void 0))})}function Pn(e){return hn(fu,e,!1)}function Qi(e){return hn(Lr,e,!0)}function ie(e,t=[],n=nn){const r=t.map(n);return Ln(()=>e(...r.map(k)))}function Ln(e,t=0){return hn(Lr|$r|t,e,!0)}function on(e,t=!0){return hn(Lr|ut,e,!0,t)}function Fu(e){var t=e.teardown;if(t!==null){const n=$n,r=q;ea(!0),Ne(null);try{t.call(null)}finally{ea(n),Ne(r)}}}function Su(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&ln)!==0?n.parent=null:wt(n,t),n=r}}function yd(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ut)===0&&wt(t),t=n}}function wt(e,t=!0){var n=!1;(t||(e.f&jf)!==0)&&e.nodes_start!==null&&(bd(e.nodes_start,e.nodes_end),n=!0),Su(e,t&&!n),xr(e,0),We(e,Nr);var r=e.transitions;if(r!==null)for(const o of r)o.stop();Fu(e);var i=e.parent;i!==null&&i.first!==null&&ku(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function bd(e,t){for(;e!==null;){var n=e===t?null:Yi(e);e.remove(),e=n}}function ku(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function kn(e,t){var n=[];xu(e,n,!0),_d(n,()=>{wt(e),t&&t()})}function _d(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function xu(e,t,n){if((e.f&tn)===0){if(e.f^=tn,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&fn)!==0||(r.f&ut)!==0;xu(r,t,o?n:!1),r=i}}}function Jo(e){Tu(e,!0)}function Tu(e,t){if((e.f&tn)!==0){e.f^=tn,(e.f&Ae)===0&&(e.f^=Ae),Nn(e)&&(We(e,at),Ur(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&fn)!==0||(n.f&ut)!==0;Tu(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let xn=[],bi=[];function Ou(){var e=xn;xn=[],Fn(e)}function wd(){var e=bi;bi=[],Fn(e)}function zr(e){xn.length===0&&queueMicrotask(Ou),xn.push(e)}function Qo(){xn.length>0&&Ou(),bi.length>0&&wd()}let gr=!1,Fr=!1,Sr=null,zt=!1,$n=!1;function ea(e){$n=e}let An=[];let q=null,et=!1;function Ne(e){q=e}let U=null;function rt(e){U=e}let me=null;function Mu(e){q!==null&&q.f&yi&&(me===null?me=[e]:me.push(e))}let ve=null,Oe=0,Le=null;function Cd(e){Le=e}let Du=1,kr=0,vt=!1;function Ru(){return++Du}function Nn(e){var s;var t=e.f;if((t&at)!==0)return!0;if((t&Ht)!==0){var n=e.deps,r=(t&Re)!==0;if(n!==null){var i,o,l=(t&Er)!==0,u=r&&U!==null&&!vt,d=n.length;if(l||u){var c=e,a=c.parent;for(i=0;i<d;i++)o=n[i],(l||!((s=o==null?void 0:o.reactions)!=null&&s.includes(c)))&&(o.reactions??(o.reactions=[])).push(c);l&&(c.f^=Er),u&&a!==null&&(a.f&Re)===0&&(c.f^=Re)}for(i=0;i<d;i++)if(o=n[i],Nn(o)&&bu(o),o.wv>e.wv)return!0}(!r||U!==null&&!vt)&&We(e,Ae)}return!1}function Ad(e,t){for(var n=t;n!==null;){if((n.f&Ar)!==0)try{n.fn(e);return}catch{n.f^=Ar}n=n.parent}throw gr=!1,e}function ta(e){return(e.f&Nr)===0&&(e.parent===null||(e.parent.f&Ar)===0)}function jr(e,t,n,r){if(gr){if(n===null&&(gr=!1),ta(t))throw e;return}if(n!==null&&(gr=!0),Ad(e,t),ta(t))throw e}function Bu(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];me!=null&&me.includes(e)||((o.f&He)!==0?Bu(o,t,!1):t===o&&(n?We(o,at):(o.f&Ae)!==0&&We(o,Ht),Ur(o)))}}function Iu(e){var h;var t=ve,n=Oe,r=Le,i=q,o=vt,l=me,u=N,d=et,c=e.f;ve=null,Oe=0,Le=null,vt=(c&Re)!==0&&(et||!zt||q===null),q=(c&(ut|ln))===0?e:null,me=null,Xo(e.ctx),et=!1,kr++,e.f|=yi;try{var a=(0,e.fn)(),s=e.deps;if(ve!==null){var f;if(xr(e,Oe),s!==null&&Oe>0)for(s.length=Oe+ve.length,f=0;f<ve.length;f++)s[Oe+f]=ve[f];else e.deps=s=ve;if(!vt)for(f=Oe;f<s.length;f++)((h=s[f]).reactions??(h.reactions=[])).push(e)}else s!==null&&Oe<s.length&&(xr(e,Oe),s.length=Oe);if(In()&&Le!==null&&!et&&s!==null&&(e.f&(He|Ht|at))===0)for(f=0;f<Le.length;f++)Bu(Le[f],e);return i!==null&&i!==e&&(kr++,Le!==null&&(r===null?r=Le:r.push(...Le))),a}finally{ve=t,Oe=n,Le=r,q=i,vt=o,me=l,Xo(u),et=d,e.f^=yi}}function Ed(e,t){let n=t.reactions;if(n!==null){var r=Pf.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&He)!==0&&(ve===null||!ve.includes(t))&&(We(t,Ht),(t.f&(Re|Er))===0&&(t.f^=Er),mu(t),xr(t,0))}function xr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Ed(e,n[r])}function eo(e){var t=e.f;if((t&Nr)===0){We(e,Ae);var n=U,r=N,i=zt;U=e,zt=!0;try{(t&$r)!==0?yd(e):Su(e),Fu(e);var o=Iu(e);e.teardown=typeof o=="function"?o:null,e.wv=Du;var l=e.deps,u}catch(d){jr(d,e,n,r||e.ctx)}finally{zt=i,U=n}}}function Fd(){try{Kf()}catch(e){if(Sr!==null)jr(e,Sr,null);else throw e}}function Pu(){var e=zt;try{var t=0;for(zt=!0;An.length>0;){t++>1e3&&Fd();var n=An,r=n.length;An=[];for(var i=0;i<r;i++){var o=kd(n[i]);Sd(o)}Sn.clear()}}finally{Fr=!1,zt=e,Sr=null}}function Sd(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(Nr|tn))===0)try{Nn(r)&&(eo(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?ku(r):r.fn=null))}catch(i){jr(i,r,null,r.ctx)}}}function Ur(e){Fr||(Fr=!0,queueMicrotask(Pu));for(var t=Sr=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(ln|ut))!==0){if((n&Ae)===0)return;t.f^=Ae}}An.push(t)}function kd(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(ut|ln))!==0,o=i&&(r&Ae)!==0;if(!o&&(r&tn)===0){if((r&fu)!==0)t.push(n);else if(i)n.f^=Ae;else try{Nn(n)&&eo(n)}catch(d){jr(d,n,null,n.ctx)}var l=n.first;if(l!==null){n=l;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}return t}function xd(e){var t;for(Qo();An.length>0;)Fr=!0,Pu(),Qo();return t}async function Td(){await Promise.resolve(),xd()}function k(e){var t=e.f,n=(t&He)!==0;if(q!==null&&!et){if(!(me!=null&&me.includes(e))){var r=q.deps;e.rv<kr&&(e.rv=kr,ve===null&&r!==null&&r[Oe]===e?Oe++:ve===null?ve=[e]:(!vt||!ve.includes(e))&&ve.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&Re)===0&&(i.f^=Re)}return n&&(i=e,Nn(i)&&bu(i)),$n&&Sn.has(e)?Sn.get(e):e.v}function ct(e){var t=et;try{return et=!0,e()}finally{et=t}}const Od=-7169;function We(e,t){e.f=e.f&Od|t}function Lu(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(tt in e)_i(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&tt in n&&_i(n)}}}function _i(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{_i(e[r],t)}catch{}const n=Hi(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=lu(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function Md(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Dd=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Rd(e){return Dd.includes(e)}const Bd={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Id(e){return e=e.toLowerCase(),Bd[e]??e}const Pd=["touchstart","touchmove"];function Ld(e){return Pd.includes(e)}function $d(e,t){if(t){const n=document.body;e.autofocus=!0,zr(()=>{document.activeElement===n&&e.focus()})}}let na=!1;function Nd(){na||(na=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function to(e){var t=q,n=U;Ne(null),rt(null);try{return e()}finally{Ne(t),rt(n)}}function zC(e,t,n,r=n){e.addEventListener(t,()=>to(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Nd()}const $u=new Set,wi=new Set;function Nu(e,t,n,r={}){function i(o){if(r.capture||Cn.call(t,o),!o.cancelBubble)return to(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?zr(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function vr(e,t,n,r,i){var o={capture:r,passive:i},l=Nu(e,t,n,o);(t===document.body||t===window||t===document)&&Ji(()=>{t.removeEventListener(e,l,o)})}function Vr(e){for(var t=0;t<e.length;t++)$u.add(e[t]);for(var n of wi)n(e)}function Cn(e){var y;var t=this,n=t.ownerDocument,r=e.type,i=((y=e.composedPath)==null?void 0:y.call(e))||[],o=i[0]||e.target,l=0,u=e.__root;if(u){var d=i.indexOf(u);if(d!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;d<=c&&(l=d)}if(o=i[l]||e.target,o!==t){uu(e,"currentTarget",{configurable:!0,get(){return o||n}});var a=q,s=U;Ne(null),rt(null);try{for(var f,h=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var v=o["__"+r];if(v!=null&&(!o.disabled||e.target===o))if(cu(v)){var[g,...m]=v;g.apply(o,[e,...m])}else v.call(o,e)}catch(b){f?h.push(b):f=b}if(e.cancelBubble||p===t||p===null)break;o=p}if(f){for(let b of h)queueMicrotask(()=>{throw b});throw f}}finally{e.__root=t,delete e.currentTarget,Ne(a),rt(s)}}}function qu(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Tn(e,t){var n=U;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Z(e,t){var n=(t&cd)!==0,r=(t&ud)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=qu(o?e:"<!>"+e),n||(i=sn(i)));var l=r||wu?document.importNode(i,!0):i.cloneNode(!0);if(n){var u=sn(l),d=l.lastChild;Tn(u,d)}else Tn(l,l);return l}}function zu(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,o;return()=>{if(!o){var l=qu(i),u=sn(l);o=sn(u)}var d=o.cloneNode(!0);return Tn(d,d),d}}function jC(e=""){{var t=Zi(e+"");return Tn(t,t),t}}function Me(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Zi();return e.append(t,n),Tn(t,n),e}function I(e,t){e!==null&&e.before(t)}let Ci=!0;function Hr(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function ju(e,t){return qd(e,t)}const Kt=new Map;function qd(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:l=!0}){pd();var u=new Set,d=s=>{for(var f=0;f<s.length;f++){var h=s[f];if(!u.has(h)){u.add(h);var p=Ld(h);t.addEventListener(h,Cn,{passive:p});var v=Kt.get(h);v===void 0?(document.addEventListener(h,Cn,{passive:p}),Kt.set(h,1)):Kt.set(h,v+1)}}};d(Lf($u)),wi.add(d);var c=void 0,a=md(()=>{var s=n??t.appendChild(Zi());return on(()=>{if(o){ae({});var f=N;f.c=o}i&&(r.$$events=i),Ci=l,c=e(s,r)||{},Ci=!0,o&&ce()}),()=>{var p;for(var f of u){t.removeEventListener(f,Cn);var h=Kt.get(f);--h===0?(document.removeEventListener(f,Cn),Kt.delete(f)):Kt.set(f,h)}wi.delete(d),s!==n&&((p=s.parentNode)==null||p.removeChild(s))}});return Ai.set(c,a),c}let Ai=new WeakMap;function ra(e,t){const n=Ai.get(e);return n?(Ai.delete(e),n(t)):Promise.resolve()}function Ce(e,t,[n,r]=[0,0]){var i=e,o=null,l=null,u=ge,d=n>0?fn:0,c=!1;const a=(f,h=!0)=>{c=!0,s(h,f)},s=(f,h)=>{u!==(u=f)&&(u?(o?Jo(o):h&&(o=on(()=>h(i))),l&&kn(l,()=>{l=null})):(l?Jo(l):h&&(l=on(()=>h(i,[n+1,r]))),o&&kn(o,()=>{o=null})))};Ln(()=>{c=!1,t(a),c||s(null,null)},d)}function zd(e,t,n){var r=e,i=ge,o,l=In()?Vf:qr;Ln(()=>{l(i,i=t())&&(o&&kn(o),o=on(()=>n(r)))})}function Tr(e,t,...n){var r=e,i=de,o;Ln(()=>{i!==(i=t())&&(o&&(wt(o),o=null),o=on(()=>i(r,...n)))},fn)}function Uu(e,t,n){var r=e,i,o;Ln(()=>{i!==(i=t())&&(o&&(kn(o),o=null),i&&(o=on(()=>n(r,i))))},fn)}function qn(e,t,n){Pn(()=>{var r=ct(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};Qi(()=>{var l=n();Lu(l),i&&qr(o,l)&&(o=l,r.update(l))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Vu(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Vu(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function jd(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Vu(e))&&(r&&(r+=" "),r+=t);return r}function On(e){return typeof e=="object"?jd(e):e??""}const sa=[...` 	
\r\f \v\uFEFF`];function Ud(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,l=0;(l=r.indexOf(i,l))>=0;){var u=l+o;(l===0||sa.includes(r[l-1]))&&(u===r.length||sa.includes(r[u]))?r=(l===0?"":r.substring(0,l))+r.substring(u+1):l=u}}return r===""?null:r}function ia(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function ds(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Vd(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,l=0,u=!1,d=[];r&&d.push(...Object.keys(r).map(ds)),i&&d.push(...Object.keys(i).map(ds));var c=0,a=-1;const v=e.length;for(var s=0;s<v;s++){var f=e[s];if(u?f==="/"&&e[s-1]==="*"&&(u=!1):o?o===f&&(o=!1):f==="/"&&e[s+1]==="*"?u=!0:f==='"'||f==="'"?o=f:f==="("?l++:f===")"&&l--,!u&&o===!1&&l===0){if(f===":"&&a===-1)a=s;else if(f===";"||s===v-1){if(a!==-1){var h=ds(e.substring(c,a).trim());if(!d.includes(h)){f!==";"&&s++;var p=e.substring(c,s).trim();n+=" "+p+";"}}c=s+1,a=-1}}}}return r&&(n+=ia(r)),i&&(n+=ia(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function _t(e,t,n,r,i,o){var l=e.__className;if(l!==n||l===void 0){var u=Ud(n,r,o);u==null?e.removeAttribute("class"):t?e.className=u:e.setAttribute("class",u),e.__className=n}else if(o&&i!==o)for(var d in o){var c=!!o[d];(i==null||c!==!!i[d])&&e.classList.toggle(d,c)}return o}function hs(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function $e(e,t,n,r){var i=e.__style;if(i!==t){var o=Vd(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(hs(e,n==null?void 0:n[0],r[0]),hs(e,n==null?void 0:n[1],r[1],"important")):hs(e,n,r));return r}const mn=Symbol("class"),yn=Symbol("style"),Hu=Symbol("is custom element"),Gu=Symbol("is html");function UC(e,t){var n=no(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Hd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function K(e,t,n,r){var i=no(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Uf]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Wu(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Gd(e,t,n,r,i=!1){var o=no(e),l=o[Hu],u=!o[Gu],d=t||{},c=e.tagName==="OPTION";for(var a in t)a in n||(n[a]=null);n.class?n.class=On(n.class):(r||n[mn])&&(n.class=null),n[yn]&&(n.style??(n.style=null));var s=Wu(e);for(const y in n){let b=n[y];if(c&&y==="value"&&b==null){e.value=e.__value="",d[y]=b;continue}if(y==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";_t(e,f,b,r,t==null?void 0:t[mn],n[mn]),d[y]=b,d[mn]=n[mn];continue}if(y==="style"){$e(e,b,t==null?void 0:t[yn],n[yn]),d[y]=b,d[yn]=n[yn];continue}var h=d[y];if(b!==h){d[y]=b;var p=y[0]+y[1];if(p!=="$$")if(p==="on"){const _={},C="$$"+y;let A=y.slice(2);var v=Rd(A);if(Md(A)&&(A=A.slice(0,-7),_.capture=!0),!v&&h){if(b!=null)continue;e.removeEventListener(A,d[C],_),d[C]=null}if(b!=null)if(v)e[`__${A}`]=b,Vr([A]);else{let w=function(F){d[y].call(this,F)};d[C]=Nu(A,e,w,_)}else v&&(e[`__${A}`]=void 0)}else if(y==="style")K(e,y,b);else if(y==="autofocus")$d(e,!!b);else if(!l&&(y==="__value"||y==="value"&&b!=null))e.value=e.__value=b;else if(y==="selected"&&c)Hd(e,b);else{var g=y;u||(g=Id(g));var m=g==="defaultValue"||g==="defaultChecked";if(b==null&&!l&&!m)if(o[y]=null,g==="value"||g==="checked"){let _=e;const C=t===void 0;if(g==="value"){let A=_.defaultValue;_.removeAttribute(g),_.defaultValue=A,_.value=_.__value=C?A:null}else{let A=_.defaultChecked;_.removeAttribute(g),_.defaultChecked=A,_.checked=C?A:!1}}else e.removeAttribute(y);else m||s.includes(g)&&(l||typeof b!="string")?e[g]=b:typeof b!="function"&&K(e,g,b)}}}return d}function no(e){return e.__attributes??(e.__attributes={[Hu]:e.nodeName.includes("-"),[Gu]:e.namespaceURI===ld})}var oa=new Map;function Wu(e){var t=oa.get(e.nodeName);if(t)return t;oa.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=lu(r);for(var o in n)n[o].set&&t.push(o);r=Hi(r)}return t}const Wd=()=>performance.now(),ot={tick:e=>requestAnimationFrame(e),now:()=>Wd(),tasks:new Set};function Ku(){const e=ot.now();ot.tasks.forEach(t=>{t.c(e)||(ot.tasks.delete(t),t.f())}),ot.tasks.size!==0&&ot.tick(Ku)}function Kd(e){let t;return ot.tasks.size===0&&ot.tick(Ku),{promise:new Promise(n=>{ot.tasks.add(t={c:e,f:n})}),abort(){ot.tasks.delete(t)}}}function Yn(e,t){to(()=>{e.dispatchEvent(new CustomEvent(t))})}function Xd(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function aa(e){const t={},n=e.split(";");for(const r of n){const[i,o]=r.split(":");if(!i||o===void 0)break;const l=Xd(i.trim());t[l]=o.trim()}return t}const Zd=e=>e;function ye(e,t,n,r){var i=(e&id)!==0,o=(e&od)!==0,l=i&&o,u=(e&ad)!==0,d=l?"both":i?"in":"out",c,a=t.inert,s=t.style.overflow,f,h;function p(){var b=q,_=U;Ne(null),rt(null);try{return c??(c=n()(t,(r==null?void 0:r())??{},{direction:d}))}finally{Ne(b),rt(_)}}var v={is_global:u,in(){var b;if(t.inert=a,!i){h==null||h.abort(),(b=h==null?void 0:h.reset)==null||b.call(h);return}o||f==null||f.abort(),Yn(t,"introstart"),f=Ei(t,p(),h,1,()=>{Yn(t,"introend"),f==null||f.abort(),f=c=void 0,t.style.overflow=s})},out(b){if(!o){b==null||b(),c=void 0;return}t.inert=!0,Yn(t,"outrostart"),h=Ei(t,p(),f,0,()=>{Yn(t,"outroend"),b==null||b()})},stop:()=>{f==null||f.abort(),h==null||h.abort()}},g=U;if((g.transitions??(g.transitions=[])).push(v),i&&Ci){var m=u;if(!m){for(var y=g.parent;y&&(y.f&fn)!==0;)for(;(y=y.parent)&&(y.f&$r)===0;);m=!y||(y.f&du)!==0}m&&Pn(()=>{ct(()=>v.in())})}}function Ei(e,t,n,r,i){var o=r===1;if(Jt(t)){var l,u=!1;return zr(()=>{if(!u){var g=t({direction:o?"in":"out"});l=Ei(e,g,n,r,i)}}),{abort:()=>{u=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return i(),{abort:de,deactivate:de,reset:de,t:()=>r};const{delay:d=0,css:c,tick:a,easing:s=Zd}=t;var f=[];if(o&&n===void 0&&(a&&a(0,1),c)){var h=aa(c(0,1));f.push(h,h)}var p=()=>1-r,v=e.animate(f,{duration:d});return v.onfinish=()=>{var g=(n==null?void 0:n.t())??1-r;n==null||n.abort();var m=r-g,y=t.duration*Math.abs(m),b=[];if(y>0){var _=!1;if(c)for(var C=Math.ceil(y/16.666666666666668),A=0;A<=C;A+=1){var w=g+m*s(A/C),F=aa(c(w,1-w));b.push(F),_||(_=F.overflow==="hidden")}_&&(e.style.overflow="hidden"),p=()=>{var S=v.currentTime;return g+m*s(S/y)},a&&Kd(()=>{if(v.playState!=="running")return!1;var S=p();return a(S,1-S),!0})}v=e.animate(b,{duration:y,fill:"forwards"}),v.onfinish=()=>{p=()=>r,a==null||a(r,1-r),i()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=de)},deactivate:()=>{i=de},reset:()=>{r===0&&(a==null||a(1,0))},t:()=>p()}}function ca(e,t){return e===t||(e==null?void 0:e[tt])===t}function pn(e={},t,n,r){return Pn(()=>{var i,o;return Qi(()=>{i=o,o=(r==null?void 0:r())||[],ct(()=>{e!==n(...o)&&(t(e,...o),i&&ca(n(...i),e)&&t(null,...i))})}),()=>{zr(()=>{o&&ca(n(...o),e)&&t(null,...o)})}}),e}function zn(e=!1){const t=N,n=t.l.u;if(!n)return;let r=()=>Lu(t.s);if(e){let i=0,o={};const l=nn(()=>{let u=!1;const d=t.s;for(const c in d)d[c]!==o[c]&&(o[c]=d[c],u=!0);return u&&i++,i});r=()=>k(l)}n.b.length&&vd(()=>{ua(t,r),Fn(n.b)}),nt(()=>{const i=ct(()=>n.m.map(qf));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&nt(()=>{ua(t,r),Fn(n.a)})}function ua(e,t){if(e.l.s)for(const n of e.l.s)k(n);t()}function ro(e,t,n){if(e==null)return t(void 0),n&&n(void 0),de;const r=ct(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Xt=[];function Yd(e,t){return{subscribe:O(e,t).subscribe}}function O(e,t=de){let n=null;const r=new Set;function i(u){if(qr(e,u)&&(e=u,n)){const d=!Xt.length;for(const c of r)c[1](),Xt.push(c,e);if(d){for(let c=0;c<Xt.length;c+=2)Xt[c][0](Xt[c+1]);Xt.length=0}}}function o(u){i(u(e))}function l(u,d=de){const c=[u,d];return r.add(c),r.size===1&&(n=t(i,o)||de),u(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}function M(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return Yd(n,(l,u)=>{let d=!1;const c=[];let a=0,s=de;const f=()=>{if(a)return;s();const p=t(r?c[0]:c,l,u);o?l(p):s=typeof p=="function"?p:de},h=i.map((p,v)=>ro(p,g=>{c[v]=g,a&=~(1<<v),d&&f()},()=>{a|=1<<v}));return d=!0,f(),function(){Fn(h),s(),d=!1}})}function E(e){let t;return ro(e,n=>t=n)(),t}let Jn=!1,Fi=Symbol();function W(e,t,n){const r=n[t]??(n[t]={store:null,source:Xi(void 0),unsubscribe:de});if(r.store!==e&&!(Fi in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=de;else{var i=!0;r.unsubscribe=ro(e,o=>{i?r.source.v=o:$(r.source,o)}),i=!1}return e&&Fi in n?E(e):k(r.source)}function VC(e,t){return e.set(t),t}function ze(){const e={};function t(){Ji(()=>{for(var n in e)e[n].unsubscribe();uu(e,Fi,{enumerable:!1,value:!0})})}return[e,t]}function HC(e,t,n){return e.set(n),t}function Jd(e){var t=Jn;try{return Jn=!1,[e(),Jn]}finally{Jn=t}}const Qd={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function eh(e,t,n){return new Proxy({props:e,exclude:t},Qd)}const th={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Jt(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Jt(i)&&(i=i());const o=bt(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Jt(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=bt(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===tt||t===pu)return!1;for(let n of e.props)if(Jt(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){Jt(n)&&(n=n());for(const r in n)t.includes(r)||t.push(r)}return t}};function GC(...e){return new Proxy({props:e},th)}function la(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function De(e,t,n,r){var A;var i=(n&ed)!==0,o=!dn||(n&td)!==0,l=(n&rd)!==0,u=(n&sd)!==0,d=!1,c;l?[c,d]=Jd(()=>e[t]):c=e[t];var a=tt in e||pu in e,s=l&&(((A=bt(e,t))==null?void 0:A.set)??(a&&t in e&&(w=>e[t]=w)))||void 0,f=r,h=!0,p=!1,v=()=>(p=!0,h&&(h=!1,u?f=ct(r):f=r),f);c===void 0&&r!==void 0&&(s&&o&&Xf(),c=v(),s&&s(c));var g;if(o)g=()=>{var w=e[t];return w===void 0?v():(h=!0,p=!1,w)};else{var m=(i?nn:rn)(()=>e[t]);m.f|=zf,g=()=>{var w=k(m);return w!==void 0&&(f=void 0),w===void 0?f:w}}if((n&nd)===0)return g;if(s){var y=e.$$legacy;return function(w,F){return arguments.length>0?((!o||!F||y||d)&&s(F?g():w),w):g()}}var b=!1,_=Xi(c),C=nn(()=>{var w=g(),F=k(_);return b?(b=!1,F):_.v=w});return l&&k(C),i||(C.equals=Gi),function(w,F){if(arguments.length>0){const S=F?k(C):o&&l?pt(w):w;if(!C.equals(S)){if(b=!0,$(_,S),p&&f!==void 0&&(f=S),la(C))return w;ct(()=>k(C))}return w}return la(C)?C.v:k(C)}}function lt(e){N===null&&Wi(),dn&&N.l!==null?nh(N).m.push(e):nt(()=>{const t=ct(e);if(typeof t=="function")return t})}function Xu(e){N===null&&Wi(),lt(()=>()=>ct(e))}function nh(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const rh=()=>{const e=new Map;return Object.freeze({on:(i,o)=>{const l=e.get(i);l?l.push(o):e.set(i,[o])},off:(i,o)=>{const l=e.get(i);l&&e.set(i,l.filter(u=>u!==o))},emit:(i,o)=>{const l=e.get(i);l&&l.forEach(u=>u(o))}})},G=rh(),sh="data-smartsupp-id",mr=()=>window.top??window.parent,ne=()=>window.parent,Lt=()=>ne().document,WC=e=>e&&e.ownerDocument||document,ih=({vid:e})=>{const t=ne().smartsupp||{};t.vid=e,ne().smartsupp=t},oh="debug",ah=e=>{try{const t=ne().localStorage.getItem(oh);if(!t)return!1;if(t===e||t==="*")return!0;const n=e.match(/^\w+:/g);return n?t===`${n[0]}*`:!1}catch{return!1}},ch=(e,t)=>(n,...r)=>{ah(e)&&console.debug(`%c${e}`,`color: ${t};`,n,...r)},Be=ch("smartsupp:widget","#1233df"),uh=()=>{let e=null;const t=[];return Object.freeze({init:l=>{e=l,Be("widget options",l),t.forEach(u=>u(l))},getOptions:()=>{if(!e)throw new Error("Widget options not initialized");return e},awaitOptions:async()=>e||new Promise(l=>{t.push(l)}),updateOptions:l=>{e={...e,...l}}})},x=uh(),so=e=>{const n=e.document.getElementsByTagName("body")[0].getAttribute(sh);if(!n)throw new Error("Missing chat ID attribute on body element.");if(!e.parent.$smartsupp)throw new Error("Something went wrong. Seems like loader.js did not initialize widget.");if(!e.parent.$smartsupp.getWidget)throw new Error("Get widget function was not supplied by loader.js.");return e.parent.$smartsupp.getWidget(n)};/*! js-cookie v3.0.5 | MIT */function Qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var lh={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Si(e,t){function n(i,o,l){if(!(typeof document>"u")){l=Qn({},t,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var d in l)l[d]&&(u+="; "+d,l[d]!==!0&&(u+="="+l[d].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+u}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],l={},u=0;u<o.length;u++){var d=o[u].split("="),c=d.slice(1).join("=");try{var a=decodeURIComponent(d[0]);if(l[a]=e.read(c,a),i===a)break}catch{}}return i?l[i]:l}}return Object.create({set:n,get:r,remove:function(i,o){n(i,"",Qn({},o,{expires:-1}))},withAttributes:function(i){return Si(this.converter,Qn({},this.attributes,i))},withConverter:function(i){return Si(Qn({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Or=Si(lh,{path:"/"});const ki="ssupp",Zu=182,Yu=(e=Zu)=>({expires:e,domain:x.getOptions().cookieDomain,path:x.getOptions().cookiePath||"/",sameSite:"strict",secure:ne().location.protocol==="https:"}),io=e=>`${x.getOptions().cookiePrefix||""}${ki}.${e}`,fh=({name:e,value:t,expirationInDays:n=Zu,options:r})=>{Or.set(io(e),t,{...Yu(n),...r})},dh=e=>Or.get(io(e)),hh=e=>{const t=io(e);if(Or.get(t)){const{path:r,domain:i}=Yu();Or.remove(t,{path:r,domain:i})}},Ju=e=>(t,...n)=>{e(`[Smartsupp] ${t}`,...n)},X=Ju(console.warn),Ke=Ju(console.error),ph=()=>{const{key:e}=x.getOptions();return`${ne().SMARTSUPP_AUTOCREATE!==!1?ki:`${so(window).id}_${ki}`}_${e}`},Mr=e=>`${ph()}${e?`_${e}`:""}`,Gr=e=>{try{const t=window.localStorage.getItem(Mr(e))??"{}";return JSON.parse(t)}catch{return{}}},oo=(e,t)=>{try{window.localStorage.setItem(Mr(t),JSON.stringify(e))}catch(n){X("Set to local storage failed",n)}},gh=(e,t)=>{const r={...Gr(),[e]:String(t)};oo(r)},Qu=e=>{const t=Gr();t[e]&&(delete t[e],oo(t))},vh=()=>{window.localStorage.removeItem(Mr()),window.localStorage.removeItem(Mr("cards"))};var z=(e=>(e.AnalyticsConsent="analyticsConsent",e.AuthForm="authForm",e.IsMessengerFrameExpanded="isMessengerFrameExpanded",e.IsMessengerFrameOpened="opened",e.MarketingConsent="marketingConsent",e.Message="message",e.PopupClosedAt="popupClosedAt",e.RatingText="ratingText",e.SoundsEnabled="enableSounds",e.VisitorId="vid",e.Visits="visits",e.TicketForm="ticketForm",e.SessionId="sessionId",e))(z||{});const Xe=e=>{let t="";return e===z.VisitorId&&x.getOptions().cookieDomain&&(t=dh(e)),t||Gr()[e]},ft=({name:e,value:t})=>{e===z.VisitorId&&x.getOptions().cookieDomain&&fh({name:e,value:t}),gh(e,t)},mh=e=>{Qu(e)};G.on("analyticsConsentChanged",e=>{ft({name:z.AnalyticsConsent,value:String(e)})});G.on("marketingConsentChanged",e=>{ft({name:z.MarketingConsent,value:String(e)})});const ao=()=>!!x.getOptions().consentModeEnabled,el=()=>{const e=Xe(z.AnalyticsConsent)==="true";return!(ao()&&!e)},tl=()=>{const e=Xe(z.MarketingConsent)==="true";return!(ao()&&!e)};function nl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rl(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var ps,fa;function yh(){if(fa)return ps;fa=1;var e="sessionAccessId-";function t(n){var r=void 0;return n&&n.id&&~n.id.indexOf(e)&&(r=n.id),r}return ps=t,ps}var gs,da;function bh(){if(da)return gs;da=1;function e(i){if(Array.isArray(i)){for(var o=0,l=Array(i.length);o<i.length;o++)l[o]=i[o];return l}else return Array.from(i)}var t=yh(),n="sessionAccessId-";function r(){return n+Date.now()}return gs=function(o,l){l=l||document.body;var u=void 0,d={},c=[],a=!1,s=!0,f=void 0,h=!1,p=document.createElement("iframe");p.src=o,p.width=0,p.height=0,p.style.display="none",p.onload=function(){h=!0};function v(){l.appendChild(p),u=p.contentWindow,s=!1,window.addEventListener("message",g),A()}v();function g(w){var F=w.data,S=t(F);if(S==="sessionAccessId-connected"){a=!0;return}if(F.connectError){Object.keys(d).forEach(function(B){return d[B](F.error)}),d={};return}var D=d[S];S&&D&&D(F.error,F.data)}function m(){clearTimeout(f),window.removeEventListener("message",g),p.parentNode.removeChild(p),a=!1,s=!0}function y(w,F,S,D){s&&v(),!a&&w!=="connect"&&c.push([w,F,S,D]);var B=r();d&&typeof D=="function"&&(d[B]=D),h&&u.postMessage({method:w,key:F,value:S,id:B},o)}function b(w,F){if(!F)throw new Error("callback required for get");y("get",w,null,F)}function _(w,F,S){y("set",w,F,S)}function C(w,F){y("remove",w,null,F)}function A(){if(a){for(clearTimeout(f);c.length;)y.apply(void 0,e(c.pop()));return}y("connect"),f=setTimeout(A,125)}return{get:b,set:_,remove:C,close:m}},gs}var vs,ha;function _h(){return ha||(ha=1,vs=bh()),vs}var wh=_h();const Ch=nl(wh),Ah=()=>{const{storageUrl:e,key:t}=x.getOptions();if(!e)throw new Error("Storage url is missing");return`${e.replace(/{key}/g,t)}/index.html`},Eh=()=>{let e=null;return Object.freeze({getStorage:()=>{if(e)return e;try{const r=Ah();return e=Ch(r),Be("cross domain storage created",r),e}catch{throw new Error("Cross domain storage create failed")}},closeStorage:()=>{e&&(e.close(),Be("cross domain storage closed"))}})},co=Eh(),Fh=e=>{const t=co.getStorage();return new Promise((n,r)=>{t.get(e,(i,o)=>i?r(i):(Be("get from cross domain storage",e,o),n(o)))})},Sh=(e,t)=>{const n=co.getStorage();return new Promise((r,i)=>{n.set(e,t,o=>o?i(o):(Be("set to cross domain storage",e,t),r()))})},kh=()=>{co.closeStorage()},sl=()=>!!x.getOptions().crossDomainEnabled,xh=async()=>sl()?Fh(z.VisitorId):Xe(z.VisitorId)||null,Th=async e=>sl()?Sh(z.VisitorId,String(e)):ft({name:z.VisitorId,value:String(e)}),Oh=()=>{if(tl())return Xe(z.Visits)?Number(Xe(z.Visits)):0},Mh=e=>{tl()&&ft({name:z.Visits,value:String(e)})};G.on("marketingConsentChanged",e=>{e||mh(z.Visits)});const il=(e,t,n)=>{const{set:r,subscribe:i}=O(t,l=>{const u=Xe(e);u&&l(n?n(u):u)}),o=l=>{ft({name:e,value:String(l)})};return{set:l=>{o(l),r(l)},subscribe:i}},Dh=()=>"ontouchstart"in window||navigator.msMaxTouchPoints>0,Rh=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Bh=450,Ih=500,Wr=O(null),Ph=O({width:ne().innerWidth,height:ne().innerHeight}),st=M([Wr,Ph],([e,t])=>{const{widgetBlockingOptions:n}=x.getOptions();if(n!=null&&n.enforceDesktopMode)return!1;if(e){const{isMobile:r,isTablet:i}=e;if(i)return!1;if(r)return!0}return t.width<Bh||t.height<Ih}),ol=M([st],([e])=>{const{fullScreenEnabled:t}=x.getOptions();return!!(e||t)}),Lh=M([Wr],([e])=>!!(e!=null&&e.isDesktop)&&!Rh());M([Wr],([e])=>!!(e!=null&&e.isTablet));const $h=()=>{const e=O({}),{subscribe:t,update:n}=e;return{subscribe:t,add:l=>{n(u=>({...u,[l.id]:l}))},remove:l=>{n(u=>{const{[l]:d,...c}=u;return c})},find:l=>E(e)[l]||null}},Dr=$h(),KC=M([Dr],([e])=>Object.values(e)),uo=e=>(t,n=3e3)=>{const r=`fm-${e}-${t}`,i=Dr.find(r);let o=1;i&&(clearTimeout(i.timeout),o=i.recurrence+1);let l;return n>0&&(l=window.setTimeout(()=>{pa(r)},n)),Dr.add({id:r,type:e,text:t,timeout:l,recurrence:o}),()=>pa(r)},pa=e=>{Dr.remove(e)},XC=uo("success"),jt=uo("error"),Qt=uo("warning");var al=(e=>(e[e.Good=5]="Good",e[e.Normal=3]="Normal",e[e.Bad=1]="Bad",e))(al||{});const Nh={5:{value:5,text:"agentRating.good.formText",name:"good"},3:{value:3,text:"agentRating.normal.formText",name:"neutral"},1:{value:1,text:"agentRating.bad.formText",name:"bad"}},ZC=Object.values(Nh).sort((e,t)=>t.value-e.value),Kr="rate_form_id",ga={id:Kr,type:"message",subType:"system",channel:{type:"default",id:null},chatId:"",visitorId:"",groupId:null,agentId:null,trigger:null,createdAt:"",content:{type:"rate_form",data:{}},attachments:[],widgetOptions:{disableInput:!1,disableAuthentication:!1,disableAttachments:!1}},cl=O(null);var Tt={},Se={},pe={},ue={},er={exports:{}},ms,va;function qh(){if(va)return ms;va=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,o=r*365.25;ms=function(a,s){s=s||{};var f=typeof a;if(f==="string"&&a.length>0)return l(a);if(f==="number"&&isFinite(a))return s.long?d(a):u(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function l(a){if(a=String(a),!(a.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(s){var f=parseFloat(s[1]),h=(s[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*o;case"weeks":case"week":case"w":return f*i;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function u(a){var s=Math.abs(a);return s>=r?Math.round(a/r)+"d":s>=n?Math.round(a/n)+"h":s>=t?Math.round(a/t)+"m":s>=e?Math.round(a/e)+"s":a+"ms"}function d(a){var s=Math.abs(a);return s>=r?c(a,s,r,"day"):s>=n?c(a,s,n,"hour"):s>=t?c(a,s,t,"minute"):s>=e?c(a,s,e,"second"):a+" ms"}function c(a,s,f,h){var p=s>=f*1.5;return Math.round(a/f)+" "+h+(p?"s":"")}return ms}var ys,ma;function zh(){if(ma)return ys;ma=1;function e(t){r.debug=r,r.default=r,r.coerce=c,r.disable=l,r.enable=o,r.enabled=u,r.humanize=qh(),r.destroy=a,Object.keys(t).forEach(s=>{r[s]=t[s]}),r.names=[],r.skips=[],r.formatters={};function n(s){let f=0;for(let h=0;h<s.length;h++)f=(f<<5)-f+s.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(s){let f,h=null,p,v;function g(...m){if(!g.enabled)return;const y=g,b=Number(new Date),_=b-(f||b);y.diff=_,y.prev=f,y.curr=b,f=b,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let C=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(w,F)=>{if(w==="%%")return"%";C++;const S=r.formatters[F];if(typeof S=="function"){const D=m[C];w=S.call(y,D),m.splice(C,1),C--}return w}),r.formatArgs.call(y,m),(y.log||r.log).apply(y,m)}return g.namespace=s,g.useColors=r.useColors(),g.color=r.selectColor(s),g.extend=i,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,v=r.enabled(s)),v),set:m=>{h=m}}),typeof r.init=="function"&&r.init(g),g}function i(s,f){const h=r(this.namespace+(typeof f>"u"?":":f)+s);return h.log=this.log,h}function o(s){r.save(s),r.namespaces=s,r.names=[],r.skips=[];let f;const h=(typeof s=="string"?s:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(s=h[f].replace(/\*/g,".*?"),s[0]==="-"?r.skips.push(new RegExp("^"+s.slice(1)+"$")):r.names.push(new RegExp("^"+s+"$")))}function l(){const s=[...r.names.map(d),...r.skips.map(d).map(f=>"-"+f)].join(",");return r.enable(""),s}function u(s){if(s[s.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(s))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(s))return!0;return!1}function d(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}function c(s){return s instanceof Error?s.stack||s.message:s}function a(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return ys=e,ys}var ya;function jh(){return ya||(ya=1,function(e,t){var n={};t.formatArgs=i,t.save=o,t.load=l,t.useColors=r,t.storage=u(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;c.splice(1,0,a,"color: inherit");let s=0,f=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(s++,h==="%c"&&(f=s))}),c.splice(f,0,a)}t.log=console.debug||console.log||(()=>{});function o(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function l(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function u(){try{return localStorage}catch{}}e.exports=zh()(t);const{formatters:d}=e.exports;d.j=function(c){try{return JSON.stringify(c)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}}(er,er.exports)),er.exports}var ba;function an(){if(ba)return ue;ba=1;var e=ue&&ue.__extends||function(){var u=function(d,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(a[f]=s[f])},u(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");u(d,c);function a(){this.constructor=d}d.prototype=c===null?Object.create(c):(a.prototype=c.prototype,new a)}}();Object.defineProperty(ue,"__esModule",{value:!0}),ue.createEmitter=ue.createCallback=ue.bound=ue.createSocketError=ue.SocketError=ue.debug=void 0,ue.debug=t();function t(){try{return jh()("smartsupp:client")}catch{return function(){}}}var n=function(u){e(d,u);function d(c,a){var s=u.call(this,c)||this;return Object.setPrototypeOf(s,d.prototype),s.name=s.constructor.name,s.code=a.code,s.type=a.type,s.event=a.event,a&&a.stack&&(s.stack="".concat(s.stack,`
Caused By: `).concat(a.stack)),s}return d}(Error);ue.SocketError=n;function r(u){return new n(u.message,u)}ue.createSocketError=r;function i(u,d){return function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];u[d].apply(u,c)}}ue.bound=i;function o(u,d){return function(c,a){c?d(r(c)):u(a)}}ue.createCallback=o;function l(u,d){return function(c){u.emit(d,c)}}return ue.createEmitter=l,ue}var bs={exports:{}},_a;function ul(){return _a||(_a=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,c,a){this.fn=d,this.context=c,this.once=a||!1}function o(d,c,a,s,f){if(typeof a!="function")throw new TypeError("The listener must be a function");var h=new i(a,s||d,f),p=n?n+c:c;return d._events[p]?d._events[p].fn?d._events[p]=[d._events[p],h]:d._events[p].push(h):(d._events[p]=h,d._eventsCount++),d}function l(d,c){--d._eventsCount===0?d._events=new r:delete d._events[c]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var c=[],a,s;if(this._eventsCount===0)return c;for(s in a=this._events)t.call(a,s)&&c.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},u.prototype.listeners=function(c){var a=n?n+c:c,s=this._events[a];if(!s)return[];if(s.fn)return[s.fn];for(var f=0,h=s.length,p=new Array(h);f<h;f++)p[f]=s[f].fn;return p},u.prototype.listenerCount=function(c){var a=n?n+c:c,s=this._events[a];return s?s.fn?1:s.length:0},u.prototype.emit=function(c,a,s,f,h,p){var v=n?n+c:c;if(!this._events[v])return!1;var g=this._events[v],m=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,a),!0;case 3:return g.fn.call(g.context,a,s),!0;case 4:return g.fn.call(g.context,a,s,f),!0;case 5:return g.fn.call(g.context,a,s,f,h),!0;case 6:return g.fn.call(g.context,a,s,f,h,p),!0}for(b=1,y=new Array(m-1);b<m;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var _=g.length,C;for(b=0;b<_;b++)switch(g[b].once&&this.removeListener(c,g[b].fn,void 0,!0),m){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,a);break;case 3:g[b].fn.call(g[b].context,a,s);break;case 4:g[b].fn.call(g[b].context,a,s,f);break;default:if(!y)for(C=1,y=new Array(m-1);C<m;C++)y[C-1]=arguments[C];g[b].fn.apply(g[b].context,y)}}return!0},u.prototype.on=function(c,a,s){return o(this,c,a,s,!1)},u.prototype.once=function(c,a,s){return o(this,c,a,s,!0)},u.prototype.removeListener=function(c,a,s,f){var h=n?n+c:c;if(!this._events[h])return this;if(!a)return l(this,h),this;var p=this._events[h];if(p.fn)p.fn===a&&(!f||p.once)&&(!s||p.context===s)&&l(this,h);else{for(var v=0,g=[],m=p.length;v<m;v++)(p[v].fn!==a||f&&!p[v].once||s&&p[v].context!==s)&&g.push(p[v]);g.length?this._events[h]=g.length===1?g[0]:g:l(this,h)}return this},u.prototype.removeAllListeners=function(c){var a;return c?(a=n?n+c:c,this._events[a]&&l(this,a)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u}(bs)),bs.exports}var tr={exports:{}},_s,wa;function Uh(){if(wa)return _s;wa=1;var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];return _s=function(r){var i=r,o=r.indexOf("["),l=r.indexOf("]");o!=-1&&l!=-1&&(r=r.substring(0,o)+r.substring(o,l).replace(/:/g,";")+r.substring(l,r.length));for(var u=e.exec(r||""),d={},c=14;c--;)d[t[c]]=u[c]||"";return o!=-1&&l!=-1&&(d.source=i,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d},_s}var nr={exports:{}},ws,Ca;function Vh(){if(Ca)return ws;Ca=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,o=r*365.25;ws=function(a,s){s=s||{};var f=typeof a;if(f==="string"&&a.length>0)return l(a);if(f==="number"&&isFinite(a))return s.long?d(a):u(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function l(a){if(a=String(a),!(a.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(s){var f=parseFloat(s[1]),h=(s[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*o;case"weeks":case"week":case"w":return f*i;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function u(a){var s=Math.abs(a);return s>=r?Math.round(a/r)+"d":s>=n?Math.round(a/n)+"h":s>=t?Math.round(a/t)+"m":s>=e?Math.round(a/e)+"s":a+"ms"}function d(a){var s=Math.abs(a);return s>=r?c(a,s,r,"day"):s>=n?c(a,s,n,"hour"):s>=t?c(a,s,t,"minute"):s>=e?c(a,s,e,"second"):a+" ms"}function c(a,s,f,h){var p=s>=f*1.5;return Math.round(a/f)+" "+h+(p?"s":"")}return ws}var Cs,Aa;function Hh(){if(Aa)return Cs;Aa=1;function e(t){r.debug=r,r.default=r,r.coerce=a,r.disable=u,r.enable=l,r.enabled=d,r.humanize=Vh(),Object.keys(t).forEach(s=>{r[s]=t[s]}),r.instances=[],r.names=[],r.skips=[],r.formatters={};function n(s){let f=0;for(let h=0;h<s.length;h++)f=(f<<5)-f+s.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(s){let f;function h(...p){if(!h.enabled)return;const v=h,g=Number(new Date),m=g-(f||g);v.diff=m,v.prev=f,v.curr=g,f=g,p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let y=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(_,C)=>{if(_==="%%")return _;y++;const A=r.formatters[C];if(typeof A=="function"){const w=p[y];_=A.call(v,w),p.splice(y,1),y--}return _}),r.formatArgs.call(v,p),(v.log||r.log).apply(v,p)}return h.namespace=s,h.enabled=r.enabled(s),h.useColors=r.useColors(),h.color=n(s),h.destroy=i,h.extend=o,typeof r.init=="function"&&r.init(h),r.instances.push(h),h}function i(){const s=r.instances.indexOf(this);return s!==-1?(r.instances.splice(s,1),!0):!1}function o(s,f){const h=r(this.namespace+(typeof f>"u"?":":f)+s);return h.log=this.log,h}function l(s){r.save(s),r.names=[],r.skips=[];let f;const h=(typeof s=="string"?s:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(s=h[f].replace(/\*/g,".*?"),s[0]==="-"?r.skips.push(new RegExp("^"+s.substr(1)+"$")):r.names.push(new RegExp("^"+s+"$")));for(f=0;f<r.instances.length;f++){const v=r.instances[f];v.enabled=r.enabled(v.namespace)}}function u(){const s=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),s}function d(s){if(s[s.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(s))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(s))return!0;return!1}function c(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}function a(s){return s instanceof Error?s.stack||s.message:s}return r.enable(r.load()),r}return Cs=e,Cs}var Ea;function Xr(){return Ea||(Ea=1,function(e,t){var n={};t.log=o,t.formatArgs=i,t.save=l,t.load=u,t.useColors=r,t.storage=d(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;a.splice(1,0,s,"color: inherit");let f=0,h=0;a[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(f++,p==="%c"&&(h=f))}),a.splice(h,0,s)}function o(...a){return typeof console=="object"&&console.log&&console.log(...a)}function l(a){try{a?t.storage.setItem("debug",a):t.storage.removeItem("debug")}catch{}}function u(){let a;try{a=t.storage.getItem("debug")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=n.DEBUG),a}function d(){try{return localStorage}catch{}}e.exports=Hh()(t);const{formatters:c}=e.exports;c.j=function(a){try{return JSON.stringify(a)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}(nr,nr.exports)),nr.exports}var As,Fa;function Gh(){if(Fa)return As;Fa=1;var e=Uh(),t=Xr()("socket.io-client:url");As=n;function n(r,i){var o=r;i=i||typeof location<"u"&&location,r==null&&(r=i.protocol+"//"+i.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=i.protocol+r:r=i.host+r),/^(https?|wss?):\/\//.test(r)||(t("protocol-less url %s",r),typeof i<"u"?r=i.protocol+"//"+r:r="https://"+r),t("parse %s",r),o=e(r)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var l=o.host.indexOf(":")!==-1,u=l?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+u+":"+o.port,o.href=o.protocol+"://"+u+(i&&i.port===o.port?"":":"+o.port),o}return As}var Es={},rr={exports:{}},sr={exports:{}},Fs,Sa;function Wh(){if(Sa)return Fs;Sa=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*365.25;Fs=function(c,a){a=a||{};var s=typeof c;if(s==="string"&&c.length>0)return o(c);if(s==="number"&&isNaN(c)===!1)return a.long?u(c):l(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c);if(a){var s=parseFloat(a[1]),f=(a[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return s*i;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*t;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function l(c){return c>=r?Math.round(c/r)+"d":c>=n?Math.round(c/n)+"h":c>=t?Math.round(c/t)+"m":c>=e?Math.round(c/e)+"s":c+"ms"}function u(c){return d(c,r,"day")||d(c,n,"hour")||d(c,t,"minute")||d(c,e,"second")||c+" ms"}function d(c,a,s){if(!(c<a))return c<a*1.5?Math.floor(c/a)+" "+s:Math.ceil(c/a)+" "+s+"s"}return Fs}var ka;function Kh(){return ka||(ka=1,function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=d,t.disable=l,t.enable=o,t.enabled=u,t.humanize=Wh(),t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(c){var a=0,s;for(s in c)a=(a<<5)-a+c.charCodeAt(s),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function r(c){var a;function s(){if(s.enabled){var f=s,h=+new Date,p=h-(a||h);f.diff=p,f.prev=a,f.curr=h,a=h;for(var v=new Array(arguments.length),g=0;g<v.length;g++)v[g]=arguments[g];v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");var m=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;m++;var C=t.formatters[_];if(typeof C=="function"){var A=v[m];b=C.call(f,A),v.splice(m,1),m--}return b}),t.formatArgs.call(f,v);var y=s.log||t.log||console.log.bind(console);y.apply(f,v)}}return s.namespace=c,s.enabled=t.enabled(c),s.useColors=t.useColors(),s.color=n(c),s.destroy=i,typeof t.init=="function"&&t.init(s),t.instances.push(s),s}function i(){var c=t.instances.indexOf(this);return c!==-1?(t.instances.splice(c,1),!0):!1}function o(c){t.save(c),t.names=[],t.skips=[];var a,s=(typeof c=="string"?c:"").split(/[\s,]+/),f=s.length;for(a=0;a<f;a++)s[a]&&(c=s[a].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.substr(1)+"$")):t.names.push(new RegExp("^"+c+"$")));for(a=0;a<t.instances.length;a++){var h=t.instances[a];h.enabled=t.enabled(h.namespace)}}function l(){t.enable("")}function u(c){if(c[c.length-1]==="*")return!0;var a,s;for(a=0,s=t.skips.length;a<s;a++)if(t.skips[a].test(c))return!1;for(a=0,s=t.names.length;a<s;a++)if(t.names[a].test(c))return!0;return!1}function d(c){return c instanceof Error?c.stack||c.message:c}}(sr,sr.exports)),sr.exports}var xa;function jn(){return xa||(xa=1,function(e,t){var n={};t=e.exports=Kh(),t.log=o,t.formatArgs=i,t.save=l,t.load=u,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:d(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(c){try{return JSON.stringify(c)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function i(c){var a=this.useColors;if(c[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+c[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var s="color: "+this.color;c.splice(1,0,s,"color: inherit");var f=0,h=0;c[0].replace(/%[a-zA-Z%]/g,function(p){p!=="%%"&&(f++,p==="%c"&&(h=f))}),c.splice(h,0,s)}}function o(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(c){try{c==null?t.storage.removeItem("debug"):t.storage.debug=c}catch{}}function u(){var c;try{c=t.storage.debug}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}t.enable(u());function d(){try{return window.localStorage}catch{}}}(rr,rr.exports)),rr.exports}var Ss={exports:{}},Ta;function Zr(){return Ta||(Ta=1,function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var i in t.prototype)r[i]=t.prototype[i];return r}t.prototype.on=t.prototype.addEventListener=function(r,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(i),this},t.prototype.once=function(r,i){function o(){this.off(r,o),i.apply(this,arguments)}return o.fn=i,this.on(r,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+r];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var l,u=0;u<o.length;u++)if(l=o[u],l===i||l.fn===i){o.splice(u,1);break}return o.length===0&&delete this._callbacks["$"+r],this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),o=this._callbacks["$"+r],l=1;l<arguments.length;l++)i[l-1]=arguments[l];if(o){o=o.slice(0);for(var l=0,u=o.length;l<u;++l)o[l].apply(this,i)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}}(Ss)),Ss.exports}var bn={},ks,Oa;function lo(){if(Oa)return ks;Oa=1;var e={}.toString;return ks=Array.isArray||function(t){return e.call(t)=="[object Array]"},ks}var xs,Ma;function ll(){if(Ma)return xs;Ma=1,xs=r;var e=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",t=typeof ArrayBuffer=="function",n=function(i){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer};function r(i){return e&&Buffer.isBuffer(i)||t&&(i instanceof ArrayBuffer||n(i))}return xs}var Da;function Xh(){if(Da)return bn;Da=1;var e=lo(),t=ll(),n=Object.prototype.toString,r=typeof Blob=="function"||typeof Blob<"u"&&n.call(Blob)==="[object BlobConstructor]",i=typeof File=="function"||typeof File<"u"&&n.call(File)==="[object FileConstructor]";bn.deconstructPacket=function(u){var d=[],c=u.data,a=u;return a.data=o(c,d),a.attachments=d.length,{packet:a,buffers:d}};function o(u,d){if(!u)return u;if(t(u)){var c={_placeholder:!0,num:d.length};return d.push(u),c}else if(e(u)){for(var a=new Array(u.length),s=0;s<u.length;s++)a[s]=o(u[s],d);return a}else if(typeof u=="object"&&!(u instanceof Date)){var a={};for(var f in u)a[f]=o(u[f],d);return a}return u}bn.reconstructPacket=function(u,d){return u.data=l(u.data,d),u.attachments=void 0,u};function l(u,d){if(!u)return u;if(u&&u._placeholder===!0){var c=typeof u.num=="number"&&u.num>=0&&u.num<d.length;if(c)return d[u.num];throw new Error("illegal attachments")}else if(e(u))for(var a=0;a<u.length;a++)u[a]=l(u[a],d);else if(typeof u=="object")for(var s in u)u[s]=l(u[s],d);return u}return bn.removeBlobs=function(u,d){function c(f,h,p){if(!f)return f;if(r&&f instanceof Blob||i&&f instanceof File){a++;var v=new FileReader;v.onload=function(){p?p[h]=this.result:s=this.result,--a||d(s)},v.readAsArrayBuffer(f)}else if(e(f))for(var g=0;g<f.length;g++)c(f[g],g,f);else if(typeof f=="object"&&!t(f))for(var m in f)c(f[m],m,f)}var a=0,s=u;c(s),a||d(s)},bn}var Ra;function fo(){return Ra||(Ra=1,function(e){var t=jn()("socket.io-parser"),n=Zr(),r=Xh(),i=lo(),o=ll();e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=l,e.Decoder=s;function l(){}var u=e.ERROR+'"encode error"';l.prototype.encode=function(g,m){if(t("encoding packet %j",g),e.BINARY_EVENT===g.type||e.BINARY_ACK===g.type)a(g,m);else{var y=d(g);m([y])}};function d(g){var m=""+g.type;if((e.BINARY_EVENT===g.type||e.BINARY_ACK===g.type)&&(m+=g.attachments+"-"),g.nsp&&g.nsp!=="/"&&(m+=g.nsp+","),g.id!=null&&(m+=g.id),g.data!=null){var y=c(g.data);if(y!==!1)m+=y;else return u}return t("encoded %j as %s",g,m),m}function c(g){try{return JSON.stringify(g)}catch{return!1}}function a(g,m){function y(b){var _=r.deconstructPacket(b),C=d(_.packet),A=_.buffers;A.unshift(C),m(A)}r.removeBlobs(g,y)}function s(){this.reconstructor=null}n(s.prototype),s.prototype.add=function(g){var m;if(typeof g=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");m=f(g),e.BINARY_EVENT===m.type||e.BINARY_ACK===m.type?(this.reconstructor=new p(m),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",m)):this.emit("decoded",m)}else if(o(g)||g.base64)if(this.reconstructor)m=this.reconstructor.takeBinaryData(g),m&&(this.reconstructor=null,this.emit("decoded",m));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+g)};function f(g){var m=0,y={type:Number(g.charAt(0))};if(e.types[y.type]==null)return v("unknown packet type "+y.type);if(e.BINARY_EVENT===y.type||e.BINARY_ACK===y.type){for(var b=m+1;g.charAt(++m)!=="-"&&m!=g.length;);var _=g.substring(b,m);if(_!=Number(_)||g.charAt(m)!=="-")throw new Error("Illegal attachments");y.attachments=Number(_)}if(g.charAt(m+1)==="/"){for(var b=m+1;++m;){var C=g.charAt(m);if(C===","||m===g.length)break}y.nsp=g.substring(b,m)}else y.nsp="/";var A=g.charAt(m+1);if(A!==""&&Number(A)==A){for(var b=m+1;++m;){var C=g.charAt(m);if(C==null||Number(C)!=C){--m;break}if(m===g.length)break}y.id=Number(g.substring(b,m+1))}if(g.charAt(++m)){var w=h(g.substr(m)),F=w!==!1&&(y.type===e.ERROR||i(w));if(F)y.data=w;else return v("invalid payload")}return t("decoded %s as %j",g,y),y}function h(g){try{return JSON.parse(g)}catch{return!1}}s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function p(g){this.reconPack=g,this.buffers=[]}p.prototype.takeBinaryData=function(g){if(this.buffers.push(g),this.buffers.length===this.reconPack.attachments){var m=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),m}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function v(g){return{type:e.ERROR,data:"parser error: "+g}}}(Es)),Es}var ir={exports:{}},or={},ar={exports:{}},Ba;function Zh(){if(Ba)return ar.exports;Ba=1;try{ar.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{ar.exports=!1}return ar.exports}var Ts,Ia;function ho(){return Ia||(Ia=1,Ts=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}()),Ts}var Os,Pa;function po(){if(Pa)return Os;Pa=1;var e=Zh(),t=ho();return Os=function(n){var r=n.xdomain,i=n.xscheme,o=n.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!r||e))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!i&&o)return new XDomainRequest}catch{}if(!r)try{return new t[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},Os}var cr={exports:{}},Ms={},Ds,La;function Yh(){return La||(La=1,Ds=Object.keys||function(t){var n=[],r=Object.prototype.hasOwnProperty;for(var i in t)r.call(t,i)&&n.push(i);return n}),Ds}var Rs,$a;function fl(){if($a)return Rs;$a=1;var e=lo(),t=Object.prototype.toString,n=typeof Blob=="function"||typeof Blob<"u"&&t.call(Blob)==="[object BlobConstructor]",r=typeof File=="function"||typeof File<"u"&&t.call(File)==="[object FileConstructor]";Rs=i;function i(o){if(!o||typeof o!="object")return!1;if(e(o)){for(var l=0,u=o.length;l<u;l++)if(i(o[l]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(o)||typeof ArrayBuffer=="function"&&o instanceof ArrayBuffer||n&&o instanceof Blob||r&&o instanceof File)return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return i(o.toJSON(),!0);for(var d in o)if(Object.prototype.hasOwnProperty.call(o,d)&&i(o[d]))return!0;return!1}return Rs}var Bs,Na;function Jh(){return Na||(Na=1,Bs=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||r===0)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),l=t,u=0;l<n;l++,u++)o[u]=i[l];return o.buffer}),Bs}var Is,qa;function Qh(){if(qa)return Is;qa=1,Is=e;function e(n,r,i){var o=!1;return i=i||t,l.count=n,n===0?r():l;function l(u,d){if(l.count<=0)throw new Error("after called too many times");--l.count,u?(o=!0,r(u),r=i):l.count===0&&!o&&r(null,d)}}function t(){}return Is}/*! https://mths.be/utf8js v2.1.2 by @mathias */var Ps,za;function ep(){if(za)return Ps;za=1;var e=String.fromCharCode;function t(h){for(var p=[],v=0,g=h.length,m,y;v<g;)m=h.charCodeAt(v++),m>=55296&&m<=56319&&v<g?(y=h.charCodeAt(v++),(y&64512)==56320?p.push(((m&1023)<<10)+(y&1023)+65536):(p.push(m),v--)):p.push(m);return p}function n(h){for(var p=h.length,v=-1,g,m="";++v<p;)g=h[v],g>65535&&(g-=65536,m+=e(g>>>10&1023|55296),g=56320|g&1023),m+=e(g);return m}function r(h,p){if(h>=55296&&h<=57343){if(p)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function i(h,p){return e(h>>p&63|128)}function o(h,p){if((h&4294967168)==0)return e(h);var v="";return(h&4294965248)==0?v=e(h>>6&31|192):(h&4294901760)==0?(r(h,p)||(h=65533),v=e(h>>12&15|224),v+=i(h,6)):(h&4292870144)==0&&(v=e(h>>18&7|240),v+=i(h,12),v+=i(h,6)),v+=e(h&63|128),v}function l(h,p){p=p||{};for(var v=p.strict!==!1,g=t(h),m=g.length,y=-1,b,_="";++y<m;)b=g[y],_+=o(b,v);return _}function u(){if(s>=a)throw Error("Invalid byte index");var h=c[s]&255;if(s++,(h&192)==128)return h&63;throw Error("Invalid continuation byte")}function d(h){var p,v,g,m,y;if(s>a)throw Error("Invalid byte index");if(s==a)return!1;if(p=c[s]&255,s++,(p&128)==0)return p;if((p&224)==192){if(v=u(),y=(p&31)<<6|v,y>=128)return y;throw Error("Invalid continuation byte")}if((p&240)==224){if(v=u(),g=u(),y=(p&15)<<12|v<<6|g,y>=2048)return r(y,h)?y:65533;throw Error("Invalid continuation byte")}if((p&248)==240&&(v=u(),g=u(),m=u(),y=(p&7)<<18|v<<12|g<<6|m,y>=65536&&y<=1114111))return y;throw Error("Invalid UTF-8 detected")}var c,a,s;function f(h,p){p=p||{};var v=p.strict!==!1;c=t(h),a=c.length,s=0;for(var g=[],m;(m=d(v))!==!1;)g.push(m);return n(g)}return Ps={version:"2.1.2",encode:l,decode:f},Ps}var ur={},ja;function tp(){return ja||(ja=1,function(e){ur.encode=function(t){var n=new Uint8Array(t),r,i=n.length,o="";for(r=0;r<i;r+=3)o+=e[n[r]>>2],o+=e[(n[r]&3)<<4|n[r+1]>>4],o+=e[(n[r+1]&15)<<2|n[r+2]>>6],o+=e[n[r+2]&63];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},ur.decode=function(t){var n=t.length*.75,r=t.length,i,o=0,l,u,d,c;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);var a=new ArrayBuffer(n),s=new Uint8Array(a);for(i=0;i<r;i+=4)l=e.indexOf(t[i]),u=e.indexOf(t[i+1]),d=e.indexOf(t[i+2]),c=e.indexOf(t[i+3]),s[o++]=l<<2|u>>4,s[o++]=(u&15)<<4|d>>2,s[o++]=(d&3)<<6|c&63;return a}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")),ur}var Ls,Ua;function np(){if(Ua)return Ls;Ua=1;var e=typeof e<"u"?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,t=function(){try{var u=new Blob(["hi"]);return u.size===2}catch{return!1}}(),n=t&&function(){try{var u=new Blob([new Uint8Array([1,2])]);return u.size===2}catch{return!1}}(),r=e&&e.prototype.append&&e.prototype.getBlob;function i(u){return u.map(function(d){if(d.buffer instanceof ArrayBuffer){var c=d.buffer;if(d.byteLength!==c.byteLength){var a=new Uint8Array(d.byteLength);a.set(new Uint8Array(c,d.byteOffset,d.byteLength)),c=a.buffer}return c}return d})}function o(u,d){d=d||{};var c=new e;return i(u).forEach(function(a){c.append(a)}),d.type?c.getBlob(d.type):c.getBlob()}function l(u,d){return new Blob(i(u),d||{})}return typeof Blob<"u"&&(o.prototype=Blob.prototype,l.prototype=Blob.prototype),Ls=function(){return t?n?Blob:l:r?o:void 0}(),Ls}var Va;function cn(){return Va||(Va=1,function(e){var t=Yh(),n=fl(),r=Jh(),i=Qh(),o=ep(),l;typeof ArrayBuffer<"u"&&(l=tp());var u=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),d=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),c=u||d;e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=t(a),f={type:"error",data:"parser error"},h=np();e.encodePacket=function(_,C,A,w){typeof C=="function"&&(w=C,C=!1),typeof A=="function"&&(w=A,A=null);var F=_.data===void 0?void 0:_.data.buffer||_.data;if(typeof ArrayBuffer<"u"&&F instanceof ArrayBuffer)return v(_,C,w);if(typeof h<"u"&&F instanceof h)return m(_,C,w);if(F&&F.base64)return p(_,w);var S=a[_.type];return _.data!==void 0&&(S+=A?o.encode(String(_.data),{strict:!1}):String(_.data)),w(""+S)};function p(_,C){var A="b"+e.packets[_.type]+_.data.data;return C(A)}function v(_,C,A){if(!C)return e.encodeBase64Packet(_,A);var w=_.data,F=new Uint8Array(w),S=new Uint8Array(1+w.byteLength);S[0]=a[_.type];for(var D=0;D<F.length;D++)S[D+1]=F[D];return A(S.buffer)}function g(_,C,A){if(!C)return e.encodeBase64Packet(_,A);var w=new FileReader;return w.onload=function(){e.encodePacket({type:_.type,data:w.result},C,!0,A)},w.readAsArrayBuffer(_.data)}function m(_,C,A){if(!C)return e.encodeBase64Packet(_,A);if(c)return g(_,C,A);var w=new Uint8Array(1);w[0]=a[_.type];var F=new h([w.buffer,_.data]);return A(F)}e.encodeBase64Packet=function(_,C){var A="b"+e.packets[_.type];if(typeof h<"u"&&_.data instanceof h){var w=new FileReader;return w.onload=function(){var P=w.result.split(",")[1];C(A+P)},w.readAsDataURL(_.data)}var F;try{F=String.fromCharCode.apply(null,new Uint8Array(_.data))}catch{for(var S=new Uint8Array(_.data),D=new Array(S.length),B=0;B<S.length;B++)D[B]=S[B];F=String.fromCharCode.apply(null,D)}return A+=btoa(F),C(A)},e.decodePacket=function(_,C,A){if(_===void 0)return f;if(typeof _=="string"){if(_.charAt(0)==="b")return e.decodeBase64Packet(_.substr(1),C);if(A&&(_=y(_),_===!1))return f;var F=_.charAt(0);return Number(F)!=F||!s[F]?f:_.length>1?{type:s[F],data:_.substring(1)}:{type:s[F]}}var w=new Uint8Array(_),F=w[0],S=r(_,1);return h&&C==="blob"&&(S=new h([S])),{type:s[F],data:S}};function y(_){try{_=o.decode(_,{strict:!1})}catch{return!1}return _}e.decodeBase64Packet=function(_,C){var A=s[_.charAt(0)];if(!l)return{type:A,data:{base64:!0,data:_.substr(1)}};var w=l.decode(_.substr(1));return C==="blob"&&h&&(w=new h([w])),{type:A,data:w}},e.encodePayload=function(_,C,A){typeof C=="function"&&(A=C,C=null);var w=n(_);if(C&&w)return h&&!c?e.encodePayloadAsBlob(_,A):e.encodePayloadAsArrayBuffer(_,A);if(!_.length)return A("0:");function F(D){return D.length+":"+D}function S(D,B){e.encodePacket(D,w?C:!1,!1,function(P){B(null,F(P))})}b(_,S,function(D,B){return A(B.join(""))})};function b(_,C,A){for(var w=new Array(_.length),F=i(_.length,A),S=function(B,P,J){C(P,function(Q,ee){w[B]=ee,J(Q,w)})},D=0;D<_.length;D++)S(D,_[D],F)}e.decodePayload=function(_,C,A){if(typeof _!="string")return e.decodePayloadAsBinary(_,C,A);typeof C=="function"&&(A=C,C=null);var w;if(_==="")return A(f,0,1);for(var F="",S,D,B=0,P=_.length;B<P;B++){var J=_.charAt(B);if(J!==":"){F+=J;continue}if(F===""||F!=(S=Number(F))||(D=_.substr(B+1,S),F!=D.length))return A(f,0,1);if(D.length){if(w=e.decodePacket(D,C,!1),f.type===w.type&&f.data===w.data)return A(f,0,1);var Q=A(w,B+S,P);if(Q===!1)return}B+=S,F=""}if(F!=="")return A(f,0,1)},e.encodePayloadAsArrayBuffer=function(_,C){if(!_.length)return C(new ArrayBuffer(0));function A(w,F){e.encodePacket(w,!0,!0,function(S){return F(null,S)})}b(_,A,function(w,F){var S=F.reduce(function(P,J){var Q;return typeof J=="string"?Q=J.length:Q=J.byteLength,P+Q.toString().length+Q+2},0),D=new Uint8Array(S),B=0;return F.forEach(function(P){var J=typeof P=="string",Q=P;if(J){for(var xt=new Uint8Array(P.length),ee=0;ee<P.length;ee++)xt[ee]=P.charCodeAt(ee);Q=xt.buffer}J?D[B++]=0:D[B++]=1;for(var kt=Q.byteLength.toString(),ee=0;ee<kt.length;ee++)D[B++]=parseInt(kt[ee]);D[B++]=255;for(var xt=new Uint8Array(Q),ee=0;ee<xt.length;ee++)D[B++]=xt[ee]}),C(D.buffer)})},e.encodePayloadAsBlob=function(_,C){function A(w,F){e.encodePacket(w,!0,!0,function(S){var D=new Uint8Array(1);if(D[0]=1,typeof S=="string"){for(var B=new Uint8Array(S.length),P=0;P<S.length;P++)B[P]=S.charCodeAt(P);S=B.buffer,D[0]=0}for(var J=S instanceof ArrayBuffer?S.byteLength:S.size,Q=J.toString(),ee=new Uint8Array(Q.length+1),P=0;P<Q.length;P++)ee[P]=parseInt(Q[P]);if(ee[Q.length]=255,h){var kt=new h([D.buffer,ee.buffer,S]);F(null,kt)}})}b(_,A,function(w,F){return C(new h(F))})},e.decodePayloadAsBinary=function(_,C,A){typeof C=="function"&&(A=C,C=null);for(var w=_,F=[];w.byteLength>0;){for(var S=new Uint8Array(w),D=S[0]===0,B="",P=1;S[P]!==255;P++){if(B.length>310)return A(f,0,1);B+=S[P]}w=r(w,2+B.length),B=parseInt(B);var J=r(w,0,B);if(D)try{J=String.fromCharCode.apply(null,new Uint8Array(J))}catch{var Q=new Uint8Array(J);J="";for(var P=0;P<Q.length;P++)J+=String.fromCharCode(Q[P])}F.push(J),w=r(w,B)}var ee=F.length;F.forEach(function(kt,xt){A(e.decodePacket(kt,C,!0),xt,ee)})}}(Ms)),Ms}var $s,Ha;function go(){if(Ha)return $s;Ha=1;var e=cn(),t=Zr();$s=n;function n(r){this.path=r.path,this.hostname=r.hostname,this.port=r.port,this.secure=r.secure,this.query=r.query,this.timestampParam=r.timestampParam,this.timestampRequests=r.timestampRequests,this.readyState="",this.agent=r.agent||!1,this.socket=r.socket,this.enablesXDR=r.enablesXDR,this.withCredentials=r.withCredentials,this.pfx=r.pfx,this.key=r.key,this.passphrase=r.passphrase,this.cert=r.cert,this.ca=r.ca,this.ciphers=r.ciphers,this.rejectUnauthorized=r.rejectUnauthorized,this.forceNode=r.forceNode,this.isReactNative=r.isReactNative,this.extraHeaders=r.extraHeaders,this.localAddress=r.localAddress}return t(n.prototype),n.prototype.onError=function(r,i){var o=new Error(r);return o.type="TransportError",o.description=i,this.emit("error",o),this},n.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},n.prototype.send=function(r){if(this.readyState==="open")this.write(r);else throw new Error("Transport not open")},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(r){var i=e.decodePacket(r,this.socket.binaryType);this.onPacket(i)},n.prototype.onPacket=function(r){this.emit("packet",r)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")},$s}var lr={},Ga;function vo(){return Ga||(Ga=1,lr.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},lr.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}),lr}var Ns,Wa;function Yr(){return Wa||(Wa=1,Ns=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}),Ns}var qs,Ka;function dl(){if(Ka)return qs;Ka=1;var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),t=64,n={},r=0,i=0,o;function l(c){var a="";do a=e[c%t]+a,c=Math.floor(c/t);while(c>0);return a}function u(c){var a=0;for(i=0;i<c.length;i++)a=a*t+n[c.charAt(i)];return a}function d(){var c=l(+new Date);return c!==o?(r=0,o=c):c+"."+l(r++)}for(;i<t;i++)n[e[i]]=i;return d.encode=l,d.decode=u,qs=d,qs}var zs,Xa;function hl(){if(Xa)return zs;Xa=1;var e=go(),t=vo(),n=cn(),r=Yr(),i=dl(),o=jn()("engine.io-client:polling");zs=u;var l=function(){var d=po(),c=new d({xdomain:!1});return c.responseType!=null}();function u(d){var c=d&&d.forceBase64;(!l||c)&&(this.supportsBinary=!1),e.call(this,d)}return r(u,e),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(d){var c=this;this.readyState="pausing";function a(){o("paused"),c.readyState="paused",d()}if(this.polling||!this.writable){var s=0;this.polling&&(o("we are currently polling - waiting to pause"),s++,this.once("pollComplete",function(){o("pre-pause polling complete"),--s||a()})),this.writable||(o("we are currently writing - waiting to pause"),s++,this.once("drain",function(){o("pre-pause writing complete"),--s||a()}))}else a()},u.prototype.poll=function(){o("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(d){var c=this;o("polling got data %s",d);var a=function(s,f,h){if(c.readyState==="opening"&&c.onOpen(),s.type==="close")return c.onClose(),!1;c.onPacket(s)};n.decodePayload(d,this.socket.binaryType,a),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():o('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var d=this;function c(){o("writing close packet"),d.write([{type:"close"}])}this.readyState==="open"?(o("transport open - closing"),c()):(o("transport not open - deferring close"),this.once("open",c))},u.prototype.write=function(d){var c=this;this.writable=!1;var a=function(){c.writable=!0,c.emit("drain")};n.encodePayload(d,this.supportsBinary,function(s){c.doWrite(s,a)})},u.prototype.uri=function(){var d=this.query||{},c=this.secure?"https":"http",a="";this.timestampRequests!==!1&&(d[this.timestampParam]=i()),!this.supportsBinary&&!d.sid&&(d.b64=1),d=t.encode(d),this.port&&(c==="https"&&Number(this.port)!==443||c==="http"&&Number(this.port)!==80)&&(a=":"+this.port),d.length&&(d="?"+d);var s=this.hostname.indexOf(":")!==-1;return c+"://"+(s?"["+this.hostname+"]":this.hostname)+a+this.path+d},zs}var Za;function rp(){if(Za)return cr.exports;Za=1;var e=po(),t=hl(),n=Zr(),r=Yr(),i=jn()("engine.io-client:polling-xhr"),o=ho();cr.exports=u,cr.exports.Request=d;function l(){}function u(s){if(t.call(this,s),this.requestTimeout=s.requestTimeout,this.extraHeaders=s.extraHeaders,typeof location<"u"){var f=location.protocol==="https:",h=location.port;h||(h=f?443:80),this.xd=typeof location<"u"&&s.hostname!==location.hostname||h!==s.port,this.xs=s.secure!==f}}r(u,t),u.prototype.supportsBinary=!0,u.prototype.request=function(s){return s=s||{},s.uri=this.uri(),s.xd=this.xd,s.xs=this.xs,s.agent=this.agent||!1,s.supportsBinary=this.supportsBinary,s.enablesXDR=this.enablesXDR,s.withCredentials=this.withCredentials,s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized,s.requestTimeout=this.requestTimeout,s.extraHeaders=this.extraHeaders,new d(s)},u.prototype.doWrite=function(s,f){var h=typeof s!="string"&&s!==void 0,p=this.request({method:"POST",data:s,isBinary:h}),v=this;p.on("success",f),p.on("error",function(g){v.onError("xhr post error",g)}),this.sendXhr=p},u.prototype.doPoll=function(){i("xhr poll");var s=this.request(),f=this;s.on("data",function(h){f.onData(h)}),s.on("error",function(h){f.onError("xhr poll error",h)}),this.pollXhr=s};function d(s){this.method=s.method||"GET",this.uri=s.uri,this.xd=!!s.xd,this.xs=!!s.xs,this.async=s.async!==!1,this.data=s.data!==void 0?s.data:null,this.agent=s.agent,this.isBinary=s.isBinary,this.supportsBinary=s.supportsBinary,this.enablesXDR=s.enablesXDR,this.withCredentials=s.withCredentials,this.requestTimeout=s.requestTimeout,this.pfx=s.pfx,this.key=s.key,this.passphrase=s.passphrase,this.cert=s.cert,this.ca=s.ca,this.ciphers=s.ciphers,this.rejectUnauthorized=s.rejectUnauthorized,this.extraHeaders=s.extraHeaders,this.create()}if(n(d.prototype),d.prototype.create=function(){var s={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized;var f=this.xhr=new e(s),h=this;try{i("xhr open %s: %s",this.method,this.uri),f.open(this.method,this.uri,this.async);try{if(this.extraHeaders){f.setDisableHeaderCheck&&f.setDisableHeaderCheck(!0);for(var p in this.extraHeaders)this.extraHeaders.hasOwnProperty(p)&&f.setRequestHeader(p,this.extraHeaders[p])}}catch{}if(this.method==="POST")try{this.isBinary?f.setRequestHeader("Content-type","application/octet-stream"):f.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{f.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in f&&(f.withCredentials=this.withCredentials),this.requestTimeout&&(f.timeout=this.requestTimeout),this.hasXDR()?(f.onload=function(){h.onLoad()},f.onerror=function(){h.onError(f.responseText)}):f.onreadystatechange=function(){if(f.readyState===2)try{var v=f.getResponseHeader("Content-Type");(h.supportsBinary&&v==="application/octet-stream"||v==="application/octet-stream; charset=UTF-8")&&(f.responseType="arraybuffer")}catch{}f.readyState===4&&(f.status===200||f.status===1223?h.onLoad():setTimeout(function(){h.onError(typeof f.status=="number"?f.status:0)},0))},i("xhr data %s",this.data),f.send(this.data)}catch(v){setTimeout(function(){h.onError(v)},0);return}typeof document<"u"&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(s){this.emit("data",s),this.onSuccess()},d.prototype.onError=function(s){this.emit("error",s),this.cleanup(!0)},d.prototype.cleanup=function(s){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,s)try{this.xhr.abort()}catch{}typeof document<"u"&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var s;try{var f;try{f=this.xhr.getResponseHeader("Content-Type")}catch{}f==="application/octet-stream"||f==="application/octet-stream; charset=UTF-8"?s=this.xhr.response||this.xhr.responseText:s=this.xhr.responseText}catch(h){this.onError(h)}s!=null&&this.onData(s)},d.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",a);else if(typeof addEventListener=="function"){var c="onpagehide"in o?"pagehide":"unload";addEventListener(c,a,!1)}}function a(){for(var s in d.requests)d.requests.hasOwnProperty(s)&&d.requests[s].abort()}return cr.exports}var js,Ya;function sp(){if(Ya)return js;Ya=1;var e=hl(),t=Yr(),n=ho();js=u;var r=/\n/g,i=/\\n/g,o;function l(){}function u(d){e.call(this,d),this.query=this.query||{},o||(o=n.___eio=n.___eio||[]),this.index=o.length;var c=this;o.push(function(a){c.onData(a)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=l)},!1)}return t(u,e),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),e.prototype.doClose.call(this)},u.prototype.doPoll=function(){var d=this,c=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),c.async=!0,c.src=this.uri(),c.onerror=function(f){d.onError("jsonp poll error",f)};var a=document.getElementsByTagName("script")[0];a?a.parentNode.insertBefore(c,a):(document.head||document.body).appendChild(c),this.script=c;var s=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);s&&setTimeout(function(){var f=document.createElement("iframe");document.body.appendChild(f),document.body.removeChild(f)},100)},u.prototype.doWrite=function(d,c){var a=this;if(!this.form){var s=document.createElement("form"),f=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index,p;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=h,s.method="POST",s.setAttribute("accept-charset","utf-8"),f.name="d",s.appendChild(f),document.body.appendChild(s),this.form=s,this.area=f}this.form.action=this.uri();function v(){g(),c()}function g(){if(a.iframe)try{a.form.removeChild(a.iframe)}catch(y){a.onError("jsonp polling iframe removal error",y)}try{var m='<iframe src="javascript:0" name="'+a.iframeId+'">';p=document.createElement(m)}catch{p=document.createElement("iframe"),p.name=a.iframeId,p.src="javascript:0"}p.id=a.iframeId,a.form.appendChild(p),a.iframe=p}g(),d=d.replace(i,`\\
`),this.area.value=d.replace(r,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){a.iframe.readyState==="complete"&&v()}:this.iframe.onload=v},js}const ip={},op=Object.freeze(Object.defineProperty({__proto__:null,default:ip},Symbol.toStringTag,{value:"Module"})),pl=rl(op);var Us,Ja;function ap(){if(Ja)return Us;Ja=1;var e=go(),t=cn(),n=vo(),r=Yr(),i=dl(),o=jn()("engine.io-client:websocket"),l,u;if(typeof WebSocket<"u"?l=WebSocket:typeof self<"u"&&(l=self.WebSocket||self.MozWebSocket),typeof window>"u")try{u=pl}catch{}var d=l||u;Us=c;function c(a){var s=a&&a.forceBase64;s&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,this.usingBrowserWebSocket=l&&!a.forceNode,this.protocols=a.protocols,this.usingBrowserWebSocket||(d=u),e.call(this,a)}return r(c,e),c.prototype.name="websocket",c.prototype.supportsBinary=!0,c.prototype.doOpen=function(){if(this.check()){var a=this.uri(),s=this.protocols,f={};this.isReactNative||(f.agent=this.agent,f.perMessageDeflate=this.perMessageDeflate,f.pfx=this.pfx,f.key=this.key,f.passphrase=this.passphrase,f.cert=this.cert,f.ca=this.ca,f.ciphers=this.ciphers,f.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(f.headers=this.extraHeaders),this.localAddress&&(f.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?s?new d(a,s):new d(a):new d(a,s,f)}catch(h){return this.emit("error",h)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},c.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(s){a.onData(s.data)},this.ws.onerror=function(s){a.onError("websocket error",s)}},c.prototype.write=function(a){var s=this;this.writable=!1;for(var f=a.length,h=0,p=f;h<p;h++)(function(g){t.encodePacket(g,s.supportsBinary,function(m){if(!s.usingBrowserWebSocket){var y={};if(g.options&&(y.compress=g.options.compress),s.perMessageDeflate){var b=typeof m=="string"?Buffer.byteLength(m):m.length;b<s.perMessageDeflate.threshold&&(y.compress=!1)}}try{s.usingBrowserWebSocket?s.ws.send(m):s.ws.send(m,y)}catch{o("websocket closed before onclose event")}--f||v()})})(a[h]);function v(){s.emit("flush"),setTimeout(function(){s.writable=!0,s.emit("drain")},0)}},c.prototype.onClose=function(){e.prototype.onClose.call(this)},c.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()},c.prototype.uri=function(){var a=this.query||{},s=this.secure?"wss":"ws",f="";this.port&&(s==="wss"&&Number(this.port)!==443||s==="ws"&&Number(this.port)!==80)&&(f=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=i()),this.supportsBinary||(a.b64=1),a=n.encode(a),a.length&&(a="?"+a);var h=this.hostname.indexOf(":")!==-1;return s+"://"+(h?"["+this.hostname+"]":this.hostname)+f+this.path+a},c.prototype.check=function(){return!!d&&!("__initialize"in d&&this.name===c.prototype.name)},Us}var Qa;function ec(){if(Qa)return or;Qa=1;var e=po(),t=rp(),n=sp(),r=ap();or.polling=i,or.websocket=r;function i(o){var l,u=!1,d=!1,c=o.jsonp!==!1;if(typeof location<"u"){var a=location.protocol==="https:",s=location.port;s||(s=a?443:80),u=o.hostname!==location.hostname||s!==o.port,d=o.secure!==a}if(o.xdomain=u,o.xscheme=d,l=new e(o),"open"in l&&!o.forceJSONP)return new t(o);if(!c)throw new Error("JSONP disabled");return new n(o)}return or}var Vs,tc;function gl(){if(tc)return Vs;tc=1;var e=[].indexOf;return Vs=function(t,n){if(e)return t.indexOf(n);for(var r=0;r<t.length;++r)if(t[r]===n)return r;return-1},Vs}var Hs,nc;function cp(){if(nc)return Hs;nc=1;var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];Hs=function(o){var l=o,u=o.indexOf("["),d=o.indexOf("]");u!=-1&&d!=-1&&(o=o.substring(0,u)+o.substring(u,d).replace(/:/g,";")+o.substring(d,o.length));for(var c=e.exec(o||""),a={},s=14;s--;)a[t[s]]=c[s]||"";return u!=-1&&d!=-1&&(a.source=l,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=n(a,a.path),a.queryKey=r(a,a.query),a};function n(i,o){var l=/\/{2,9}/g,u=o.replace(l,"/").split("/");return(o.substr(0,1)=="/"||o.length===0)&&u.splice(0,1),o.substr(o.length-1,1)=="/"&&u.splice(u.length-1,1),u}function r(i,o){var l={};return o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(u,d,c){d&&(l[d]=c)}),l}return Hs}var Gs,rc;function up(){if(rc)return Gs;rc=1;var e=ec(),t=Zr(),n=jn()("engine.io-client:socket"),r=gl(),i=cn(),o=cp(),l=vo();Gs=u;function u(c,a){if(!(this instanceof u))return new u(c,a);a=a||{},c&&typeof c=="object"&&(a=c,c=null),c?(c=o(c),a.hostname=c.host,a.secure=c.protocol==="https"||c.protocol==="wss",a.port=c.port,c.query&&(a.query=c.query)):a.host&&(a.hostname=o(a.host).host),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.agent=a.agent||!1,this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=a.query||{},typeof this.query=="string"&&(this.query=l.decode(this.query)),this.upgrade=a.upgrade!==!1,this.path=(a.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!a.forceJSONP,this.jsonp=a.jsonp!==!1,this.forceBase64=!!a.forceBase64,this.enablesXDR=!!a.enablesXDR,this.withCredentials=a.withCredentials!==!1,this.timestampParam=a.timestampParam||"t",this.timestampRequests=a.timestampRequests,this.transports=a.transports||["polling","websocket"],this.transportOptions=a.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=a.policyPort||843,this.rememberUpgrade=a.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=a.onlyBinaryUpgrades,this.perMessageDeflate=a.perMessageDeflate!==!1?a.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=a.pfx||null,this.key=a.key||null,this.passphrase=a.passphrase||null,this.cert=a.cert||null,this.ca=a.ca||null,this.ciphers=a.ciphers||null,this.rejectUnauthorized=a.rejectUnauthorized===void 0?!0:a.rejectUnauthorized,this.forceNode=!!a.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(a.extraHeaders&&Object.keys(a.extraHeaders).length>0&&(this.extraHeaders=a.extraHeaders),a.localAddress&&(this.localAddress=a.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}u.priorWebsocketSuccess=!1,t(u.prototype),u.protocol=i.protocol,u.Socket=u,u.Transport=go(),u.transports=ec(),u.parser=cn(),u.prototype.createTransport=function(c){n('creating transport "%s"',c);var a=d(this.query);a.EIO=i.protocol,a.transport=c;var s=this.transportOptions[c]||{};this.id&&(a.sid=this.id);var f=new e[c]({query:a,socket:this,agent:s.agent||this.agent,hostname:s.hostname||this.hostname,port:s.port||this.port,secure:s.secure||this.secure,path:s.path||this.path,forceJSONP:s.forceJSONP||this.forceJSONP,jsonp:s.jsonp||this.jsonp,forceBase64:s.forceBase64||this.forceBase64,enablesXDR:s.enablesXDR||this.enablesXDR,withCredentials:s.withCredentials||this.withCredentials,timestampRequests:s.timestampRequests||this.timestampRequests,timestampParam:s.timestampParam||this.timestampParam,policyPort:s.policyPort||this.policyPort,pfx:s.pfx||this.pfx,key:s.key||this.key,passphrase:s.passphrase||this.passphrase,cert:s.cert||this.cert,ca:s.ca||this.ca,ciphers:s.ciphers||this.ciphers,rejectUnauthorized:s.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:s.perMessageDeflate||this.perMessageDeflate,extraHeaders:s.extraHeaders||this.extraHeaders,forceNode:s.forceNode||this.forceNode,localAddress:s.localAddress||this.localAddress,requestTimeout:s.requestTimeout||this.requestTimeout,protocols:s.protocols||void 0,isReactNative:this.isReactNative});return f};function d(c){var a={};for(var s in c)c.hasOwnProperty(s)&&(a[s]=c[s]);return a}return u.prototype.open=function(){var c;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)c="websocket";else if(this.transports.length===0){var a=this;setTimeout(function(){a.emit("error","No transports available")},0);return}else c=this.transports[0];this.readyState="opening";try{c=this.createTransport(c)}catch{this.transports.shift(),this.open();return}c.open(),this.setTransport(c)},u.prototype.setTransport=function(c){n("setting transport %s",c.name);var a=this;this.transport&&(n("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=c,c.on("drain",function(){a.onDrain()}).on("packet",function(s){a.onPacket(s)}).on("error",function(s){a.onError(s)}).on("close",function(){a.onClose("transport close")})},u.prototype.probe=function(c){n('probing transport "%s"',c);var a=this.createTransport(c,{probe:1}),s=!1,f=this;u.priorWebsocketSuccess=!1;function h(){if(f.onlyBinaryUpgrades){var _=!this.supportsBinary&&f.transport.supportsBinary;s=s||_}s||(n('probe transport "%s" opened',c),a.send([{type:"ping",data:"probe"}]),a.once("packet",function(C){if(!s)if(C.type==="pong"&&C.data==="probe"){if(n('probe transport "%s" pong',c),f.upgrading=!0,f.emit("upgrading",a),!a)return;u.priorWebsocketSuccess=a.name==="websocket",n('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){s||f.readyState!=="closed"&&(n("changing transport and sending upgrade packet"),b(),f.setTransport(a),a.send([{type:"upgrade"}]),f.emit("upgrade",a),a=null,f.upgrading=!1,f.flush())})}else{n('probe transport "%s" failed',c);var A=new Error("probe error");A.transport=a.name,f.emit("upgradeError",A)}}))}function p(){s||(s=!0,b(),a.close(),a=null)}function v(_){var C=new Error("probe error: "+_);C.transport=a.name,p(),n('probe transport "%s" failed because of error: %s',c,_),f.emit("upgradeError",C)}function g(){v("transport closed")}function m(){v("socket closed")}function y(_){a&&_.name!==a.name&&(n('"%s" works - aborting "%s"',_.name,a.name),p())}function b(){a.removeListener("open",h),a.removeListener("error",v),a.removeListener("close",g),f.removeListener("close",m),f.removeListener("upgrading",y)}a.once("open",h),a.once("error",v),a.once("close",g),this.once("close",m),this.once("upgrading",y),a.open()},u.prototype.onOpen=function(){if(n("socket open"),this.readyState="open",u.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){n("starting upgrade probes");for(var c=0,a=this.upgrades.length;c<a;c++)this.probe(this.upgrades[c])}},u.prototype.onPacket=function(c){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(n('socket receive: type "%s", data "%s"',c.type,c.data),this.emit("packet",c),this.emit("heartbeat"),c.type){case"open":this.onHandshake(JSON.parse(c.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var a=new Error("server error");a.code=c.data,this.onError(a);break;case"message":this.emit("data",c.data),this.emit("message",c.data);break}else n('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(c){this.emit("handshake",c),this.id=c.sid,this.transport.query.sid=c.sid,this.upgrades=this.filterUpgrades(c.upgrades),this.pingInterval=c.pingInterval,this.pingTimeout=c.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(c){clearTimeout(this.pingTimeoutTimer);var a=this;a.pingTimeoutTimer=setTimeout(function(){a.readyState!=="closed"&&a.onClose("ping timeout")},c||a.pingInterval+a.pingTimeout)},u.prototype.setPing=function(){var c=this;clearTimeout(c.pingIntervalTimer),c.pingIntervalTimer=setTimeout(function(){n("writing ping packet - expecting pong within %sms",c.pingTimeout),c.ping(),c.onHeartbeat(c.pingTimeout)},c.pingInterval)},u.prototype.ping=function(){var c=this;this.sendPacket("ping",function(){c.emit("ping")})},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},u.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(n("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(c,a,s){return this.sendPacket("message",c,a,s),this},u.prototype.sendPacket=function(c,a,s,f){if(typeof a=="function"&&(f=a,a=void 0),typeof s=="function"&&(f=s,s=null),!(this.readyState==="closing"||this.readyState==="closed")){s=s||{},s.compress=s.compress!==!1;var h={type:c,data:a,options:s};this.emit("packetCreate",h),this.writeBuffer.push(h),f&&this.once("flush",f),this.flush()}},u.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var c=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?f():a()}):this.upgrading?f():a()}function a(){c.onClose("forced close"),n("socket closing - telling transport to close"),c.transport.close()}function s(){c.removeListener("upgrade",s),c.removeListener("upgradeError",s),a()}function f(){c.once("upgrade",s),c.once("upgradeError",s)}return this},u.prototype.onError=function(c){n("socket error %j",c),u.priorWebsocketSuccess=!1,this.emit("error",c),this.onClose("transport error",c)},u.prototype.onClose=function(c,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){n('socket close with reason: "%s"',c);var s=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",c,a),s.writeBuffer=[],s.prevBufferLen=0}},u.prototype.filterUpgrades=function(c){for(var a=[],s=0,f=c.length;s<f;s++)~r(this.transports,c[s])&&a.push(c[s]);return a},Gs}var sc;function lp(){return sc||(sc=1,ir.exports=up(),ir.exports.parser=cn()),ir.exports}var Ws={exports:{}},Ks={exports:{}},ic;function vl(){return ic||(ic=1,function(e){e.exports=t;function t(r){if(r)return n(r)}function n(r){for(var i in t.prototype)r[i]=t.prototype[i];return r}t.prototype.on=t.prototype.addEventListener=function(r,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(i),this},t.prototype.once=function(r,i){function o(){this.off(r,o),i.apply(this,arguments)}return o.fn=i,this.on(r,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(r,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+r];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var l,u=0;u<o.length;u++)if(l=o[u],l===i||l.fn===i){o.splice(u,1);break}return this},t.prototype.emit=function(r){this._callbacks=this._callbacks||{};var i=[].slice.call(arguments,1),o=this._callbacks["$"+r];if(o){o=o.slice(0);for(var l=0,u=o.length;l<u;++l)o[l].apply(this,i)}return this},t.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},t.prototype.hasListeners=function(r){return!!this.listeners(r).length}}(Ks)),Ks.exports}var Xs,oc;function fp(){if(oc)return Xs;oc=1,Xs=e;function e(t,n){var r=[];n=n||0;for(var i=n||0;i<t.length;i++)r[i-n]=t[i];return r}return Xs}var Zs,ac;function ml(){if(ac)return Zs;ac=1,Zs=e;function e(t,n,r){return t.on(n,r),{destroy:function(){t.removeListener(n,r)}}}return Zs}var Ys,cc;function yl(){if(cc)return Ys;cc=1;var e=[].slice;return Ys=function(t,n){if(typeof n=="string"&&(n=t[n]),typeof n!="function")throw new Error("bind() requires a function");var r=e.call(arguments,2);return function(){return n.apply(t,r.concat(e.call(arguments)))}},Ys}var fr={},uc;function dp(){return uc||(uc=1,fr.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},fr.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}),fr}var lc;function bl(){return lc||(lc=1,function(e,t){var n=fo(),r=vl(),i=fp(),o=ml(),l=yl(),u=Xr()("socket.io-client:socket"),d=dp(),c=fl();e.exports=f;var a={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},s=r.prototype.emit;function f(h,p,v){this.io=h,this.nsp=p,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},v&&v.query&&(this.query=v.query),this.io.autoConnect&&this.open()}r(f.prototype),f.prototype.subEvents=function(){if(!this.subs){var h=this.io;this.subs=[o(h,"open",l(this,"onopen")),o(h,"packet",l(this,"onpacket")),o(h,"close",l(this,"onclose"))]}},f.prototype.open=f.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},f.prototype.send=function(){var h=i(arguments);return h.unshift("message"),this.emit.apply(this,h),this},f.prototype.emit=function(h){if(a.hasOwnProperty(h))return s.apply(this,arguments),this;var p=i(arguments),v={type:(this.flags.binary!==void 0?this.flags.binary:c(p))?n.BINARY_EVENT:n.EVENT,data:p};return v.options={},v.options.compress=!this.flags||this.flags.compress!==!1,typeof p[p.length-1]=="function"&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=p.pop(),v.id=this.ids++),this.connected?this.packet(v):this.sendBuffer.push(v),this.flags={},this},f.prototype.packet=function(h){h.nsp=this.nsp,this.io.packet(h)},f.prototype.onopen=function(){if(u("transport is open - connecting"),this.nsp!=="/")if(this.query){var h=typeof this.query=="object"?d.encode(this.query):this.query;u("sending connect packet with query %s",h),this.packet({type:n.CONNECT,query:h})}else this.packet({type:n.CONNECT})},f.prototype.onclose=function(h){u("close (%s)",h),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",h)},f.prototype.onpacket=function(h){var p=h.nsp===this.nsp,v=h.type===n.ERROR&&h.nsp==="/";if(!(!p&&!v))switch(h.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(h);break;case n.BINARY_EVENT:this.onevent(h);break;case n.ACK:this.onack(h);break;case n.BINARY_ACK:this.onack(h);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",h.data);break}},f.prototype.onevent=function(h){var p=h.data||[];u("emitting event %j",p),h.id!=null&&(u("attaching ack callback to event"),p.push(this.ack(h.id))),this.connected?s.apply(this,p):this.receiveBuffer.push(p)},f.prototype.ack=function(h){var p=this,v=!1;return function(){if(!v){v=!0;var g=i(arguments);u("sending ack %j",g),p.packet({type:c(g)?n.BINARY_ACK:n.ACK,id:h,data:g})}}},f.prototype.onack=function(h){var p=this.acks[h.id];typeof p=="function"?(u("calling ack %s with %j",h.id,h.data),p.apply(this,h.data),delete this.acks[h.id]):u("bad ack %s",h.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},f.prototype.emitBuffered=function(){var h;for(h=0;h<this.receiveBuffer.length;h++)s.apply(this,this.receiveBuffer[h]);for(this.receiveBuffer=[],h=0;h<this.sendBuffer.length;h++)this.packet(this.sendBuffer[h]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var h=0;h<this.subs.length;h++)this.subs[h].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(h){return this.flags.compress=h,this},f.prototype.binary=function(h){return this.flags.binary=h,this}}(Ws)),Ws.exports}var Js,fc;function hp(){if(fc)return Js;fc=1,Js=e;function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}return e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*t);t=(Math.floor(n*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t},Js}var Qs,dc;function hc(){if(dc)return Qs;dc=1;var e=lp(),t=bl(),n=vl(),r=fo(),i=ml(),o=yl(),l=Xr()("socket.io-client:manager"),u=gl(),d=hp(),c=Object.prototype.hasOwnProperty;Qs=a;function a(s,f){if(!(this instanceof a))return new a(s,f);s&&typeof s=="object"&&(f=s,s=void 0),f=f||{},f.path=f.path||"/socket.io",this.nsps={},this.subs=[],this.opts=f,this.reconnection(f.reconnection!==!1),this.reconnectionAttempts(f.reconnectionAttempts||1/0),this.reconnectionDelay(f.reconnectionDelay||1e3),this.reconnectionDelayMax(f.reconnectionDelayMax||5e3),this.randomizationFactor(f.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(f.timeout==null?2e4:f.timeout),this.readyState="closed",this.uri=s,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var h=f.parser||r;this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=f.autoConnect!==!1,this.autoConnect&&this.open()}return a.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var s in this.nsps)c.call(this.nsps,s)&&this.nsps[s].emit.apply(this.nsps[s],arguments)},a.prototype.updateSocketIds=function(){for(var s in this.nsps)c.call(this.nsps,s)&&(this.nsps[s].id=this.generateId(s))},a.prototype.generateId=function(s){return(s==="/"?"":s+"#")+this.engine.id},n(a.prototype),a.prototype.reconnection=function(s){return arguments.length?(this._reconnection=!!s,this):this._reconnection},a.prototype.reconnectionAttempts=function(s){return arguments.length?(this._reconnectionAttempts=s,this):this._reconnectionAttempts},a.prototype.reconnectionDelay=function(s){return arguments.length?(this._reconnectionDelay=s,this.backoff&&this.backoff.setMin(s),this):this._reconnectionDelay},a.prototype.randomizationFactor=function(s){return arguments.length?(this._randomizationFactor=s,this.backoff&&this.backoff.setJitter(s),this):this._randomizationFactor},a.prototype.reconnectionDelayMax=function(s){return arguments.length?(this._reconnectionDelayMax=s,this.backoff&&this.backoff.setMax(s),this):this._reconnectionDelayMax},a.prototype.timeout=function(s){return arguments.length?(this._timeout=s,this):this._timeout},a.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},a.prototype.open=a.prototype.connect=function(s,f){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=e(this.uri,this.opts);var h=this.engine,p=this;this.readyState="opening",this.skipReconnect=!1;var v=i(h,"open",function(){p.onopen(),s&&s()}),g=i(h,"error",function(b){if(l("connect_error"),p.cleanup(),p.readyState="closed",p.emitAll("connect_error",b),s){var _=new Error("Connection error");_.data=b,s(_)}else p.maybeReconnectOnOpen()});if(this._timeout!==!1){var m=this._timeout;l("connect attempt will timeout after %d",m);var y=setTimeout(function(){l("connect attempt timed out after %d",m),v.destroy(),h.close(),h.emit("error","timeout"),p.emitAll("connect_timeout",m)},m);this.subs.push({destroy:function(){clearTimeout(y)}})}return this.subs.push(v),this.subs.push(g),this},a.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var s=this.engine;this.subs.push(i(s,"data",o(this,"ondata"))),this.subs.push(i(s,"ping",o(this,"onping"))),this.subs.push(i(s,"pong",o(this,"onpong"))),this.subs.push(i(s,"error",o(this,"onerror"))),this.subs.push(i(s,"close",o(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",o(this,"ondecoded")))},a.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},a.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},a.prototype.ondata=function(s){this.decoder.add(s)},a.prototype.ondecoded=function(s){this.emit("packet",s)},a.prototype.onerror=function(s){l("error",s),this.emitAll("error",s)},a.prototype.socket=function(s,f){var h=this.nsps[s];if(!h){h=new t(this,s,f),this.nsps[s]=h;var p=this;h.on("connecting",v),h.on("connect",function(){h.id=p.generateId(s)}),this.autoConnect&&v()}function v(){~u(p.connecting,h)||p.connecting.push(h)}return h},a.prototype.destroy=function(s){var f=u(this.connecting,s);~f&&this.connecting.splice(f,1),!this.connecting.length&&this.close()},a.prototype.packet=function(s){l("writing packet %j",s);var f=this;s.query&&s.type===0&&(s.nsp+="?"+s.query),f.encoding?f.packetBuffer.push(s):(f.encoding=!0,this.encoder.encode(s,function(h){for(var p=0;p<h.length;p++)f.engine.write(h[p],s.options);f.encoding=!1,f.processPacketQueue()}))},a.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var s=this.packetBuffer.shift();this.packet(s)}},a.prototype.cleanup=function(){l("cleanup");for(var s=this.subs.length,f=0;f<s;f++){var h=this.subs.shift();h.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},a.prototype.close=a.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},a.prototype.onclose=function(s){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",s),this._reconnection&&!this.skipReconnect&&this.reconnect()},a.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var s=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var f=this.backoff.duration();l("will wait %dms before reconnect attempt",f),this.reconnecting=!0;var h=setTimeout(function(){s.skipReconnect||(l("attempting reconnect"),s.emitAll("reconnect_attempt",s.backoff.attempts),s.emitAll("reconnecting",s.backoff.attempts),!s.skipReconnect&&s.open(function(p){p?(l("reconnect attempt error"),s.reconnecting=!1,s.reconnect(),s.emitAll("reconnect_error",p.data)):(l("reconnect success"),s.onreconnect())}))},f);this.subs.push({destroy:function(){clearTimeout(h)}})}},a.prototype.onreconnect=function(){var s=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",s)},Qs}var pc;function pp(){return pc||(pc=1,function(e,t){var n=Gh(),r=fo(),i=hc(),o=Xr()("socket.io-client");e.exports=t=u;var l=t.managers={};function u(d,c){typeof d=="object"&&(c=d,d=void 0),c=c||{};var a=n(d),s=a.source,f=a.id,h=a.path,p=l[f]&&h in l[f].nsps,v=c.forceNew||c["force new connection"]||c.multiplex===!1||p,g;return v?(o("ignoring socket cache for %s",s),g=i(s,c)):(l[f]||(o("new io instance for %s",s),l[f]=i(s,c)),g=l[f]),a.query&&!c.query&&(c.query=a.query),g.socket(a.path,c)}t.protocol=r.protocol,t.connect=u,t.Manager=hc(),t.Socket=bl()}(tr,tr.exports)),tr.exports}var Ot={};function gp(e,t){return t=t||{},new Promise(function(n,r){var i=new XMLHttpRequest,o=[],l=[],u={},d=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:d,headers:{keys:function(){return o},entries:function(){return l},get:function(a){return u[a.toLowerCase()]},has:function(a){return a.toLowerCase()in u}}}};for(var c in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(a,s,f){o.push(s=s.toLowerCase()),l.push([s,f]),u[s]=u[s]?u[s]+","+f:f}),n(d())},i.onerror=r,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(c,t.headers[c]);i.send(t.body||null)})}const vp=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"})),gc=rl(vp);var ei,vc;function mp(){return vc||(vc=1,ei=self.fetch||(self.fetch=gc.default||gc)),ei}var mc;function yp(){if(mc)return Ot;mc=1;var e=Ot&&Ot.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.fetchBalancerConfig=void 0;var t=an(),n=e(mp()),r=function(i){return(0,t.debug)("using balancer ".concat(i," to get websocket url")),(0,n.default)("".concat(i)).then(function(o){return o.json()}).then(function(o){return o!=null&&o.url&&(o!=null&&o.token)?((0,t.debug)("balancer returns url ".concat(o==null?void 0:o.url," and token ").concat(o==null?void 0:o.token)),o):((0,t.debug)("balancer returns invalid response"),null)}).catch(function(o){return(0,t.debug)("failed to resolve url: ".concat(o.message)),null})};return Ot.fetchBalancerConfig=r,Ot}var je={},yc;function bp(){if(yc)return je;yc=1;var e=je&&je.__extends||function(){var l=function(u,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(c[s]=a[s])},l(u,d)};return function(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(u,d);function c(){this.constructor=u}u.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),t=je&&je.__spreadArray||function(l,u,d){if(d||arguments.length===2)for(var c=0,a=u.length,s;c<a;c++)(s||!(c in u))&&(s||(s=Array.prototype.slice.call(u,0,c)),s[c]=u[c]);return l.concat(s||Array.prototype.slice.call(u))},n=je&&je.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(je,"__esModule",{value:!0}),je.SocketMock=void 0;var r=an(),i=n(ul()),o=function(l){e(u,l);function u(d){var c=l.call(this)||this;return c.options=d,c.id="mock",c.connected=!1,c.disconnected=!0,c.binaryType="blob",c}return u.prototype.open=function(){var d=this;return(0,r.debug)("SocketIOMock: connect"),this.once("visitor.connect",function(c,a){a(null,d.options.connectData)}),this.connected=!0,this.disconnected=!1,this.emit("connect"),this},u.prototype.close=function(){return(0,r.debug)("SocketIOMock: disconnect"),this.connected=!1,this.disconnected=!1,this.emit("disconnect","io client disconnect"),this},u.prototype.emit=function(d){for(var c=[],a=1;a<arguments.length;a++)c[a-1]=arguments[a];return r.debug.apply(void 0,t(["SocketIOMock: emit"],c,!1)),(d==="connect"||d==="disconnect"||d==="visitor.connect")&&l.prototype.emit.apply(this,t([d],c,!1)),this},u.prototype.send=function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];return this.emit(event,d)},u.prototype.compress=function(){return this},u.prototype.connect=function(){return this.open()},u.prototype.disconnect=function(){return this.close()},u.prototype.hasListeners=function(d){return this.listenerCount(d)===0},u.prototype.addEventListener=function(d,c){return this.addListener(d,c),this},u.prototype.removeEventListener=function(d,c){return this.removeListener(d,c),this},u}(i.default);return je.SocketMock=o,je}var bc;function _l(){return bc||(bc=1,function(e){var t=pe&&pe.__assign||function(){return t=Object.assign||function(p){for(var v,g=1,m=arguments.length;g<m;g++){v=arguments[g];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(p[y]=v[y])}return p},t.apply(this,arguments)},n=pe&&pe.__createBinding||(Object.create?function(p,v,g,m){m===void 0&&(m=g);var y=Object.getOwnPropertyDescriptor(v,g);(!y||("get"in y?!v.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return v[g]}}),Object.defineProperty(p,m,y)}:function(p,v,g,m){m===void 0&&(m=g),p[m]=v[g]}),r=pe&&pe.__exportStar||function(p,v){for(var g in p)g!=="default"&&!Object.prototype.hasOwnProperty.call(v,g)&&n(v,p,g)},i=pe&&pe.__awaiter||function(p,v,g,m){function y(b){return b instanceof g?b:new g(function(_){_(b)})}return new(g||(g=Promise))(function(b,_){function C(F){try{w(m.next(F))}catch(S){_(S)}}function A(F){try{w(m.throw(F))}catch(S){_(S)}}function w(F){F.done?b(F.value):y(F.value).then(C,A)}w((m=m.apply(p,v||[])).next())})},o=pe&&pe.__generator||function(p,v){var g={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},m,y,b,_;return _={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function C(w){return function(F){return A([w,F])}}function A(w){if(m)throw new TypeError("Generator is already executing.");for(;_&&(_=0,w[0]&&(g=0)),g;)try{if(m=1,y&&(b=w[0]&2?y.return:w[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,w[1])).done)return b;switch(y=0,b&&(w=[w[0]&2,b.value]),w[0]){case 0:case 1:b=w;break;case 4:return g.label++,{value:w[1],done:!1};case 5:g.label++,y=w[1],w=[0];continue;case 7:w=g.ops.pop(),g.trys.pop();continue;default:if(b=g.trys,!(b=b.length>0&&b[b.length-1])&&(w[0]===6||w[0]===2)){g=0;continue}if(w[0]===3&&(!b||w[1]>b[0]&&w[1]<b[3])){g.label=w[1];break}if(w[0]===6&&g.label<b[1]){g.label=b[1],b=w;break}if(b&&g.label<b[2]){g.label=b[2],g.ops.push(w);break}b[2]&&g.ops.pop(),g.trys.pop();continue}w=v.call(p,g)}catch(F){w=[6,F],y=0}finally{m=b=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},l=pe&&pe.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.SocketError=void 0;var u=an(),d=l(ul()),c=l(pp()),a=yp(),s={transports:["websocket"],path:"/socket",reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:Number.POSITIVE_INFINITY},f=function(){function p(v){this.options=v,this.initialized=!1,this.forceReconnect=!1,this.identity=null,this.connection=null,this.connectCallback=null,this.disconnectCallback=null,this.initData=null,this.internalReconnection=!1,this.internalReconnecting=!1,this.internalReconnectingAttempt=0,this.emitter=new d.default,this.sendBuffer=[],this.options.options=t(t(t({},s),this.options.options),{autoConnect:!1})}return p.prototype.initConnection=function(){return i(this,void 0,void 0,function(){var v;return o(this,function(g){switch(g.label){case 0:if(this.connection)throw new Error("Connection already exists");return this.options.socket?((0,u.debug)("using socket ".concat(this.options.socket.id)),this.internalReconnection=!1,this.setConnection(this.options.socket),[3,4]):[3,1];case 1:return this.options.balancerUrl?[4,(0,a.fetchBalancerConfig)(this.options.balancerUrl)]:[3,3];case 2:return v=g.sent(),(0,u.debug)("creating socket to ".concat(v.url," with token ").concat(v.token)),this.internalReconnection=!0,this.setConnection((0,c.default)(v.url,t(t({},this.options.options),{autoConnect:!1,reconnection:!1,query:{token:v.token}})),!0),[3,4];case 3:if(this.options.url)(0,u.debug)("creating socket to ".concat(this.options.url)),this.internalReconnection=!1,this.setConnection((0,c.default)(this.options.url,t(t({},this.options.options),{autoConnect:!1})));else throw new Error("Missing required parameter url");g.label=4;case 4:return[2]}})})},p.prototype.setConnection=function(v,g){var m=this;g===void 0&&(g=!1),this.connection=v,this.forceReconnect=!1,this.internalReconnection=g,v.on("connect_error",function(y){m.internalReconnection&&(m.connectCallback=null,(0,u.debug)("connection was not reconnected"),m.emitter.emit("reconnect_error",y),m.options.options.reconnectionAttempts>m.internalReconnectingAttempt+1?m.reconnect(m.internalReconnectingAttempt+1):m.emitter.emit("reconnect_failed",m.internalReconnectingAttempt))}),v.on("connect",function(){(0,u.debug)("socket was connected"),m.initialized=!1,m.internalReconnecting?((0,u.debug)("connection is reconnected"),m.emitter.emit("reconnect"),m.internalReconnecting=!1,m.internalReconnectingAttempt=0):m.emitter.emit("connect"),m.initialize().then(function(y){return(0,u.debug)("socket was initialized"),m.onInitialized(y),m.connectCallback&&(m.connectCallback(null,y),m.connectCallback=null),y}).catch(function(y){(0,u.debug)("socket was not initialized ",t({},y)),m.onInitializeError(y),m.connectCallback&&(m.connectCallback(y),m.connectCallback=null)})}),v.on("disconnect",function(y){(0,u.debug)("socket was disconnected reason='".concat(y,"'")),m.initialized=!1,(!m.internalReconnecting||m.internalReconnectingAttempt===1)&&setTimeout(function(){m.emitter.emit("disconnect",y),m.disconnectCallback&&(m.disconnectCallback(),m.disconnectCallback=null)},100),m.options.options.reconnection&&m.internalReconnection&&!m.internalReconnecting&&(m.forceReconnect||y!=="io server disconnect")&&m.reconnect()}),v.on("reconnecting",function(y){m.emitter.emit("reconnecting",y)}),v.on("reconnect",function(){m.emitter.emit("reconnect")}),v.on("reconnect_attempt",function(y){m.emitter.emit("reconnect_attempt",y)}),v.on("reconnect_error",function(y){m.emitter.emit("reconnect_error",y)}),v.on("reconnect_failed",function(){m.emitter.emit("reconnect_failed")}),v.on("force_reconnect",function(){(0,u.debug)("received event force_reconnect, setting flag forceReconnect = true"),m.forceReconnect=!0})},p.prototype.getConnection=function(){return this.connection},p.prototype.isConnected=function(){var v;return((v=this.connection)===null||v===void 0?void 0:v.connected)||!1},p.prototype.isInitialized=function(){return this.initialized},p.prototype.getInitData=function(){return this.initData},p.prototype.connect=function(){return i(this,void 0,void 0,function(){var v=this;return o(this,function(g){switch(g.label){case 0:return this.connection?[3,2]:[4,this.initConnection()];case 1:g.sent(),g.label=2;case 2:return[2,new Promise(function(m,y){v.initialized?m(v.initData):((0,u.debug)("starting connecting"),v.connectCallback=(0,u.createCallback)(m,y),v.connection.open())})]}})})},p.prototype.disconnect=function(){var v=this;return new Promise(function(g,m){!v.connection||v.connection.disconnected?(v.connection=null,g()):((0,u.debug)("starting disconnecting"),v.disconnectCallback=(0,u.createCallback)(g,m),v.connection.close(),v.connection=null)})},p.prototype.reconnect=function(v){var g=this;return v===void 0&&(v=1),this.internalReconnecting=!0,this.internalReconnectingAttempt=v,this.disconnect().then(function(){var m=Math.floor(Math.random()*(g.options.options.reconnectionDelayMax-g.options.options.reconnectionDelay)+g.options.options.reconnectionDelay);return(0,u.debug)("connection will reconnect in ".concat(m,"ms")),g.emitter.emit("reconnecting",v),new Promise(function(y){setTimeout(y,m)})}).then(function(){return(0,u.debug)("connection is starting reconnect"),g.emitter.emit("reconnect_attempt",v),g.connect()})},p.prototype.initialize=function(){return new Promise(function(v){v({})})},p.prototype.onInitialized=function(v){var g=this;this.initialized||(this.initialized=!0,this.initData=v,(0,u.debug)("emit initialized"),this.emitter.emit("initialized",v),setTimeout(function(){if(g.sendBuffer.length>0){(0,u.debug)("sending buffered ".concat(g.sendBuffer.length," events"));for(var m=0;m<g.sendBuffer.length;m++){var y=g.sendBuffer[m];g.connection.emit(y.name,y.data,y.callback)}g.sendBuffer=[]}},1))},p.prototype.onInitializeError=function(v){this.disconnect(),(0,u.debug)("emit initialize_error",t({},v)),this.emitter.emit("initialize_error",v)},p.prototype.send=function(v,g,m){this.initialized?this.connection.emit(v,g,m):this.sendBuffer.push({name:v,data:g,callback:m})},p.prototype.on=function(v,g){return this.emitter.on(v,g),this},p.prototype.once=function(v,g){return this.emitter.once(v,g),this},p.prototype.removeAllListeners=function(){for(var v,g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];return(v=this.emitter).removeAllListeners.apply(v,g),this},p}();e.default=f;var h=an();Object.defineProperty(e,"SocketError",{enumerable:!0,get:function(){return h.SocketError}}),r(bp(),e)}(pe)),pe}var _c;function wc(){return _c||(_c=1,function(e){var t=Se&&Se.__extends||function(){var c=function(a,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(f[p]=h[p])},c(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");c(a,s);function f(){this.constructor=a}a.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),n=Se&&Se.__assign||function(){return n=Object.assign||function(c){for(var a,s=1,f=arguments.length;s<f;s++){a=arguments[s];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(c[h]=a[h])}return c},n.apply(this,arguments)},r=Se&&Se.__awaiter||function(c,a,s,f){function h(p){return p instanceof s?p:new s(function(v){v(p)})}return new(s||(s=Promise))(function(p,v){function g(b){try{y(f.next(b))}catch(_){v(_)}}function m(b){try{y(f.throw(b))}catch(_){v(_)}}function y(b){b.done?p(b.value):h(b.value).then(g,m)}y((f=f.apply(c,a||[])).next())})},i=Se&&Se.__generator||function(c,a){var s={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},f,h,p,v;return v={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function g(y){return function(b){return m([y,b])}}function m(y){if(f)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(s=0)),s;)try{if(f=1,h&&(p=y[0]&2?h.return:y[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,y[1])).done)return p;switch(h=0,p&&(y=[y[0]&2,p.value]),y[0]){case 0:case 1:p=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,h=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(p=s.trys,!(p=p.length>0&&p[p.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!p||y[1]>p[0]&&y[1]<p[3])){s.label=y[1];break}if(y[0]===6&&s.label<p[1]){s.label=p[1],p=y;break}if(p&&s.label<p[2]){s.label=p[2],s.ops.push(y);break}p[2]&&s.ops.pop(),s.trys.pop();continue}y=a.call(c,s)}catch(b){y=[6,b],h=0}finally{f=p=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},o=Se&&Se.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebsocketVisitorClient=void 0;var l=o(_l()),u=an(),d=function(c){t(a,c);function a(s){var f=c.call(this,s.connection)||this;return f.serverVersion=null,f.updatedValues={},f.connectData=s.data,f.identity=null,f}return a.prototype.setConnection=function(s){c.prototype.setConnection.call(this,s),s.on("server.error",(0,u.bound)(this,"onServerError")),s.on("account.updated",(0,u.createEmitter)(this.emitter,"account.updated")),s.on("agent.updated",(0,u.createEmitter)(this.emitter,"agent.updated")),s.on("agent.status_updated",(0,u.createEmitter)(this.emitter,"agent.status_updated")),s.on("agent.removed",(0,u.createEmitter)(this.emitter,"agent.removed")),s.on("visitor.updated",(0,u.bound)(this,"onVisitorUpdated")),s.on("chat.updated",(0,u.createEmitter)(this.emitter,"chat.updated")),s.on("chat.agent_joined",(0,u.createEmitter)(this.emitter,"chat.agent_joined")),s.on("chat.agent_assigned",(0,u.createEmitter)(this.emitter,"chat.agent_assigned")),s.on("chat.agent_unassigned",(0,u.createEmitter)(this.emitter,"chat.agent_unassigned")),s.on("chat.agent_left",(0,u.createEmitter)(this.emitter,"chat.agent_left")),s.on("chat.opened",(0,u.createEmitter)(this.emitter,"chat.opened")),s.on("chat.served",(0,u.createEmitter)(this.emitter,"chat.served")),s.on("chat.closed",(0,u.createEmitter)(this.emitter,"chat.closed")),s.on("chat.visitor_closed",(0,u.createEmitter)(this.emitter,"chat.visitor_closed")),s.on("chat.message_received",(0,u.createEmitter)(this.emitter,"chat.message_received")),s.on("chat.message_updated",(0,u.createEmitter)(this.emitter,"chat.message_updated")),s.on("chat.message_deleted",(0,u.createEmitter)(this.emitter,"chat.message_deleted")),s.on("chat.agent_typing",(0,u.createEmitter)(this.emitter,"chat.agent_typing")),s.on("chat.rated",(0,u.createEmitter)(this.emitter,"chat.rated")),s.on("chat.rating_cancelled",(0,u.createEmitter)(this.emitter,"chat.rating_cancelled")),s.on("chat.rating_suggested",(0,u.createEmitter)(this.emitter,"chat.rating_suggested")),s.on("chat.contact_read",(0,u.createEmitter)(this.emitter,"chat.contact_read")),s.on("chat.deleted",(0,u.createEmitter)(this.emitter,"chat.deleted")),s.on("chat.ticket_form_finish",(0,u.createEmitter)(this.emitter,"chat.ticket_form_finish")),s.on("chat.transcript_pdf",(0,u.createEmitter)(this.emitter,"chat.transcript_pdf")),s.on("contact.acquired",(0,u.createEmitter)(this.emitter,"contact.acquired")),s.on("identity.status_updated",(0,u.createEmitter)(this.emitter,"identity.status_updated"))},a.prototype.on=function(s,f){return this.emitter.on(s,f),this},a.prototype.once=function(s,f){return this.emitter.once(s,f),this},a.prototype.getId=function(){return this.identity?this.identity.id:null},a.prototype.getIdentity=function(){return this.identity},a.prototype.connect=function(){return c.prototype.connect.call(this)},a.prototype.disconnect=function(s){return s===void 0&&(s=!1),r(this,void 0,void 0,function(){var f=this;return i(this,function(h){switch(h.label){case 0:return s?[4,new Promise(function(p,v){f.send("visitor.logout",{},(0,u.createCallback)(p,v))})]:[3,2];case 1:h.sent(),h.label=2;case 2:return[2,c.prototype.disconnect.call(this)]}})})},a.prototype.update=function(s){s===void 0&&(s={}),this.checkServerVersion();for(var f in s)this.identity[f]=s[f],this.updatedValues[f]=s[f];this.saveVisitorValues()},a.prototype.authenticate=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("visitor.authenticate",{values:s},(0,u.createCallback)(h,p))})},a.prototype.notify=function(s,f){var h=this;return f===void 0&&(f=null),this.checkServerVersion(),new Promise(function(p,v){h.send("visitor.notify",{name:s,value:f},(0,u.createCallback)(p,v))})},a.prototype.chatRead=function(){this.checkServerVersion(),this.send("chat.read",null)},a.prototype.chatTyping=function(s,f){f===void 0&&(f=null),this.checkServerVersion(),this.send("chat.typing",{typing:{is:s,text:f}})},a.prototype.chatMessage=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.message",s,(0,u.createCallback)(h,p))})},a.prototype.chatClose=function(s){s===void 0&&(s=null),this.checkServerVersion(),this.send("chat.close",{type:s})},a.prototype.chatUploadInit=function(){var s=this;return this.checkServerVersion(),new Promise(function(f,h){s.send("chat.upload_init",null,(0,u.createCallback)(f,h))})},a.prototype.chatUploadFinish=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.upload_finish",{uploadToken:s},(0,u.createCallback)(h,p))})},a.prototype.chatTranscript=function(s,f){var h=this;return this.checkServerVersion(),new Promise(function(p,v){h.send("chat.transcript",{email:s,lang:f},(0,u.createCallback)(p,v))})},a.prototype.chatTicketFormFinish=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.ticket_form_finish",s,(0,u.createCallback)(h,p))})},a.prototype.chatRateInit=function(){var s=this;return this.checkServerVersion(),new Promise(function(f,h){s.send("chat.rate_init",null,(0,u.createCallback)(f,h))})},a.prototype.chatRate=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.rate",s,(0,u.createCallback)(h,p))})},a.prototype.chatTranscriptPdf=function(){var s=this;return this.checkServerVersion(),new Promise(function(f,h){s.send("chat.transcript_pdf",null,(0,u.createCallback)(f,h))})},a.prototype.linkOpened=function(s){var f=this;return this.checkServerVersion(),new Promise(function(h,p){f.send("chat.link_opened",s,(0,u.createCallback)(h,p))})},a.prototype.visitorConnect=function(){var s=this,f=n({version:a.CLIENT_VERSION},this.connectData);for(var h in this.updatedValues)f[h]=this.updatedValues[h];if(this.updatedValues={},this.identity)for(var h in this.identity)["bannedAt","chatId","status"].includes(h)||(f[h]=this.identity[h]);return this.emitter.emit("initialize",f),new Promise(function(p,v){s.connection.emit("visitor.connect",f,(0,u.createCallback)(p,v))})},a.prototype.visitorDisconnect=function(){var s=this;return new Promise(function(f,h){s.connection.emit("visitor.disconnect",{},(0,u.createCallback)(f,h))})},a.prototype.onVisitorUpdated=function(s){var f={};for(var h in s.changes)a.identityProperties.includes(h)&&(this.identity&&(this.identity[h]=s.changes[h]),f[h]=s.changes[h]);Object.getOwnPropertyNames(f).length>0&&this.emitter.emit("visitor.updated",f)},a.prototype.onServerError=function(s){var f=(0,u.createSocketError)(s);this.emitter.emit("error",f)},a.prototype.initialize=function(){var s=this;return this.visitorConnect().then(function(f){return s.serverVersion=f.serverVersion,s.identity=n(n({},f.visitor),{variables:n({},f.visitor.variables)}),f})},a.prototype.saveVisitorValues=function(){var s=this;this.initialized&&setTimeout(function(){if(!(!s.initialized||Object.getOwnPropertyNames(s.updatedValues).length===0)){var f={};for(var h in s.updatedValues)f[h]=s.updatedValues[h];s.send("visitor.update",{values:f}),s.updatedValues={}}},1)},a.prototype.checkServerVersion=function(){if(this.serverVersion===null)throw new Error("Client not yet connected to server")},a.CLIENT_VERSION=6,a.identityProperties=["id","name","email","phone","chatId","variables","lang","group","bannedAt","triggerable","visits","gdprApproved"],a}(l.default);e.WebsocketVisitorClient=d,function(c){(function(a){a.WidgetOpen="widget_open",a.WidgetShow="widget_show",a.VisitorActive="visitor_active",a.VisitorInactive="visitor_inactive"})(c.EventName||(c.EventName={}))}(d=e.WebsocketVisitorClient||(e.WebsocketVisitorClient={})),e.WebsocketVisitorClient=d}(Se)),Se}var ti={},Cc;function _p(){return Cc||(Cc=1,Object.defineProperty(ti,"__esModule",{value:!0})),ti}var ni={},Ac;function wp(){return Ac||(Ac=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RatingTarget=void 0,function(t){t.Agent="agent",t.Ai="ai"}(e.RatingTarget||(e.RatingTarget={}))}(ni)),ni}var Y={},Ec;function Cp(){return Ec||(Ec=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.MessageDeliveryFailReason=Y.MessageDeliveryStatus=Y.AgentDevicePlatform=Y.AgentDeviceType=Y.VisitorStatus=Y.ChatReadInfoType=Y.ChatStatus=Y.AgentStatus=Y.AccountStatus=void 0,Y.AccountStatus={Online:"online",Offline:"offline",OfflineWithAI:"offlineWithAi"},Y.AgentStatus={Online:"online",Offline:"offline"},Y.ChatStatus={Pending:"pending",Open:"open",Closed:"closed",Served:"served"},Y.ChatReadInfoType={Agent:"agent",Contact:"contact"},Y.VisitorStatus={Active:"active",Clicked:"clicked",Idle:"idle",Served:"served",Unserved:"unserved",Triggered:"triggered"},Y.AgentDeviceType={Browser:"browser",Mobile:"mobile",Xmpp:"xmpp",Other:"other"},Y.AgentDevicePlatform={IOS:"ios",ANDROID:"android"},Y.MessageDeliveryStatus={Ok:"ok",PermanentFail:"permanent_fail",TemporaryFail:"temporary_fail",Complained:"complained",Seen:"seen"},Y.MessageDeliveryFailReason={Facebook24hWindow:"facebook.outside_allowed_window",WhatsappUnsupportedFile:"whatsapp.unsupported_file_type",WhatsappUnknown:"whatsapp.unknown"}),Y}var Fc;function Ap(){return Fc||(Fc=1,function(e){var t=Tt&&Tt.__createBinding||(Object.create?function(o,l,u,d){d===void 0&&(d=u);var c=Object.getOwnPropertyDescriptor(l,u);(!c||("get"in c?!l.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(o,d,c)}:function(o,l,u,d){d===void 0&&(d=u),o[d]=l[u]}),n=Tt&&Tt.__exportStar||function(o,l){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&t(l,o,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.SocketError=e.default=void 0;var r=wc();Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.WebsocketVisitorClient}}),n(wc(),e),n(_p(),e),n(wp(),e);var i=an();Object.defineProperty(e,"SocketError",{enumerable:!0,get:function(){return i.SocketError}}),n(Cp(),e)}(Tt)),Tt}var re=Ap();const mo=nl(re),yo=O(null),Ep=O(!1),bo=O([]),Fp=e=>{bo.update(t=>[...t,e])},Sp=()=>{let e;return bo.update(t=>(e=t.pop(),t)),e??null},kp=()=>E(bo).length===0,YC=M(yo,e=>e!==null),_o=(e,{useStack:t=!1}={})=>{yo.update(n=>(t&&n&&Fp(n),Ep.set(n!==null),e))},wl=()=>{let e=null;kp()||(e=Sp()),yo.set(e)};var Jr=(e=>(e[e.Options=0]="Options",e[e.GdprAndPrivacy=1]="GdprAndPrivacy",e[e.AuthForm=2]="AuthForm",e[e.CloseChat=3]="CloseChat",e[e.ChatRating=4]="ChatRating",e[e.TicketForm=5]="TicketForm",e))(Jr||{});const JC=500,QC=1e3,e1=Symbol("contentListItem"),t1=Symbol("contentMessageAttachment"),n1="-replies",xp=.35,Tp=5e3;var Mt={},ri={},Sc;function Op(){return Sc||(Sc=1,Object.defineProperty(ri,"__esModule",{value:!0})),ri}var _n={},kc;function Mp(){return kc||(kc=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.CardsLayout=void 0,_n.CardsLayout={Grid:"grid",Carousel:"carousel"}),_n}var si={},xc;function Dp(){return xc||(xc=1,Object.defineProperty(si,"__esModule",{value:!0})),si}var ii={},Tc;function Rp(){return Tc||(Tc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RatingTarget=e.GroupType=e.ChannelType=e.MessageSubType=e.MessageType=e.AttachmentInvalidReason=e.AttachmentType=e.MessageActionType=void 0,e.MessageActionType={Text:"text",OpenUrl:"open_url"},e.AttachmentType={Card:"card",Cards:"cards",File:"file",Image:"image",Media:"media",Invalid:"invalid"},e.AttachmentInvalidReason={InvalidSize:"invalid_size",InvalidType:"invalid_type"},e.MessageType={Message:"message",Event:"event",Help:"help"},e.MessageSubType={Agent:"agent",Contact:"contact",Trigger:"trigger",Bot:"bot",System:"system",AgentExternal:"agent_external",FoundEmail:"found_email",ChatResolve:"chat_resolve"},e.ChannelType={Default:"default",Email:"email",EmailIntegration:"email_integration",FacebookMessenger:"facebook_messenger",Gmail:"gmail",Smartsupp:"smartsupp",Whatsapp:"whatsapp"},function(t){t.ai="ai",t.chatbot="chatbot",t.message="message"}(e.GroupType||(e.GroupType={})),function(t){t.Agent="agent",t.Ai="ai"}(e.RatingTarget||(e.RatingTarget={}))}(ii)),ii}var oi={},Oc;function Bp(){return Oc||(Oc=1,Object.defineProperty(oi,"__esModule",{value:!0})),oi}var ai={},Mc;function Ip(){return Mc||(Mc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageContentType=e.MessageContent=void 0;var t;(function(n){(function(r){r.Type={Text:"text",Upload:"upload",RateForm:"rate_form",TicketForm:"ticket_form"}})(n.Message||(n.Message={})),function(r){r.Type={AgentJoin:"agent_join",AgentAssign:"agent_assign",AgentUnassign:"agent_unassign",AgentLeave:"agent_leave",ChatClose:"chat_close",ChatVisitorClose:"chat_visitor_close"}}(n.Event||(n.Event={})),function(r){r.Type={Text:"text",FoundEmail:"found_email"}}(n.Help||(n.Help={}))})(t=e.MessageContent||(e.MessageContent={})),e.MessageContentType={...t.Message.Type,...t.Event.Type,...t.Help.Type}}(ai)),ai}var ci={},Dc;function Pp(){return Dc||(Dc=1,Object.defineProperty(ci,"__esModule",{value:!0})),ci}var Rc;function Lp(){return Rc||(Rc=1,function(e){var t=Mt&&Mt.__createBinding||(Object.create?function(r,i,o,l){l===void 0&&(l=o);var u=Object.getOwnPropertyDescriptor(i,o);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,l,u)}:function(r,i,o,l){l===void 0&&(l=o),r[l]=i[o]}),n=Mt&&Mt.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Op(),e),n(Mp(),e),n(Dp(),e),n(Rp(),e),n(Bp(),e),n(Ip(),e),n(Pp(),e)}(Mt)),Mt}var T=Lp();const $p="default",Qr=(e,t)=>{const n={};for(const r of t){const i=String(r[e]);n[i]=r}return n},Np=()=>{const e=O({}),{subscribe:t,set:n}=e;return{subscribe:t,setGroups:i=>{n(Qr("key",i))}}},wo=Np(),Cl=M([wo],([e])=>Object.values(e));var qp=_l();const Ee={authFormDrawer:"authFormDrawer",authFormPrivacyNotice:"authFormPrivacyNotice",authFormPrivacyNoticeSwitch:"authFormPrivacyNoticeSwitch",authFormSubmitButton:"authFormSubmitButton",avatarAgent:"avatarAgent",avatarBot:"avatarBot",avatarGroup:"avatarGroup",avatarInfo:"avatarInfo",buttonAttachment:"buttonAttachment",buttonCloseChat:"buttonCloseChat",buttonCloseDrawer:"buttonCloseDrawer",buttonCollapseChat:"buttonCollapseChat",buttonEmoji:"buttonEmoji",buttonExpandChat:"buttonExpandChat",buttonMinimizeChat:"buttonMinimizeChat",buttonOptions:"buttonOptions",buttonSend:"buttonSend",chatRatingDrawer:"chatRatingDrawer",chatRatingEmojiButton:"chatRatingEmoji",chatRatingSendButton:"chatRatingSendButton",chatRatingTextarea:"chatRatingTextarea",chatRatingFeedbackButton:"chatRatingFeedbackButton",chatRatingButtonAi:"chatRatingButtonAi",chatRatingButtonAgent:"chatRatingButtonAgent",closeChatConfirmButton:"closeChatConfirmButton",closeChatDeclineButton:"closeChatDeclineButton",closeChatDrawer:"closeChatDrawer",flashMessage:"flashMessage",gdprDrawer:"gdprDrawer",headerTitle:"headerTitle",headerStatus:"headerStatus",headerBadge:"headerBadge",messageAttachment:"messageAttachment",messageAgent:"messageAgent",messageBot:"messageBot",messageBotReply:"messageBotReply",messageBotBack:"messageBotBack",messageContact:"messageContact",messageFile:"messageFile",messageGroup:"messageGroup",messageImage:"messageImage",optionsAccessibility:"optionsAccessibility",optionsDrawer:"optionsDrawer",optionsPrivacyNotice:"optionsPrivacyNotice",optionsSounds:"optionsSounds",optionsTranscript:"optionsTranscript",popup:"popup",popupMessage:"popupMessage",popupButton:"popupButton",popupButtonClose:"popupButtonClose",productCard:"productCard",productCardArrowLeft:"productCardArrowLeft",productCardArrowRight:"productCardArrowRight",productCardButton:"productCardButton",productCardCarousel:"productCardCarousel",productCardDescription:"productCardDescription",productCardImage:"productCardImage",productCardInfo:"productCardInfo",productCardTitle:"productCardTitle",systemMessage:"systemMessage",textarea:"textarea",textareaPreviewFile:"textareaPreviewFile",textareaPreviewImage:"textareaPreviewImage",ticketFormDrawer:"ticketFormDrawer",ticketFormSubmitButton:"ticketFormSubmitButton",widgetButton:"widgetButton",widgetButtonFrame:"widgetButtonFrame",widgetButtonText:"widgetButtontext",widgetImagePreview:"widgetImagePreview",widgetMessenger:"widgetMessenger",widgetMessengerFrame:"widgetMessengerFrame",widgetOnlineBadge:"widgetOnlineBadge",widgetPopupFrame:"widgetPopupFrame",widgetTypingFrame:"widgetTypingFrame",widgetUnreadMessagesBadge:"widgetUnreadMessagesBadge",widgetHeader:"widgetHeader"},r1="https://www.smartsupp.com",s1="/powered-by-smartsupp",i1=["cs","es","fr","hu","it","de","nl","pl"],zp="3.0",o1="https://www.smartsupp.com/my-data-and-gdpr",Co=O(!1),Bc=il(z.SessionId,""),jp=()=>{const{protocol:e,host:t}=x.getOptions();return`${e==="http"?"http":"https"}://${t}`},Up=async()=>{const{mobileSdk:e,visitorId:t}=x.getOptions();if(e&&t)return t;try{return await xh()}catch(n){return X(String(n)),null}},Vp=(e,t)=>{let n=mr().location.href;return e&&t&&(n=`${n}${n.includes("?")?"&":"?"}ss-bot-run=${t}`),n},Al=()=>{H.clearMessages(),Xv(),At.clearAssignedAgentIds(),vh(),hh(z.VisitorId)},Hp=async e=>{try{await Th(e),kh()}catch(t){X(String(t))}},Gp=async(e=!1)=>{const{key:t,lang:n,isPreviewMode:r,previewWithoutReset:i,sitePlatform:o,triggerable:l,_chatMaxReopenTime:u,botId:d}=x.getOptions();(r&&!i||e)&&Al();const c=await Up(),a=E(Vo);return{key:t,id:c,isPreviewMode:r,sitePlatform:o,triggerable:l,_chatMaxReopenTime:u,name:a.name,email:a.email,phone:a.phone,group:a.group,lang:a.lang??n,variables:a.variables,widgetVersion:zp,visits:Oh(),isWidgetVisible:E(Ft),isWidgetOpen:E(be),pageUrl:Vp(r,d),pageTitle:mr().document.title,domain:mr().location.hostname||"unknown",referer:mr().document.referrer,bundleVersion:"73644401c98550ba9806f9c0e2fde5d850f3fe71"}},Wp=(e,t)=>{const{isPreviewMode:n}=x.getOptions();!e&&t!==E(Bc)&&!n&&(Al(),E(be)&&be.set(!1)),Bc.set(t)},Kp=()=>{const e=O(),{subscribe:t,set:n}=e;return{subscribe:t,initialize:i=>n(i)}},Ao=Kp(),En=5,Xp="FILE",a1=2e3,c1=e=>e.split("/")[0]==="image",u1=e=>!!e.match(/^video\/(?:mp4|webm|ogg){1}$/);async function Zp(e){if(!FileReader)return Ke("FileReader not supported"),null;const t=new FileReader;return new Promise(n=>{t.onload=()=>{if(!t.result){n(null);return}let r;typeof t.result=="string"?r=t.result:r=String(t.result),r.startsWith("data:image")||(r=null),n(r)},t.onerror=()=>{Ke("Failed to load image data"),n(null)},t.readAsDataURL(e)})}async function Yp(e){return new Promise(t=>{const n=document.createElement("img");n.onload=()=>{t({width:n.width,height:n.height})},n.onerror=()=>{Ke("Failed to obtain image dimensions"),t(null)},n.src=e})}function Jp(e){return{horizontal:e.width>e.height,vertical:e.height>e.width}}const Qp="ar",eg="az",tg="bg",ng="br",rg="bs",sg="ca",ig="cn",og="cs",ag="da",cg="de",ug="el",El="en",lg="es",fg="fa",dg="fi",hg="fil",pg="fr",gg="he",vg="hi",mg="hr",yg="hu",bg="is",_g="it",wg="ja",Cg="ka",Ag="lt",Eg="lv",Fg="mk",Sg="nl",kg="no",xg="pl",Tg="pt",Og="ro",Mg="ru",Dg="sk",Rg="sl",Bg="sr",Ig="sv",Pg="th",Lg="tr",$g="tw",Ng="uk",Fl=El,qg=[Qp,eg,tg,ng,rg,sg,ig,og,ag,cg,ug,El,lg,fg,dg,hg,pg,gg,vg,mg,yg,bg,_g,wg,Cg,Ag,Eg,Fg,Sg,kg,xg,Tg,Og,Mg,Dg,Rg,Bg,Ig,Pg,Lg,$g,Ng];var Dt={},Ic;function zg(){if(Ic)return Dt;Ic=1;var e=Dt&&Dt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.FetchAdapter=void 0;const t=e(pl);class n{constructor(i){this.options={},this.options=i}async request(i,o,l,u,d){const c={...this.options,...d},a=u?"?"+t.default.stringify(u):"";try{const s=await fetch(`${c.baseURL||""}${o}${a}`,{method:i,body:l?JSON.stringify(l):null,...c});return{status:s.status,statusText:s.statusText,data:await s.json(),headers:[...s.headers.entries()].reduce((f,[h,p])=>(f[h]=p,f),{})}}catch(s){throw s.isOpenApiError=!0,s}}withOptions(i){return new n(i)}}return Dt.FetchAdapter=n,Dt}var jg=zg(),Rt={},Bt={},Pc;function Ug(){return Pc||(Pc=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.ProjectName=Bt.ErrorCode=void 0,Bt.ErrorCode={BadRequest:"bad_request",NotAllowed:"not_allowed",NotFound:"not_found",Forbidden:"forbidden",TooManyRequests:"too_many_requests",Unauthorized:"unauthorized",Unprocessable:"unprocessable"},Bt.ProjectName={Widget:"widget",Chatbot:"chatbot"}),Bt}var Zt={},It={},Lc;function Sl(){if(Lc)return It;Lc=1,Object.defineProperty(It,"__esModule",{value:!0}),It.TranslationsClientRaw=It.TranslationsClient=void 0;class e{constructor(i){this.adapter=i,this.raw=new t(this.adapter)}getDefaults(i,o,l){return this.adapter.request("get",`/${i}/translations/lang/${o}/defaults`,null,null,l).then(n)}}It.TranslationsClient=e;class t{constructor(i){this.adapter=i}getDefaults(i,o,l){return this.adapter.request("get",`/${i}/translations/lang/${o}/defaults`,null,null,l)}}It.TranslationsClientRaw=t;function n(r){return r.data}return It}var $c;function Nc(){if($c)return Zt;$c=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.SmartsuppTranslationsClientApi=void 0;const e=Sl();class t{constructor(r){this.adapter=r,this.translations=new e.TranslationsClient(r)}withOptions(r){return new t(this.adapter.withOptions(r))}}return Zt.SmartsuppTranslationsClientApi=t,Zt.default=t,Zt}var qc;function Vg(){return qc||(qc=1,function(e){var t=Rt&&Rt.__createBinding||(Object.create?function(i,o,l,u){u===void 0&&(u=l);var d=Object.getOwnPropertyDescriptor(o,l);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,u,d)}:function(i,o,l,u){u===void 0&&(u=l),i[u]=o[l]}),n=Rt&&Rt.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&t(o,i,l)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ug(),e),n(Nc(),e),n(Sl(),e);const r=Nc();e.default=r.SmartsuppTranslationsClientApi}(Rt)),Rt}var kl=Vg();const xl=e=>qg.includes(e),Hg=e=>xl(e)?e:Fl,Gg=()=>{const{lang:e}=x.getOptions(),{lang:t}=E(Vo);return Hg(t??e)};function Wg(){return new kl.TranslationsClient(new jg.FetchAdapter({baseURL:`${x.getOptions().translationsBaseUrl}/api/v1`}))}const Kg=async e=>Wg().getDefaults(kl.ProjectName.Widget,e),Xg=(e,t)=>{const{translates:n}=x.getOptions();return{...e,...n[t]&&n[t]}},Un=O(Fl),un=O({}),Tl=async e=>{try{const t=await Kg(e),n=Xg(t,e);un.update(r=>({...r,[e]:n}))}catch{Ke(`Fetch translations of '${e}' language failed.`)}},Zg=async e=>{E(un)[e]||await Tl(e),Un.set(e)},Yg=async()=>{const e=Gg();Un.set(e),await Tl(e)},Jg=e=>{const t=E(Un),r={...E(un)[t],...e};un.update(i=>({...i,[t]:r}))},Qg=(e,t,n)=>{var l;const r=E(un),i=`|${t}|`;if(Object.keys(r).length===0)return i;let o=((l=r[e])==null?void 0:l[t])||i;return Object.keys(n).map(u=>{const d=new RegExp(`{${u}}`,"g");o=o.replace(d,n[u])}),o},oe=M([Un,un],([e])=>(t,n={})=>Qg(e,t,n)),ev=()=>{const e=O([]),{subscribe:t,update:n}=e,r=()=>E(e).map(g=>g.file),i=(g,m)=>(m||E(e)).find(y=>y.file.name===g)||null,o=g=>({file:g,preview:{},previewState:"none",uploadStatus:"none"}),l=g=>{const m=Array.isArray(g)?g:[g];n(y=>y.length+m.length>En?(jt(`${E(oe)("fileUpload.tooManyFiles")} ${En}`),y):[...y,...m.map(o)]),p(m)},u=g=>{n(m=>m.filter(y=>y.file!==g))},d=()=>E(e).length,c=()=>d()>=En,a=()=>e.set([]),s=()=>{e.update(g=>(g.forEach(m=>m.uploadStatus="in-progress"),g))},f=g=>{e.update(m=>{const y=i(g,m);return y&&(y.uploadStatus="done"),m})},h=g=>{var m;return((m=i(g.name))==null?void 0:m.previewState)!=="none"},p=g=>{g.forEach(m=>void v(m))},v=async g=>{if(h(g))return;const m=await Zp(g),y=m?await Yp(m):null,b=y?Jp(y):null;e.update(_=>{const C=i(g.name,_);return C?(C.previewState="ready",C.preview={data:m,dimensions:y,orientation:b},[..._]):_})};return{subscribe:t,getFiles:r,find:i,add:l,remove:u,count:d,isLimitReached:c,clear:a,setUploadingStatus:s,setFileUploaded:f}},$t=ev(),tv=()=>{const e=[];return Object.freeze({push:r=>{e.push(r)},executeAll:()=>{for(;e.length>0;){const r=e.shift();r&&r()}}})},Vn=tv(),nv=()=>{const{widgetV3Url:e}=x.getOptions();return`${e}/assets/images/default-ai-identity.webp`},rv=e=>({...e,avatarUrl:e.avatarUrl||nv()}),sv=()=>{const e=O({}),{update:t,subscribe:n,set:r}=e;return{subscribe:n,setIdentities:u=>{r(Qr("id",u.map(rv)))},addIdentity:u=>{t(d=>({...d,[u.id]:u}))},updateIdentity:(u,d)=>{t(c=>c[u]?{...c,[u]:{...c[u],...d}}:c)}}},Ol=sv(),iv=e=>{var n,r;Be("init data",e),Co.set(!0),Wp(e.chat,e.sessionId);const t=e.visitor.id;Hp(t),Mh(e.visitor.visits),Ye.setVisitorData(e.visitor),ih({vid:t}),Ao.initialize(e.fileUpload),Wr.set(e.browser),Ct.setAgents(e.account.agents),Ol.setIdentities(e.account.botIdentities),((n=e.chat)==null?void 0:n.virtualAgent)!==void 0&&Ct.setVirtualAgent((r=e.chat)==null?void 0:r.virtualAgent),wo.setGroups(e.account.groups),Il(e.account.status),e.chat&&(Gn()&&Mn.set(e.chat.ratingSuggestedTarget||null),Je.set(e.chat.status),gn(e.chat.isClosed),Hn.set(e.chat.unreadInfo.lastReadAt),H.setMessages(e.chat.messages),At.setAssignedAgentIds(e.chat.assignedIds??[]),e.chat.widgetOptions&&Et.updateGeneralOptions(e.chat.widgetOptions)),Ie.set(!0),G.emit("widgetInit",!0),Vn.executeAll()},ov=e=>{console.error(e)},av=()=>{Co.set(!1)},cv=({chatId:e})=>{So.set(!1),Rl.set(e),Je.set(re.ChatStatus.Open),Et.setMessageOptions({disableAttachments:!1})},uv=()=>{Je.set(re.ChatStatus.Served),gn(!1)},lv=({message:e})=>{const{closeType:t}=e.content.data;(t==="agent_close"||t==="bot_close")&&(At.setAssignedAgentIds([]),Je.set(re.ChatStatus.Closed),H.addMessage(e),G.emit("chatClosed",e))},fv=({message:e})=>{Gn()&&To(Kr),gn(!0,{byVisitor:!0}),H.addMessage(e),G.emit("chatVisitorClosed",e)},dv=({changes:e})=>{e.widgetOptions&&Et.updateGeneralOptions(e.widgetOptions),e.isClosed!==void 0&&gn(e.isClosed),e.virtualAgent!==void 0&&Ct.setVirtualAgent(e.virtualAgent)},hv=async({message:e})=>{const t=E(Cb)&&ns(e);!E(be)&&rs(e)&&!t?ly(e):await H.addMessage(e),Ll(),e.widgetOptions&&Et.setMessageOptions(e.widgetOptions),t&&Nt(),G.emit("messageReceived",e)},pv=e=>{hv(e)},gv=({messageId:e})=>{H.deleteMessage(e)},vv=({message:e})=>{H.replaceMessage(e),e.widgetOptions&&e.id===E(xo)&&Et.setMessageOptions(e.widgetOptions)},mv=({message:e,agent:t})=>{At.addAssignedAgentId(e.content.data.agentId),H.addMessage(e),G.emit("agentJoined",t)},yv=({message:e})=>{At.removeAssignedAgentId(e.content.data.agentId),H.addMessage(e)},bv=({message:e})=>{At.addAssignedAgentId(e.content.data.assigned),H.addMessage(e)},_v=({message:e})=>{At.removeAssignedAgentId(e.content.data.unassigned),H.addMessage(e)},wv=e=>{!e.typing.is&&E(So)||Fo.set(e.typing.is)},Cv=e=>{Hn.set(e.lastReadAt)},Av=({message:e,rating:t})=>{H.updateMessageRating(e),G.emit("chatRated",t)},Ev=e=>{G.emit("transcriptPdf",e)},Fv=({id:e,changes:t})=>{Ct.updateAgent(e,t)},Sv=({id:e,status:t})=>{Ct.updateAgent(e,{status:t})},kv=({status:e})=>{Il(e)},xv=e=>{Ye.updateVisitorData(e)},Tv=e=>{G.emit("contactAcquired",e)},Ov=e=>{(Gn()||Ql())&&Mn.set(e.ratingSuggestedTarget)},Mv=()=>{E(Mn)&&Mn.set(null)},Dv=({id:e,isActive:t})=>{Ol.updateIdentity(e,{isActive:t})},Rv=async e=>{const t=await x.awaitOptions(),n={data:e,connection:{url:jp(),socket:t.mock?new qp.SocketMock(t.mock):void 0,balancerUrl:t.balancerUrl,options:{path:"/socket",autoConnect:!1,reconnection:!0}}};return new mo(n)},Bv=()=>{let e=null;const t=()=>!!e,n=()=>{if(!e)throw new Error("Visitor client is not initialized");return e},r=async o=>{const l=await Gp(o);e=await Rv(l),e&&(Iv(e),await e.connect().catch(u=>{Ke("Failed connect to server.",u)}))};return Object.freeze({getClient:n,initClient:r,reloadClient:async(o,l)=>{await(e==null?void 0:e.disconnect()),o&&x.updateOptions({mock:o}),await r(l)},isInitialized:t})},Iv=e=>{e.on("initialized",iv),e.on("error",ov),e.on("disconnect",av),e.on("chat.opened",cv),e.on("chat.served",uv),e.on("chat.closed",lv),e.on("chat.visitor_closed",fv),e.on("chat.updated",dv),e.on("chat.message_received",pv),e.on("chat.message_updated",vv),e.on("chat.message_deleted",gv),e.on("chat.agent_joined",mv),e.on("chat.agent_left",yv),e.on("chat.agent_assigned",bv),e.on("chat.agent_unassigned",_v),e.on("chat.agent_typing",wv),e.on("chat.contact_read",Cv),e.on("chat.rated",Av),e.on("chat.rating_suggested",Ov),e.on("chat.rating_cancelled",Mv),e.on("chat.transcript_pdf",Ev),e.on("agent.updated",Fv),e.on("agent.status_updated",Sv),e.on("account.updated",kv),e.on("visitor.updated",xv),e.on("contact.acquired",Tv),e.on("identity.status_updated",Dv)},he=Bv(),Pv=()=>{const e=O(null),{subscribe:t,set:n,update:r}=e,i=a=>{n(a)},o=a=>{r(s=>s?{...s,...a}:null)},l=(a,s)=>{try{he.getClient().update({[a]:s})}catch(f){Ke(`Update of visitor property '${a}' failed.`,String(f))}};return{subscribe:t,setVisitorData:i,updateVisitorData:o,updateVisitorProperty:(a,s)=>{if(!E(Ie)){wr(a,s);return}o({[a]:s}),l(a,s)},updateVisitorVariables:a=>{if(!E(Ie)){wr("variables",a);return}const s=E(e);if(!s)return;const f=s.variables;o({variables:{...f,...a}});let h={};Object.keys(a).forEach(p=>{a[p]!==f[p]&&(h={...h,[p]:a[p]})}),Object.keys(h).length!==0&&l("variables",h)},updateVisitorContactData:a=>{var p;if(!E(Ie)){wr("contactData",{properties:a});return}const s=E(e);if(!s)return;const f=(p=s==null?void 0:s.contactData)==null?void 0:p.properties;o({variables:{...f,...a}});let h={};Object.keys(a).forEach(v=>{(!f||a[v]!==f[v])&&(h={...h,[v]:a[v]})}),Object.keys(h).length!==0&&l("contactData",{properties:a})}}},Ye=Pv(),Lv=(e,t)=>e.hasOwnProperty(t),Ml=e=>typeof e=="boolean",Dl=e=>typeof e=="number",es=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),Ut=e=>typeof e=="string"||e instanceof String,zc=e=>Ut(e)||Dl(e)||Ml(e),$v=e=>{const t={};return Object.keys(e).forEach(n=>{const r=e[n];zc(r)?t[n]=r:es(r)&&Lv(r,"value")&&zc(r.value)&&(t[n]=r.value)}),t},Nv=()=>{const e=O({}),{update:t,subscribe:n,set:r}=e;return{subscribe:n,setAgents:d=>{r(Qr("id",d))},addAgent:d=>{t(c=>({...c,[d.id]:d}))},updateAgent:(d,c)=>{t(a=>a[d]?{...a,[d]:{...a[d],...c}}:a)},setVirtualAgent:d=>{const{description:c,avatar:a,name:s}=d,f={};c&&(f.description=c),a&&(f.avatar=a),s&&(f.fullname=s),t(h=>(Object.keys(h).forEach(p=>{h[p]={...h[p],...f}}),h))}}},Ct=Nv(),l1=e=>M([Ct],([t])=>t[e]??null),qv=M([Ct],([e])=>Object.values(e).filter(t=>!t.disabled)),zv=M([qv,Ye],([e,t])=>{const n=t==null?void 0:t.group;return!n||n===$p?e:e.filter(r=>r.groups.length===0||r.groups.includes(n))}),jv=M([zv],([e])=>e.filter(t=>t.status===re.AgentStatus.Online)),Uv=()=>{const e=O([]),{subscribe:t,set:n,update:r}=e;return{subscribe:t,setAssignedAgentIds:d=>{n(d)},addAssignedAgentId:d=>{r(c=>[...new Set([...c,d])])},removeAssignedAgentId:d=>{r(c=>c.filter(a=>a!==d))},clearAssignedAgentIds:()=>{n([])}}},At=Uv(),Eo=M([At,Ct],([e,t])=>e.map(n=>t[n]).filter(Boolean)),f1=M([Eo],([e])=>e.length>0),Vv=M([Eo],([e])=>e.filter(t=>!t.disabled)),d1=M([Eo],([e])=>e.some(t=>t.status===re.AgentStatus.Online)),Hv=()=>{const e=O({disableAttachments:!1,disableAuthentication:!1,disableInput:!1}),t=O({}),n=o=>{e.update(l=>({...l,...o}))},r=o=>{t.set(o)};return{subscribe:M([e,t],([o,l])=>({...o,...l})).subscribe,updateGeneralOptions:n,setMessageOptions:r}},Et=Hv(),h1=M([Et],([e])=>e.disableAttachments),Vt=O(re.AccountStatus.Offline),Je=O(null),xi=O(0),Fo=O(!1),Hn=O(null),Mn=O(null),Rl=O(""),Bl=M([Je],([e])=>e===re.ChatStatus.Pending);M([Je],([e])=>e!==null);const Gv=M([Je],([e])=>e===re.ChatStatus.Served),p1=M([Je],([e])=>e===re.ChatStatus.Open),g1=M([Je],([e])=>e===re.ChatStatus.Closed),v1=M([Gv,xi],([e,t])=>e&&t===0),gn=(e,{byVisitor:t=!1}={})=>{e?xi.set(t?2:1):xi.set(0)},Wv=M([Vt,Vv],([e,t])=>t.length===0?e===re.AccountStatus.Online:t.some(n=>n.status===re.AgentStatus.Online)),Kv=M([Et],([e])=>e.disableAuthentication),Xv=()=>{Fo.set(!1),Je.set(null),gn(!1),Hn.set(null)},Il=e=>{e===re.AccountStatus.OfflineWithAI?Vt.set(re.AccountStatus.Online):Vt.set(e)},Pl=()=>{Hn.set(new Date().toISOString()),he.getClient().chatRead()},Ll=()=>{const e=Lt().visibilityState==="visible";!E(hy)||!E(be)||!e||Pl()},Zv=e=>({...ga,chatId:E(Rl),createdAt:new Date().toISOString(),content:{...ga.content,data:{target:e}}}),m1=()=>{gn(!0,{byVisitor:!0}),he.getClient().chatClose(),wl(),Gn()||Rn()},y1=async e=>{await H.addMessage(Zv(e))},Yv=()=>{H.deleteMessage(Kr)};function vn(e){return e.length===0?null:e[e.length-1]}const Jv=e=>e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase(),Qv=e=>{let t=e,n=0;const r=["B","KB","MB","GB"];for(;t>=1024&&n<r.length-1;)t/=1024,n++;return{size:Math.floor(t),unit:r[n]}},b1=e=>{const t=e.split("."),n=vn(t);return n?n.toUpperCase():Xp},_1=(e,t)=>`${e}?name=${t}`,em=async(e,t)=>{const n=he.getClient(),r=[];for(const{file:i}of e){const o=await n.chatUploadInit(),l=new FormData;l.append("file",i,i.name);try{if(!(await fetch(o.url,{method:"post",body:l})).ok)throw new Error("Upload failed");r.push(o.token)}catch{Ke(`File [${i.name}] upload failed`),jt(E(oe)("fileUpload.filesWerentProcessed"))}finally{t(i)}}return r},tm=async e=>{const t=he.getClient();try{await t.chatUploadFinish(e)}catch{Ke(`Failed to finish file upload for ${e}`)}},nm=1e3,Ti=6e4,rm=36e5,$l=864e5,sm=2628e6,im=31536e6,jc=e=>Math.floor(e/Ti)*Ti,om=(e,t)=>jc(new Date(e).getTime())===jc(new Date(t).getTime()),am=(e,t)=>{const n=new Date(e),r=new Date(t);return n.getDate()===r.getDate()&&n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()},w1=(e,t)=>e.getTime()-t.getTime(),cm=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric"}),um=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),C1=e=>am(new Date,e)?cm:um,lm=()=>typeof Intl<"u"&&"RelativeTimeFormat"in Intl,fm=e=>lm()?new Intl.RelativeTimeFormat(e,{numeric:"auto"}):null,dm=[{unit:"year",amount:im},{unit:"month",amount:sm},{unit:"day",amount:$l},{unit:"hour",amount:rm},{unit:"minute",amount:Ti},{unit:"second",amount:nm}],A1=(e,t)=>{const n=fm(t);if(!n)return X("Relative time format not supported"),"";for(const{unit:r,amount:i}of dm){if(r==="second")return n.format(0,"second");if(Math.abs(e)>i)return n.format(Math.round(e/i),r)}return""},hm=(e,t=300)=>{let n;return(...i)=>{n||(e(...i),n=setTimeout(()=>n=null,t))}},pm=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,gm=/[\0-\x1F\x7F-\x9F]/,vm=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,mm=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;function ym(e){const t={};e=e||{},t.src_Any=pm.source,t.src_Cc=gm.source,t.src_Z=mm.source,t.src_P=vm.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><｜]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Oi(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function ts(e){return Object.prototype.toString.call(e)}function bm(e){return ts(e)==="[object String]"}function _m(e){return ts(e)==="[object Object]"}function wm(e){return ts(e)==="[object RegExp]"}function Uc(e){return ts(e)==="[object Function]"}function Cm(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Nl={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Am(e){return Object.keys(e||{}).reduce(function(t,n){return t||Nl.hasOwnProperty(n)},!1)}const Em={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},Fm="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Sm="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function km(e){e.__index__=-1,e.__text_cache__=""}function xm(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function Vc(){return function(e,t){t.normalize(e)}}function Rr(e){const t=e.re=ym(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Fm),n.push(t.src_xn),t.src_tlds=n.join("|");function r(u){return u.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function o(u,d){throw new Error('(LinkifyIt) Invalid schema "'+u+'": '+d)}Object.keys(e.__schemas__).forEach(function(u){const d=e.__schemas__[u];if(d===null)return;const c={validate:null,link:null};if(e.__compiled__[u]=c,_m(d)){wm(d.validate)?c.validate=xm(d.validate):Uc(d.validate)?c.validate=d.validate:o(u,d),Uc(d.normalize)?c.normalize=d.normalize:d.normalize?o(u,d):c.normalize=Vc();return}if(bm(d)){i.push(u);return}o(u,d)}),i.forEach(function(u){e.__compiled__[e.__schemas__[u]]&&(e.__compiled__[u].validate=e.__compiled__[e.__schemas__[u]].validate,e.__compiled__[u].normalize=e.__compiled__[e.__schemas__[u]].normalize)}),e.__compiled__[""]={validate:null,normalize:Vc()};const l=Object.keys(e.__compiled__).filter(function(u){return u.length>0&&e.__compiled__[u]}).map(Cm).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+l+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+l+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),km(e)}function Tm(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function Mi(e,t){const n=new Tm(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Fe(e,t){if(!(this instanceof Fe))return new Fe(e,t);t||Am(e)&&(t=e,e={}),this.__opts__=Oi({},Nl,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Oi({},Em,e),this.__compiled__={},this.__tlds__=Sm,this.__tlds_replaced__=!1,this.re={},Rr(this)}Fe.prototype.add=function(t,n){return this.__schemas__[t]=n,Rr(this),this};Fe.prototype.set=function(t){return this.__opts__=Oi(this.__opts__,t),this};Fe.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,o,l,u,d,c,a;if(this.re.schema_test.test(t)){for(d=this.re.schema_search,d.lastIndex=0;(n=d.exec(t))!==null;)if(o=this.testSchemaAt(t,n[2],d.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(l=r.index+r[1].length,(this.__index__<0||l<this.__index__)&&(this.__schema__="",this.__index__=l,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(a=t.indexOf("@"),a>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(l=i.index+i[1].length,u=i.index+i[0].length,(this.__index__<0||l<this.__index__||l===this.__index__&&u>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=l,this.__last_index__=u))),this.__index__>=0};Fe.prototype.pretest=function(t){return this.re.pretest.test(t)};Fe.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Fe.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Mi(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(Mi(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Fe.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Mi(this,0)):null};Fe.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),Rr(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Rr(this),this)};Fe.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Fe.prototype.onCompile=function(){};const ql=JSON.parse('["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volvo","vote","voting","voto","voyage","vu","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"]'),Om=/^[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/,E1=/((?:www.)?[^\s.]+\.[^\s/]+\/[^\s.]+)/,Hc=/[&<>"']/g,ui=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},n=RegExp(Hc.source);return e&&n.test(e)?e.replace(Hc,r=>t[r]):e||""},Mm="overflow: hidden; display: -webkit-inline-box; -webkit-box-orient: vertical; -webkit-line-clamp: 1; line-clamp: 1; word-break: break-all;",Dm=new Fe().tlds(ql).set({fuzzyIP:!0}),Rm=new Fe().tlds(ql),Bm=(e,t,n)=>{const r=ne().location.hostname,i=r.length>0&&e.includes(r)?"_parent":"_blank";return`<a href="${e}" target="${i}" rel="noreferrer noopener" title="${e}" style="${n!=null&&n.clamp&&!(n!=null&&n.replaceText)?Mm:""}">${t}</a>`},F1=(e,t)=>{if(e==="")return e;const n=Dm.match(e);if(!n)return ui(e);let r="",i=0;return n.forEach(o=>{var a;let l="",u="";const d=zl(e,o),c=(t==null?void 0:t.clamp)&&o.text.length>30&&!d;o.index>i&&(l=e.substring(i,o.index)),u=Bm(o.url,o.text,{...t,clamp:c}),i=o.lastIndex,d&&(l=l.substring(0,l.length-1),i+=1),c&&!Im(e,o)&&(u=`
${u}
`,l=l.trimEnd(),(a=e[i])!=null&&a.match(/\s/)&&(i+=1)),r+=ui(l)+u}),e.length>i&&(r+=ui(e.substring(i))),r},zl=(e,t)=>e[t.index-1]==='"'&&e[t.lastIndex]==='"',Im=(e,t)=>!!(t.index<=1&&e.substring(t.lastIndex,t.lastIndex+3).match(/[\n\r]+/)||e.substring(t.index-3,t.index).match(/[\n\r]+/)&&e.substring(t.lastIndex,t.lastIndex+3).match(/[\n\r]+/)||e.substring(t.index-3,t.index).match(/[\n\r]+/)&&t.lastIndex>e.length-3||t.index<=1&&t.lastIndex>=e.length-2),Pm=e=>{const t=[...e.matchAll(/\[([^\]]+)\]/g)];return t.length?t.map(n=>n[1]).filter(n=>!n.includes('"')&&!n.includes("'")).join(" "):e.trim()},jl=e=>{const t=["mailto:","ftp:","//"],n=Rm.match(Pm(e));return n?n.filter(r=>!t.includes(r.schema)):null},Lm=()=>Gr("cards"),$m=e=>{oo({...e},"cards")},Nm=async e=>{const t=new Headers,{widgetApiUrl:n}=x.getOptions();t.append("Content-Type","application/json");const r=JSON.stringify({links:e});try{const i=await fetch(`${n}/links/preview`,{method:"POST",headers:t,body:r});return i.ok&&i.json?await i.json():null}catch{return null}},qm=e=>{const t=e.find(n=>n.type==="open_url");return(t==null?void 0:t.value)||""},zm=e=>{const t=e.filter(n=>n.title&&n.image&&!Um(qm(n.actions)));return t.length&&e.length>1?e:t.length===1?t:[]},jm=e=>{const t=new Date().getTime();return Object.keys(e).forEach(r=>{(!e[r].expiration||e[r].expiration&&e[r].expiration<t)&&delete e[r]}),e},Um=e=>{const{acceptedFileExtensions:t}=E(Ao),n=e.match(/(\.)([^.]{3,4})$/m);return n&&n[2]&&t.includes(n[2])},S1=async e=>{try{await he.getClient().linkOpened({url:e})}catch(t){Ke("Sending link opened analytics event failed",String(t))}};let Gc=!1;const Di=O(),Ri=O(!1),Bi=O(!1),Vm=(e,t,n)=>{const r={},i=new Date().getTime()+$l;e.forEach((l,u)=>r[l]={expiration:i,card:t[u]});const o={...n,...r};Di.set(o),$m(o)},Hm=async(e,t,n=!1)=>{let r=[];const i={type:"cards",layout:"carousel",items:[]};Gc||(Di.set(Lm()),Gc=!0);const o=jl(e);if(!o)return null;const l=jm(E(Di)),u=[];if(o.forEach(d=>{zl(e,d)||(l[d.url]?r.push(l[d.url].card):u.push(d.url))}),u.length>0){t&&Ri.set(!0),n&&Bi.set(!0);const d=await Nm(u);d&&(Vm(u,d,l),r=[...r,...d])}return i.items=zm(r),Ri.set(!1),Bi.set(!1),i.items.length>0?i:null};var Ve=(e=>(e.ContactMessage="contact-message",e.AgentMessage="agent-message",e.BotMessage="bot-message",e.BotReplies="bot-replies",e))(Ve||{});const Wc=async({text:e,quickReply:t})=>{try{return await he.getClient().chatMessage({content:{type:T.MessageContentType.Text,text:e},quickReply:t})??null}catch{return null}},ns=e=>e.subType===T.MessageSubType.Bot||e.subType===T.MessageSubType.Trigger,Gm=e=>e.subType===T.MessageSubType.System,rs=e=>e.subType===T.MessageSubType.Agent||ns(e),Wm=(e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime(),Ul=(e,t)=>t===Ve.BotReplies?`${e.id}-replies`:e.id,Vl=e=>{const t={isRight:!1,isLeft:!1},n={isPrimary:!1,isSecondary:!1};switch(e){case Ve.ContactMessage:t.isRight=!0,n.isPrimary=!0;break;default:t.isLeft=!0,n.isSecondary=!0}return{align:t,variant:n}},Km=e=>!!e.agentId||e.subType===T.MessageSubType.Bot&&e.content.type!==T.MessageContentType.TicketForm,Hl=(e,t)=>e.subType===T.MessageSubType.System||t===Ve.BotReplies||e.content.type===T.MessageContentType.TicketForm,Xm=e=>{const t=[];let n=null,r=null;for(const i of e){if(i.content.type===T.MessageContentType.RateForm&&(i.content.data.target===T.RatingTarget.Ai&&!Ql()||i.content.data.target===T.RatingTarget.Agent&&!Gn()))continue;n&&!ny(i,n)&&(t.push(n),n=null,r=null),n=n||Zm(i);const o=Kc(i,n);if(r){const u=Kl(r),d=Gl(r);o.neighbors.hasTop=u,d.any.neighbors.hasBottom=u,d.attachmentContext&&(d.attachmentContext.extraSpaces.hasBottom=yr(d.attachmentContext.attachment))}const l=Qm(i);if(l&&Jm(l,o,r),n.messagesContext.push(o),r=o,(ns(i)||Gm(i))&&ay(i)){t.push(n);const u=Ym(i);u.messagesContext.push(Kc(i,u)),t.push(u),n=null}}return n&&t.push(n),t},Zm=e=>{const t=Wl(e),n=e.subType===T.MessageSubType.Bot||e.subType===T.MessageSubType.Trigger,{align:r,variant:i}=Vl(t);return{type:t,isBot:n,id:Ul(e,t),date:e.createdAt,agentId:e.agentId,align:r,variant:i,messagesContext:[],showAvatar:Km(e),useFullWidth:Hl(e,t)}},Ym=e=>{const t=Ve.BotReplies,{align:n,variant:r}=Vl(t);return{type:Ve.BotReplies,isBot:!0,id:Ul(e,t),date:e.createdAt,agentId:e.agentId,align:n,variant:r,messagesContext:[],showAvatar:!1,useFullWidth:Hl(e,t)}},Kc=(e,t)=>({group:t,message:e,neighbors:{hasTop:!1,hasBottom:!1},attachmentsContext:[]}),Jm=(e,t,n)=>{let r=null;for(const i of e){const o=Xc(i),l={hasTop:!1,hasBottom:!1},u=yr(i),d={hasTop:u,hasBottom:!1};if(r){const a=Xc(r.attachment),s=yr(r.attachment);r.neighbors.hasBottom=a&&o,l.hasTop=a&&o,r.extraSpaces.hasBottom=!u&&s}else if(t.neighbors.hasBottom=o,l.hasTop=o,ey(t.message))if(l.hasTop=!1,t.neighbors.hasTop=!1,t.neighbors.hasBottom=!1,n){const a=Kl(n),s=Gl(n);l.hasTop=a&&o,s.any.neighbors.hasBottom=a&&o;const f=s.attachmentContext;f&&(f.extraSpaces.hasBottom=!u&&yr(f.attachment))}else d.hasTop=!1;const c={attachment:i,neighbors:l,extraSpaces:d,messageContext:t};t.attachmentsContext.push(c),r={...c}}},Gl=e=>{const t=vn(e.attachmentsContext)||void 0;return{attachmentContext:t,any:t||e}},Qm=e=>{var t;return e?((t=e.content)==null?void 0:t.type)===T.MessageContentType.Upload?[e.content.data]:e.attachments:[]},ey=e=>!e.content.text,ty=e=>{try{const t=ne().location.hostname,r=new DOMParser().parseFromString(e,"text/html");return r.querySelectorAll("a[href]").forEach(o=>{let l=o.getAttribute("href")||"";l=l.replace(/^https?:\/\/"?https?:\/\//,"https://"),l=l.replace(/^"+|"+$/g,""),o.setAttribute("href",l);const u=t.length>0&&l.includes(t);o.hasAttribute("target")||o.setAttribute("target",u?"_parent":"_blank"),o.hasAttribute("rel")||o.setAttribute("rel","noopener noreferrer")}),r.body.innerHTML}catch{return e}},ny=(e,t)=>{const n=Wl(e),r=n===Ve.AgentMessage&&e.agentId===t.agentId,i=n===Ve.ContactMessage,o=e.subType!==T.MessageSubType.Bot||(e.content.quickReplies||[]).length===0;return t.type===n&&(r||i)&&o&&om(t.date,e.createdAt)},Wl=e=>{switch(e.subType){case T.MessageSubType.Agent:return Ve.AgentMessage;case T.MessageSubType.Contact:return Ve.ContactMessage;case T.MessageSubType.Bot:return Ve.BotMessage}return null},Kl=e=>{const t=e.attachmentsContext.length;return!(t>0&&e.attachmentsContext[t-1].attachment.type===T.AttachmentType.File)},Xc=e=>e.type!==T.AttachmentType.File&&e.type!==T.AttachmentType.Cards,yr=e=>!!e&&(e.type===T.AttachmentType.File||e.type===T.AttachmentType.Cards),Xl=()=>{const e=fb();e.volume=xp,e.addEventListener("canplaythrough",()=>{e.play().catch(t=>X("Could not play message sound.",t))})},ry=hm(Xl,Tp),sy=e=>e.filter(t=>t.type===T.MessageType.Message&&(t.subType===T.MessageSubType.Agent||t.subType===T.MessageSubType.Contact)),iy=(e,t=!0)=>{const n=e.reduce((r,i)=>(r.push(i),i.content.type===T.MessageContentType.ChatClose||i.content.type===T.MessageContentType.ChatVisitorClose?[]:r),[]);return t?n.filter(r=>r.type===T.MessageType.Message&&r.subType!==T.MessageSubType.System):n},oy=e=>{const t={};return e.forEach(n=>{n.trigger&&(t[n.trigger.id]={sent:!0})}),t},ay=e=>!!(e.content.quickReplies&&e.content.quickReplies.length>0),Ii=async(e,t=!1)=>{var i;const n=rs(e),r=!t&&n;if("html"in e.content&&e.content.html&&(e.content.html=ty(e.content.html)),(i=e.content)!=null&&i.text&&x.getOptions().urlCardsEnabled){const o=await Hm(e.content.text,e.subType===T.MessageSubType.Contact,r);o&&o.items.length>0&&e.attachments.push(o)}return Fo.set(!1),e},cy=async e=>(x.getOptions().urlCardsEnabled&&await Promise.all(e.map(async t=>await Ii(t))),e),k1=e=>e.findIndex(t=>t.message.channel.type==="email")>-1,x1=e=>{var n,r;const t=e.find(i=>{var o,l;return(l=(o=i.message)==null?void 0:o.trigger)==null?void 0:l.identityId});return(r=(n=t==null?void 0:t.message)==null?void 0:n.trigger)==null?void 0:r.identityId},uy=()=>{const e=O({}),{subscribe:t,update:n,set:r}=e,i=async f=>{r(Qr("id",await cy(f)))},o=async f=>{const h=await Ii(f);ns(f)&&So.set(!1),n(p=>({...p,[f.id]:h})),fy(h)},l=async f=>{if(!E(it).some(v=>v.id===f.id))return;const p=E(xo)===f.id?await Ii(f,!0):f;n(v=>({...v,[f.id]:p}))};return{subscribe:t,setMessages:i,addMessage:o,deleteMessage:f=>{n(h=>{const{[f]:p,...v}=h;return v})},replaceMessage:l,updateMessageRating:f=>{var h;E(Mn)===((h=f.content.data)==null?void 0:h.target)&&Yv(),n(p=>!f||f.content.type!==T.MessageContentType.RateForm?{...p}:(p[f.id]||To(f.id),{...p,[f.id]:f}))},sendMessage:async(f,h)=>{Pi.set(f);const p=await Wc({text:f});p&&(Pi.set(null),await o(p),G.emit("messageSent",p),_0(E(Vt))),await Promise.all(h.map(v=>tm(v)))},sendBotReply:async(f,h,p)=>{const v=await Wc({text:h,quickReply:{replyTo:f,payload:p}});p.isGoBackButton||Qy(h),v&&await l(v)},clearMessages:()=>{r({})}}},H=uy(),ly=e=>{E(Ft)||$o(),Sb(),setTimeout(()=>{H.addMessage(e),gf()},1600)},fy=e=>{e&&E(Ir)&&E(Ft)&&!(E(pf)&&E(be))&&db(e)&&ry()},So=O(!1),Zl=M([H],([e])=>{const t=Object.values(e).filter(rs);if(!t)return null;const n=t.sort((r,i)=>new Date(r.createdAt).getTime()-new Date(i.createdAt).getTime());return vn(n)}),ko=M([H,Hn],([e,t])=>{const n=Object.values(e).filter(rs);return t?n.filter(r=>new Date(r.createdAt)>new Date(t)):n}),dy=M([ko],([e])=>vn(e)),Yl=M([ko],([e])=>e.length),hy=M([Yl],([e])=>e>0),it=M([H],([e])=>Object.values(e).sort(Wm)),T1=M([it],([e])=>Xm(e)),xo=M([it],([e])=>{const t=vn(e);return(t==null?void 0:t.id)??null}),O1=M([H],([e])=>{var r;const t=Object.values(e).filter(i=>{var o;return typeof((o=i.widgetOptions)==null?void 0:o.disableInput)=="boolean"}),n=vn(t);return((r=n==null?void 0:n.widgetOptions)==null?void 0:r.disableInput)??!1}),Jl=M([H],([e])=>Object.values(e).filter(t=>t.subType==="contact"||t.subType==="agent").length>0),M1=M([H],([e])=>Object.values(e).filter(t=>t.subType===T.MessageSubType.Contact).length>0),D1=M([H,cl],([e,t],n)=>{var r,i,o;if(t){const l=e[t];l&&l.content.type===T.MessageContentType.RateForm&&n({messageId:l.id,value:(r=l.content.data)==null?void 0:r.value,text:(i=l.content.data)==null?void 0:i.text,target:(o=l.content.data)==null?void 0:o.target})}else n(null)}),py=M([it],([e])=>e.slice().reverse().find(n=>n.subType===T.MessageSubType.Contact)||null),Pi=O(null),Gn=()=>!!x.getOptions().ratingEnabled,Ql=()=>!!x.getOptions().aiRatingEnabled,To=e=>{cl.set(e),_o(Jr.ChatRating)},R1=async({messageId:e,rating:{text:t,value:n},onSuccess:r})=>{const i=E(H)[e],o=e===Kr?void 0:e;try{await he.getClient().chatRate({messageId:o,value:n,text:t??void 0}),r&&r()}catch(l){i&&await H.replaceMessage(i),Ke("Chat rating failed.",String(l)),jt(E(oe)("form.submit.error"))}},B1=e=>{const{widgetV3Url:t}=x.getOptions();return`${t}/assets/images/rating/${e}.svg`},gy=/(G-([A-Z,0-9]*))/g,gt=[];let Oo=!1,fe,Mo=!1,Dn;const Li=e=>e.match(gy),vy=()=>{const{googleAnalyticsEnabled:e}=x.getOptions();fe=window.top||window,e&&(fe.gtag&&(Dn=fe.gtag,Mo=!0),G.on("analyticsConsentChanged",my),!Oo&&el()&&ef())},my=e=>{!Oo&&e&&ef()},ef=()=>{const{gaKey:e,gaOptions:t,googleAnalyticsManual:n,googleAnalyticsMeasurementIds:r}=x.getOptions(),i=t||{cookieDomain:"auto"};if(e)Li(e)&&gt.push({key:e,options:i});else if(n&&r)r.forEach(o=>{Li(o)&&gt.push({key:o,options:i})});else try{gt.push(...tf())}catch(o){const l=o instanceof Error?o.message:o;Be("Error during getting GA top trackers",l)}gt.length>0&&!Mo&&yy(),gt.length!==0?(_y(),Oo=!0,Be("GA initialized")):Be("No GA to setup")},tf=()=>{const e=[];return fe.google_tag_manager&&Object.keys(fe.google_tag_manager).forEach(n=>{Li(n)&&e.push({key:n,options:{cookieDomain:"auto"}})}),e},yy=()=>{const e=fe.document,{head:t}=e,n=e.createElement("script");n.id="gtag",n.type="text/javascript",n.async=!0,n.src="https://www.googletagmanager.com/gtag/js",t.insertBefore(n,t.firstChild),fe.dataLayer=fe.dataLayer||[],fe.gtag=function(){fe.dataLayer.push(arguments)},Dn=fe.gtag,Dn("js",new Date)},by=()=>{let e=[];if(Mo){const t=tf();gt.forEach(n=>{t.find(({key:r})=>r===n.key)||e.push(n)})}else e=[...gt];return e},_y=()=>{by().forEach(e=>{const{key:t,options:n}=e;let r={};n?(r={cookie_domain:n.cookieDomain},n.name&&(r.name=n.name)):r={cookie_domain:(fe==null?void 0:fe.location.hostname)||""},Dn("config",t,r)})},wy=(e,t)=>{const{googleAnalyticsEnabled:n}=x.getOptions();if(!(!n||!fe.gtag||!el()||fe.document.hidden))try{gt.forEach(r=>{t.send_to=r.key,Dn("event",e,t),Be(`Smartsupp: GA event ${e} - ${JSON.stringify(t)}`)})}catch(r){const i=r instanceof Error?r.message:r;Be("Smartsupp: GA error:",i)}},Cy="Visitor_started_conversation",Ay="Trigger_message_sent",Ey="Trigger_message_viewed",Fy="Trigger_visitor_reaction",Sy="Auto_message_sent",ky="Auto_message_viewed",xy="Auto_message_visitor_reaction",Ty="Chatbot_sent",Oy="Chatbot_viewed",My="Chatbot_interaction",Dy="Chatbot_button_interaction",Ry="Chatbot_visitor_reaction",By="Ai_chatbot_interaction",Iy="Ai_chatbot_visitor_reaction",Py="Agent_served_conversation",Ly="Contact_acquired",$y="Auth_form_filled",Ny="Offline_message_sent",qy="Feedback_sent",zy="Feedback_text_sent",jy="Url_card_opened",Uy={event_category:"Smartsupp_v3",non_interaction:!0},se=(e,t)=>{const n={...Uy,...t};wy(e,n)},Vy=(e="")=>se(Ay,{event_label:e}),Hy=e=>se(Ey,{event_label:e}),Gy=(e="")=>se(Fy,{event_label:e}),Wy=(e="")=>se(Sy,{event_label:e}),Ky=e=>se(ky,{event_label:e}),Xy=(e="")=>se(xy,{event_label:e}),Zy=(e="")=>se(Ty,{event_label:e}),Yy=e=>se(Oy,{event_label:e}),Jy=(e="")=>se(My,{event_label:e}),Qy=(e="")=>se(Dy,{event_label:e}),e0=(e="")=>se(Ry,{event_label:e}),t0=()=>se(Cy),n0=e=>se(Py,{event_label:e}),r0=()=>se($y),s0=()=>se(Ny),i0=(e,t)=>{const n={event_label:t||al[e]||"",value:e};se(t?zy:qy,n)},o0=e=>se(Ly,{event_label:e}),I1=e=>se(jy,{event_label:e}),a0=(e="")=>se(By,{event_label:e}),c0=(e="")=>se(Iy,{event_label:e});let $i=!1,we={};const nf=()=>{$i=!1},u0=()=>{const e=E(it);we=oy(e)},l0=(e,t)=>$i?!1:iy(e).length===1&&t===T.MessageSubType.Contact?($i=!0,!0):!1,f0=(e,t)=>{var r,i;const n=((r=e.trigger)==null?void 0:r.id)||"";return t.subType===T.MessageSubType.Contact&&e.subType===T.MessageSubType.Trigger&&!((i=we[n])!=null&&i.visitorResponded)?(we[n].visitorResponded=!0,!0):!1},d0=(e,t)=>{var r,i;const n=((r=e.trigger)==null?void 0:r.id)||"";return t.subType===T.MessageSubType.Contact&&!(t.content.quickReplies||t.content.quickReply)&&e.subType===T.MessageSubType.Bot&&!((i=we[n])!=null&&i.visitorResponded)&&n?(we[n].visitorResponded=!0,!0):!1},h0=(e,t)=>{var r,i,o;const n=((r=e.trigger)==null?void 0:r.id)||"";return t.subType===T.MessageSubType.Contact&&((i=e.trigger)==null?void 0:i.groupType)===T.GroupType.chatbot&&!((o=we[n])!=null&&o.reacted)?(we[n].reacted=!0,!0):!1},p0=e=>{var n,r,i;const t=((n=e.trigger)==null?void 0:n.id)||"";return((r=e.trigger)==null?void 0:r.groupType)===T.GroupType.ai&&!((i=we[t])!=null&&i.reacted)?(we[t].reacted=!0,!0):!1},ht=(e,t,n=!1)=>{var r;if(e.length>0&&!n){const i=e.slice(-2).filter(o=>o.trigger);return i?(r=i[i.length-1].trigger)==null?void 0:r.name:""}else return t.trigger?t.trigger.name:""},g0=e=>{const t=E(it);m0(t,e),y0(t,e),l0(t,e.subType)&&t0()},v0=e=>{var i;let t=e;const r=E(it).filter(o=>o.trigger);r&&r.length>0&&(t=((i=r[r.length-1].trigger)==null?void 0:i.name)??e),o0(t)},m0=(e,t)=>{var i,o,l,u,d,c,a,s;const n=((i=t.trigger)==null?void 0:i.id)||"";t.subType===T.MessageSubType.Bot&&!((o=we[n])!=null&&o.sent)&&(((l=t.trigger)==null?void 0:l.groupType)===T.GroupType.chatbot&&(Zy(ht(e,t,!0)),we[n]={sent:!0}),((u=t.trigger)==null?void 0:u.groupType)===T.GroupType.message&&(Wy(ht(e,t,!0)),we[n]={sent:!0}),((d=t.trigger)==null?void 0:d.groupType)===T.GroupType.ai&&(we[n]={sent:!0}));const r=e.length>1?e[e.length-2]:void 0;r&&(d0(r,t)?(((c=r.trigger)==null?void 0:c.groupType)===T.GroupType.chatbot&&e0(ht(e,t)),((a=r.trigger)==null?void 0:a.groupType)===T.GroupType.message&&Xy(ht(e,t)),((s=r.trigger)==null?void 0:s.groupType)===T.GroupType.ai&&c0(ht(e,t))):h0(r,t)?Jy(ht(e,t)):p0(t)&&a0(ht(e,t)))},y0=(e,t)=>{var r,i;t.subType===T.MessageSubType.Trigger&&(Vy((r=t==null?void 0:t.trigger)==null?void 0:r.name),we[((i=t.trigger)==null?void 0:i.id)||""]={sent:!0});const n=e.length>1?e[e.length-2]:void 0;n&&f0(n,t)&&Gy(ht(e,t))},b0=()=>{const e=E(ko).filter(n=>n.trigger),t=e[e.length-1];t&&t.trigger&&(t.subType===T.MessageSubType.Bot&&t.content.quickReplies?Yy(t.trigger.name):t.subType===T.MessageSubType.Bot?Ky(t.trigger.name):t.subType===T.MessageSubType.Trigger&&Hy(t.trigger.name))},_0=e=>{e===re.AccountStatus.Offline&&s0()};G.on("messageReceived",g0);G.on("agentJoined",e=>{n0(e.fullname)});G.on("chatRated",e=>{i0(e.value,e.text)});G.on("chatClosed",()=>{nf()});G.on("chatVisitorClosed",()=>{nf()});G.on("contactAcquired",({acquiredBy:e})=>{v0(e)});Vn.push(u0);const rf={Enter:"Enter",Escape:"Escape"},P1=2e3,L1=2e3,sf=255,w0=32,$1=500,N1=e=>{const t={};return e.filter(n=>!n.isHidden).reduce((n,r)=>(n[r.name]=r.value,n),t)},q1=e=>{const t={};return e.reduce((n,r)=>(n[r.name]=r.validators,n),t)},z1=(e,t,n)=>{e.update(r=>({...r,[t]:n}))},j1=(e,t)=>{const n={};for(const r in e)n[r]=t;return n},U1=()=>Math.random().toString(36),C0=e=>{if(!e)return!1;const t=e.split("@");if(t.length!==2)return!1;const n=t[0],r=t[1];return n.length>64||r.length>255||r.split(".").some(o=>o.length>63)?!1:Om.test(e)};var Gt=(e=>(e.Text="text",e.Checkbox="checkbox",e.Select="select",e))(Gt||{});const ss=()=>e=>{let t=!0;return e==null&&(t=!1),Ut(e)&&(t=e.trim().length>0),{type:"required",isValid:t}},A0=()=>e=>({type:"checked",isValid:Ut(e)?e==="true":e===!0}),E0=()=>e=>({type:"email",isValid:C0(String(e))}),F0=()=>e=>({type:"phone",isValid:/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-s./0-9]*$/.test(String(e))}),li=O(void 0),S0=e=>{const{emailControl:t}=x.getOptions(),n=!!(e!=null&&e.email);return t&&!n},k0=e=>{const{nameControl:t}=x.getOptions(),n=!!(e!=null&&e.name);return t&&!n},x0=e=>{const{numberControl:t}=x.getOptions(),n=!!(e!=null&&e.phone);return!!t&&!n},T0=()=>{const{groupSelectEnabled:e}=x.getOptions(),t=E(Cl);return!!e&&t.length>0},O0=()=>{const{privacyNoticeEnabled:e,privacyNoticeCheckRequired:t}=x.getOptions(),n=j0();return!!e&&t&&!n},M0=e=>{var r;const{privacyNoticeEnabled:t}=x.getOptions(),n=!!((r=e==null?void 0:e.variables)!=null&&r.personalDataProcessingConsent);return!!t&&!n},D0=()=>({type:Gt.Text,subType:"email",name:"email",label:"authForm.label.email",placeholder:"authForm.yourEmail",value:"",validators:[ss(),E0()],maxLength:sf}),R0=()=>({type:Gt.Text,subType:"text",name:"name",label:"authForm.label.name",placeholder:"authForm.yourName",value:"",validators:[ss()],maxLength:sf}),B0=()=>({type:Gt.Text,subType:"tel",name:"phone",label:"authForm.label.phone",placeholder:"authForm.yourPhone",value:"",validators:[ss(),F0()],maxLength:w0}),I0=e=>{const t=E(Cl);return{type:Gt.Select,name:"group",label:"authForm.label.group",placeholder:"authForm.group",value:(e==null?void 0:e.group)??"",validators:[ss()],options:t.map(n=>({text:n.name,value:n.key}))}},P0=()=>({type:Gt.Checkbox,name:"personalDataProcessingConsent",label:"authForm.acceptTerms",value:!1,validators:[A0()]}),L0=()=>({type:Gt.Checkbox,name:"personalDataProcessingConsent",label:"topBar.gdprTitle",value:!1,validators:[],isHidden:!0}),of=e=>({showEmail:S0(e),showName:k0(e),showPhone:x0(e),showGroups:T0(),showConsent:O0()}),$0=e=>({showEmail:!!e.emailControl,showName:!!e.nameControl,showPhone:!!e.numberControl,showGroups:!!e.groupSelectEnabled,showConsent:!!e.privacyNoticeEnabled&&e.privacyNoticeCheckRequired}),N0=e=>Object.values(of(e)).some(t=>t),V1=(e,t)=>{const n=[],{showEmail:r,showName:i,showPhone:o,showGroups:l,showConsent:u}=t?$0(t):of(e);return i&&n.push(R0()),r&&n.push(D0()),o&&n.push(B0()),l&&n.push(I0(e)),u?n.push(P0()):n.length>0&&(t?t!=null&&t.privacyNoticeEnabled:M0(e))&&n.push(L0()),n},q0=()=>{const e=Xe(z.AuthForm);if(!e)return null;try{return JSON.parse(e)}catch{return null}},H1=(e,t)=>{const n=q0(),r={[e]:t},i=n?{...n,...r}:r;ft({name:z.AuthForm,value:JSON.stringify(i)})},G1=()=>{Qu(z.AuthForm)},z0=()=>{var t;const e=E(Ye);return!!((t=e==null?void 0:e.variables)!=null&&t.authenticated)},j0=()=>{var e;return((e=E(Ye))==null?void 0:e.gdprApproved)||!1},Zc=()=>{const{isPreviewMode:e}=x.getOptions();if(e||E(Kv)||z0())return!1;const t=E(Ye);if(!N0(t))return!1;const{requireLogin:n}=x.getOptions(),r=E(Vt)===re.AccountStatus.Offline,i=E(jv).length>0;return!!n||r||!r&&!i},W1=async e=>{const{privacyNoticeCheckRequired:t}=x.getOptions(),n=E(Ye),r=(n==null?void 0:n.name)??e.name,i=(n==null?void 0:n.email)??e.email,o=(n==null?void 0:n.phone)??e.phone,l=e.group??(n==null?void 0:n.group),u=e.personalDataProcessingConsent,d={...r&&{name:r},...i&&{email:i},...o&&{phone:o},...l&&{group:l},...u&&t&&{personalDataProcessingConsent:u}};await he.getClient().authenticate(d),r0(),await ff(),wl()},Do=(e,t=300)=>{let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>e(...i),t)}},U0=500,V0=3e3,H0=["smartsupp.dev","smartsuppchat.loc"];var af=(e=>(e.Default="blackberry2.mp3",e))(af||{}),mt=(e=>(e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e))(mt||{}),Ni=(e=>(e.Image="image",e.Video="video",e))(Ni||{});const Ro=O(!1),Yc=O(!1),cf=O(!1);ne().addEventListener("offline",()=>Ro.set(!0));ne().addEventListener("online",()=>Ro.set(!1));const uf=M([Co,Ro,cf],([e,t,n])=>n?mt.Connected:!e||t?mt.Disconnected:mt.Connected,mt.Connecting);let wn;const Jc=Do(e=>{e&&!wn&&(wn=Qt(E(oe)("error.noInternet"),0)),!e&&wn&&(wn(),wn=void 0)},V0);uf.subscribe(e=>{e===mt.Disconnected&&(Yc.set(!0),Jc(!0)),e===mt.Connected&&(Yc.set(!1),Jc(!1))});const G0=()=>{const e=E(uf),t=E(Jl),n=E(Et);return e===mt.Disconnected||!t||n.disableAttachments},br=O(!1),K1=e=>{if(E(br)){X("There is already file upload in progress");return}if(e.length===0)return;const t=W0(e);t.length>0&&$t.add(t)},W0=e=>e.length>En?(jt(`${E(oe)("fileUpload.tooManyFiles")} ${En}`),[]):e.filter(t=>K0(t)),K0=e=>{const{acceptedFileExtensions:t,acceptedFileTypes:n,maxFileSize:r}=E(Ao);if(!e)return!1;const i=t.includes(Jv(e.name)),o=n.some(l=>l===e.type);if(G0())return X("File upload is disabled"),!1;if(!E(Jl))return jt(E(oe)("warningBar.uploadFileNotFirst")),!1;if(e.size>r){const l=Qv(r);return jt(`${E(oe)("fileUpload.fileTooBig")} ${l.size} ${l.unit}`),!1}return i||o?!0:(jt(E(oe)("fileUpload.badFileType")),!1)},X0=()=>$t.count()===0?[]:($t.setUploadingStatus(),em(E($t),e=>$t.setFileUploaded(e.name))),Z0=10,Y0=1e4,J0=3e4,Q0=20,qi={":)":"🙂",":-)":"🙂",":D":"😀",":-D":"😀",";)":"😉",";-)":"😉","<3":"❤️",":(":"😞",":-(":"😞",":P":"😛",":-P":"😛",":-o":"😮",":O":"😮",":/":"😕",":-/":"😕"},eb=e=>{const t=`(${e?"$|":""} )`;return new RegExp(Object.keys(qi).map(n=>`${n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}${t}`).join("|"),"gi")},lf=(e,t=!1)=>{const n=eb(t);return e.replace(n,r=>{const i=Object.keys(qi).find(l=>r.toUpperCase().includes(l));if(!i)return r;const o=r.endsWith(" ")?" ":"";return`${qi[i]}${o}`})},tb=e=>{if(e.length>0&&e.length%Z0===0){const t=e.slice(-10),n=new Date(e[e.length-1].createdAt).getTime();if(new Date().getTime()-n>J0||!t.every(i=>i.subType===T.MessageSubType.Contact))return!1;const r=new Date(t[0].createdAt).getTime();if(n-r<Y0)return!0}return!1},nb=e=>{const t=jl(e);return t?t.length>Q0:!1},Bo=O(),Br=O(!1),X1=O(),rb=200,sb=O(!1),Wn=M([Bo],([e])=>typeof e>"u"?Xe(z.Message)??"":e),Io=M([Wn],([e])=>e.trim().length===0),Po=e=>{Bo.set(lf(e))},Z1=(e,t)=>{const n=E(Wn)??"",r=n.slice(0,t),i=n.slice(t),o=`${r}${e}${i}`;Bo.set(o)},Y1=()=>{if(E(Br))return;he.getClient().chatTyping(!0),Br.set(!0)},ib=()=>{if(!E(Br))return;he.getClient().chatTyping(!1),Br.set(!1)},ff=async(e=[])=>{if(E(Io)&&e.length===0)return;const t=lf(E(Wn),!0).trim();await H.sendMessage(t,e),Po(""),ib(),sb.set(!0),Pl()},ob=Do(async()=>{const e=$t.count()>0;if(E(Io)&&!e)return;if(!E(be)&&Zc()&&Nt(),ab()&&!e){Qt(E(oe)("warningBar.sameMessageTwice"));return}if(tb(E(it))){Qt(E(oe)("warningBar.spamProtection"));return}if(E(br)){Ke(E(oe)("chat.fileUpload.error.stillUploading"));return}if(E(Ri)){Qt(E(oe)("card.sendingInProgress"));return}if(nb(E(Wn))){Qt(E(oe)("card.linksLimitReached"));return}if(Zc()){_o(Jr.AuthForm);return}let t=[];e&&(br.set(!0),t=await X0(),$t.clear(),br.set(!1)),await ff(t)},rb),ab=()=>{const e=E(py),t=E(Pi),n=E(Wn).trim();return e&&n===e.content.text||t&&n===t},cb=e=>{const t=()=>{Ll()};lt(()=>(e.addEventListener("visibilitychange",t),()=>e.removeEventListener("visibilitychange",t)))},ub=e=>{const t=()=>{E(be)&&Rn(!0)};lt(()=>(e.addEventListener("popstate",t),()=>e.removeEventListener("popstate",t)))},lb=()=>{const e=ne()._smartsupp||{};e.appVersion="0.0.1",e.commitHash="73644401c98550ba9806f9c0e2fde5d850f3fe71",e.commitInfo="73644401c98550ba9806f9c0e2fde5d850f3fe71 - Merge pull request #377 from smartsupp/develop - 2025-08-07 12:45:17 +0200",ne()._smartsupp=e},fb=(e=af.Default)=>{const{widgetV3Url:t}=x.getOptions(),n=new Audio(`${t}/assets/sounds/${e}`);return n.crossOrigin="anonymous",n.load(),n},db=e=>e.subType!==T.MessageSubType.Contact&&![T.MessageContentType.RateForm,T.MessageContentType.AgentJoin,T.MessageContentType.AgentLeave,T.MessageContentType.AgentAssign,T.MessageContentType.AgentUnassign].includes(e.content.type),df=e=>{he.isInitialized()&&he.getClient().notify(e)},hb=()=>{x.getOptions().isPreviewMode||df(mo.EventName.WidgetOpen)},pb=()=>df(mo.EventName.WidgetShow),hf=()=>document.visibilityState==="visible",gb=()=>{if(E(st)){zi.set(!0);const e=ne();e.history.pushState(null,"",e.location.href)}},Ie=O(!1),vb=O(!1),zi=O(!1),mb=e=>!!H0.find(t=>e.includes(t)),Ir=O(!0);x.awaitOptions().then(e=>{const t=Xe(z.SoundsEnabled);t?Ir.set(t==="true"):typeof e.enableSounds=="boolean"&&Ir.set(e.enableSounds),vb.set(mb(e.bootstrapUrl))});const J1=e=>{Ir.set(e),ft({name:z.SoundsEnabled,value:e.toString()}),e&&Xl()},pf=O(hf()),yb=Do(()=>pf.set(hf()),U0);ne().addEventListener("visibilitychange",()=>{yb()});const bb=O(0),Q1=()=>bb.update(e=>e+1),Yt=(e,t)=>(Be(`widget visible: ${String(t)} => reason: ${e}`),t&&t!==E(Ft)&&pb(),t),Lo=O(),$o=()=>Lo.set(!0),_b=()=>Lo.set(!1),wb=M([Vt,it,Io,Bl],([e,t,n,r])=>{const{hideOfflineChat:i,isPreviewMode:o}=x.getOptions();return e===re.AccountStatus.Offline&&!!i&&sy(t).length===0&&n&&!r&&!o}),Ft=M([Ye,st,Lo,Je,Bl,wb],([e,t,n,r,i,o])=>{const{hideMobileWidget:l,hideWidget:u}=x.getOptions();return e!=null&&e.bannedAt?Yt("visitor is banned",!1):t&&l?Yt("option 'hideMobileWidget' is true",!1):typeof n=="boolean"?Yt("set by API command",n):r&&!i?Yt("chat status is not pending",!0):o?Yt("option 'hideOfflineChat' is true",!1):Yt(`option 'hideWidget' is ${String(u)}`,!u)}),Cb=M([st],([e])=>{const{openOnTrigger:t}=x.getOptions();return t&&!e}),be=il(z.IsMessengerFrameOpened,!1,e=>!E(st)&&e==="true"),Nt=()=>{gb(),be.set(!0),kb(),b0(),hb()},Rn=e=>{if(E(st)&&E(zi)&&!e)return zi.set(!1),ne().history.back();G.emit("messengerClose",!0),be.set(!1)},eA=e=>{if(!e)return;const{widgetBlockingOptions:t}=x.getOptions(),n=r=>{if(r.key===rf.Escape){if(t!=null&&t.disableCloseButton)return;Rn()}};return e.addEventListener("keydown",n),{destroy(){e.removeEventListener("keydown",n)}}},Ab=M([Ie,Ft,be],([e,t,n])=>e&&t&&n);function Eb(){const e=O(!1),{subscribe:t}=e;let n=null;return{subscribe:t,handleDragOver:(o,l=!0)=>{l&&o.preventDefault(),E(e)||e.set(!0),n&&clearTimeout(n),n=window.setTimeout(()=>{e.set(!1)},200)},handleDrop:o=>{var u;o.preventDefault(),n&&clearTimeout(n),e.set(!1);const l=(u=o.dataTransfer)!=null&&u.files?[...o.dataTransfer.files]:[];return l.length===0&&Qt("Dropped item(s) are not processable files"),{droppedFiles:l}}}}const tA=Eb(),Fb=M([Ie,Ft,be],([e,t,n])=>e&&t&&!n),No=O(!1),is=O(!1),Sb=()=>{No.set(!0),is.set(!1)},gf=()=>{is.set(!0),No.set(!1)},kb=(e=!1)=>{is.set(!1),e&&ft({name:z.PopupClosedAt,value:new Date().toISOString()})},vf=M([st],([e])=>{const{mobilePopupsEnabled:t}=x.getOptions();return e?!!t:!0}),xb=M([Zl],([e])=>{const t=Xe(z.PopupClosedAt)??null;if(!t||!e)return!0;const n=new Date(e.createdAt).getTime(),r=new Date(t).getTime();return n>r}),Tb=M([Ie,Ft,No,be,vf],([e,t,n,r,i])=>e&&t&&n&&!r&&i),Ob=M([Ie,Ft,is,be,Zl,xb,vf,Bi],([e,t,n,r,i,o,l,u])=>e&&t&&n&&i&&o&&!r&&l&&!u),Bn={white:"#ffffff",slate300:"#cbd5e1",slate900:"#0f172a",smartsuppBlue:"#1233df"};function le(e,t){Mb(e)&&(e="100%");const n=Db(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function dr(e){return Math.min(1,Math.max(0,e))}function Mb(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Db(e){return typeof e=="string"&&e.indexOf("%")!==-1}function mf(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function hr(e){return Number(e)<=1?`${Number(e)*100}%`:e}function qt(e){return e.length===1?"0"+e:String(e)}function Rb(e,t,n){return{r:le(e,255)*255,g:le(t,255)*255,b:le(n,255)*255}}function Qc(e,t,n){e=le(e,255),t=le(t,255),n=le(n,255);const r=Math.max(e,t,n),i=Math.min(e,t,n);let o=0,l=0;const u=(r+i)/2;if(r===i)l=0,o=0;else{const d=r-i;switch(l=u>.5?d/(2-r-i):d/(r+i),r){case e:o=(t-n)/d+(t<n?6:0);break;case t:o=(n-e)/d+2;break;case n:o=(e-t)/d+4;break}o/=6}return{h:o,s:l,l:u}}function fi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Bb(e,t,n){let r,i,o;if(e=le(e,360),t=le(t,100),n=le(n,100),t===0)i=n,o=n,r=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;r=fi(u,l,e+1/3),i=fi(u,l,e),o=fi(u,l,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function eu(e,t,n){e=le(e,255),t=le(t,255),n=le(n,255);const r=Math.max(e,t,n),i=Math.min(e,t,n);let o=0;const l=r,u=r-i,d=r===0?0:u/r;if(r===i)o=0;else{switch(r){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4;break}o/=6}return{h:o,s:d,v:l}}function Ib(e,t,n){e=le(e,360)*6,t=le(t,100),n=le(n,100);const r=Math.floor(e),i=e-r,o=n*(1-t),l=n*(1-i*t),u=n*(1-(1-i)*t),d=r%6,c=[n,l,o,o,u,n][d],a=[u,n,n,l,o,o][d],s=[o,o,u,n,n,l][d];return{r:c*255,g:a*255,b:s*255}}function tu(e,t,n,r){const i=[qt(Math.round(e).toString(16)),qt(Math.round(t).toString(16)),qt(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Pb(e,t,n,r,i){const o=[qt(Math.round(e).toString(16)),qt(Math.round(t).toString(16)),qt(Math.round(n).toString(16)),qt($b(r))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Lb(e,t,n,r){const i=e/100,o=t/100,l=n/100,u=r/100,d=255*(1-i)*(1-u),c=255*(1-o)*(1-u),a=255*(1-l)*(1-u);return{r:d,g:c,b:a}}function nu(e,t,n){let r=1-e/255,i=1-t/255,o=1-n/255,l=Math.min(r,i,o);return l===1?(r=0,i=0,o=0):(r=(r-l)/(1-l)*100,i=(i-l)/(1-l)*100,o=(o-l)/(1-l)*100),l*=100,{c:Math.round(r),m:Math.round(i),y:Math.round(o),k:Math.round(l)}}function $b(e){return Math.round(parseFloat(e)*255).toString(16)}function ru(e){return Te(e)/255}function Te(e){return parseInt(e,16)}function Nb(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}const ji={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function qb(e){let t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,l=!1,u=!1;return typeof e=="string"&&(e=Ub(e)),typeof e=="object"&&(ke(e.r)&&ke(e.g)&&ke(e.b)?(t=Rb(e.r,e.g,e.b),l=!0,u=String(e.r).substr(-1)==="%"?"prgb":"rgb"):ke(e.h)&&ke(e.s)&&ke(e.v)?(r=hr(e.s),i=hr(e.v),t=Ib(e.h,r,i),l=!0,u="hsv"):ke(e.h)&&ke(e.s)&&ke(e.l)?(r=hr(e.s),o=hr(e.l),t=Bb(e.h,r,o),l=!0,u="hsl"):ke(e.c)&&ke(e.m)&&ke(e.y)&&ke(e.k)&&(t=Lb(e.c,e.m,e.y,e.k),l=!0,u="cmyk"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=mf(n),{ok:l,format:e.format||u,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}const zb="[-\\+]?\\d+%?",jb="[-\\+]?\\d*\\.\\d+%?",yt="(?:"+jb+")|(?:"+zb+")",di="[\\s|\\(]+("+yt+")[,|\\s]+("+yt+")[,|\\s]+("+yt+")\\s*\\)?",pr="[\\s|\\(]+("+yt+")[,|\\s]+("+yt+")[,|\\s]+("+yt+")[,|\\s]+("+yt+")\\s*\\)?",Pe={CSS_UNIT:new RegExp(yt),rgb:new RegExp("rgb"+di),rgba:new RegExp("rgba"+pr),hsl:new RegExp("hsl"+di),hsla:new RegExp("hsla"+pr),hsv:new RegExp("hsv"+di),hsva:new RegExp("hsva"+pr),cmyk:new RegExp("cmyk"+pr),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Ub(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(ji[e])e=ji[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let n=Pe.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Pe.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Pe.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=Pe.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Pe.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=Pe.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Pe.cmyk.exec(e),n?{c:n[1],m:n[2],y:n[3],k:n[4]}:(n=Pe.hex8.exec(e),n?{r:Te(n[1]),g:Te(n[2]),b:Te(n[3]),a:ru(n[4]),format:t?"name":"hex8"}:(n=Pe.hex6.exec(e),n?{r:Te(n[1]),g:Te(n[2]),b:Te(n[3]),format:t?"name":"hex"}:(n=Pe.hex4.exec(e),n?{r:Te(n[1]+n[1]),g:Te(n[2]+n[2]),b:Te(n[3]+n[3]),a:ru(n[4]+n[4]),format:t?"name":"hex8"}:(n=Pe.hex3.exec(e),n?{r:Te(n[1]+n[1]),g:Te(n[2]+n[2]),b:Te(n[3]+n[3]),format:t?"name":"hex"}:!1))))))))))}function ke(e){return typeof e=="number"?!Number.isNaN(e):Pe.CSS_UNIT.test(e)}class V{constructor(t="",n={}){if(t instanceof V)return t;typeof t=="number"&&(t=Nb(t)),this.originalInput=t;const r=qb(t);this.originalInput=t,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=n.format??r.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){const t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3}getLuminance(){const t=this.toRgb();let n,r,i;const o=t.r/255,l=t.g/255,u=t.b/255;return o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),l<=.03928?r=l/12.92:r=Math.pow((l+.055)/1.055,2.4),u<=.03928?i=u/12.92:i=Math.pow((u+.055)/1.055,2.4),.2126*n+.7152*r+.0722*i}getAlpha(){return this.a}setAlpha(t){return this.a=mf(t),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){const{s:t}=this.toHsl();return t===0}toHsv(){const t=eu(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=eu(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?`hsv(${n}, ${r}%, ${i}%)`:`hsva(${n}, ${r}%, ${i}%, ${this.roundA})`}toHsl(){const t=Qc(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=Qc(this.r,this.g,this.b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?`hsl(${n}, ${r}%, ${i}%)`:`hsla(${n}, ${r}%, ${i}%, ${this.roundA})`}toHex(t=!1){return tu(this.r,this.g,this.b,t)}toHexString(t=!1){return"#"+this.toHex(t)}toHex8(t=!1){return Pb(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return"#"+this.toHex8(t)}toHexShortString(t=!1){return this.a===1?this.toHexString(t):this.toHex8String(t)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){const t=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?`rgb(${t}, ${n}, ${r})`:`rgba(${t}, ${n}, ${r}, ${this.roundA})`}toPercentageRgb(){const t=n=>`${Math.round(le(n,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=n=>Math.round(le(n,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toCmyk(){return{...nu(this.r,this.g,this.b)}}toCmykString(){const{c:t,m:n,y:r,k:i}=nu(this.r,this.g,this.b);return`cmyk(${t}, ${n}, ${r}, ${i})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const t="#"+tu(this.r,this.g,this.b,!1);for(const[n,r]of Object.entries(ji))if(t===r)return n;return!1}toString(t){const n=!!t;t=t??this.format;let r=!1;const i=this.a<1&&this.a>=0;return!n&&i&&(t.startsWith("hex")||t==="name")?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),t==="cmyk"&&(r=this.toCmykString()),r||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new V(this.toString())}lighten(t=10){const n=this.toHsl();return n.l+=t/100,n.l=dr(n.l),new V(n)}brighten(t=10){const n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new V(n)}darken(t=10){const n=this.toHsl();return n.l-=t/100,n.l=dr(n.l),new V(n)}tint(t=10){return this.mix("white",t)}shade(t=10){return this.mix("black",t)}desaturate(t=10){const n=this.toHsl();return n.s-=t/100,n.s=dr(n.s),new V(n)}saturate(t=10){const n=this.toHsl();return n.s+=t/100,n.s=dr(n.s),new V(n)}greyscale(){return this.desaturate(100)}spin(t){const n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new V(n)}mix(t,n=50){const r=this.toRgb(),i=new V(t).toRgb(),o=n/100,l={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return new V(l)}analogous(t=6,n=30){const r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(new V(r));return o}complement(){const t=this.toHsl();return t.h=(t.h+180)%360,new V(t)}monochromatic(t=6){const n=this.toHsv(),{h:r}=n,{s:i}=n;let{v:o}=n;const l=[],u=1/t;for(;t--;)l.push(new V({h:r,s:i,v:o})),o=(o+u)%1;return l}splitcomplement(){const t=this.toHsl(),{h:n}=t;return[this,new V({h:(n+72)%360,s:t.s,l:t.l}),new V({h:(n+216)%360,s:t.s,l:t.l})]}onBackground(t){const n=this.toRgb(),r=new V(t).toRgb(),i=n.a+r.a*(1-n.a);return new V({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(t){const n=this.toHsl(),{h:r}=n,i=[this],o=360/t;for(let l=1;l<t;l++)i.push(new V({h:(r+l*o)%360,s:n.s,l:n.l}));return i}equals(t){const n=new V(t);return this.format==="cmyk"||n.format==="cmyk"?this.toCmykString()===n.toCmykString():this.toRgbString()===n.toRgbString()}}const Vb=.299,Hb=.587,Gb=.114,Wb=180,Kb=-20,Xb=-.25,Zb=.2,Yb=-5,Jb=.03,Qb=.5,su=5,_r=(e,t)=>new V(e).darken(t).toHexString(),e_=e=>{const t=new V(e).toRgb();return`${t.r}, ${t.g}, ${t.b}`},Pr=e=>/^#[0-9A-F]{6}$/i.test(e),os=e=>{const{r:t,g:n,b:r}=new V(e).toRgb();return Math.sqrt(Vb*(t*t)+Hb*(n*n)+Gb*(r*r))>Wb},t_=e=>{const t=new V(e),{s:n,l:r}=t.toHsl();return t.spin(Kb).desaturate(n*Xb).lighten(r*Zb).toHexString()},n_=(e,t=Qb)=>{const n=new V(e),{s:r,l:i}=n.toHsl();return n.spin(Yb).saturate(r*Jb).darken(i*t).toHexString()},r_=e=>{const{color:t,color2:n,colorGradient:r}=e;return r?n?{from:t,to:n}:os(t)?{from:t,to:n_(t)}:{from:t,to:t_(t)}:{from:t,to:t}},s_=e=>os(e)?Bn.slate900:Bn.white,i_=e=>os(e)?.1:.2,o_=e=>{if(os(e)){const t=new V(e).getLuminance();return t>.8?_r(e,Math.pow(10*t,t)):e}return e},xe=(e,t,n)=>{e.documentElement.style.setProperty(t,n)},a_=(e,t)=>{const{color:n}=t,r=r_(t),i=r.from==="#ffffff"&&r.from===r.to?{from:Bn.slate300,to:Bn.slate300}:r,o=s_(n);xe(e,"--color-primary",n),xe(e,"--color-primary-content",o),xe(e,"--color-primary-content-rgb",e_(o)),xe(e,"--color-primary-gradient-from",r.from),xe(e,"--color-primary-gradient-to",r.to),xe(e,"--color-primary-gradient-button-from",i.from),xe(e,"--color-primary-gradient-button-to",i.to),xe(e,"--color-primary-gradient-hover-from",_r(r.from,su)),xe(e,"--color-primary-gradient-hover-to",_r(r.to,su));const l=o_(n);xe(e,"--color-primary-button",l),xe(e,"--color-primary-button-hover",_r(l,10)),xe(e,"--color-primary-button-content",o),xe(e,"--opacity-primary-content",String(i_(n)))},c_=()=>{const e=O({color:Bn.smartsuppBlue,color2:null,colorGradient:!0}),{subscribe:t,set:n}=e;return{subscribe:t,setThemeColor:i=>{const{color:o,color2:l,colorGradient:u}=i;if(Pr(o)){if(u&&l&&!Pr(l)){X(`Provided color '${l}' is not valid. Default color will be used instead.`);return}}else{X(`Provided color '${o}' is not valid. Default color will be used instead.`);return}n({color:o,color2:l,colorGradient:u})}}},qo=c_(),yf=24,bf=12,u_=300,_f=56,wf=_f,l_=166,f_=wf+16,d_=380,h_=672,p_=12,g_=560,v_=840,m_=114,y_=68,nA=M([ol],([e])=>e?y_:m_),qe=e=>`${e}px`,Cf=e=>{if(e)return Ut(e)?parseInt(e,10):e},b_=(e,t)=>{const{widgetBlockingOptions:n}=x.getOptions();return e||n!=null&&n.headlessMode?{width:"100%",height:"100%"}:t?{width:g_,height:v_}:{width:d_,height:h_}},__=e=>{const{widgetBlockingOptions:t}=x.getOptions();e.style.borderRadius=qe(p_),t!=null&&t.headlessMode?e.style.boxShadow="none":t!=null&&t.limitShadow?e.style.boxShadow="rgba(0, 0, 0, 0.25) 0px 5px 12px":e.style.boxShadow="rgba(0, 0, 0, 0.16) 0px 5px 40px"},Af=()=>{const{offsetY:e}=x.getOptions();return Cf(e)??yf},Ef=()=>{const{offsetX:e}=x.getOptions();return Cf(e)??bf},w_=e=>{const{widgetBlockingOptions:t}=x.getOptions();return e||t!=null&&t.headlessMode?0:yf},C_=e=>{const{widgetBlockingOptions:t}=x.getOptions();return e||t!=null&&t.headlessMode?0:bf},zo=()=>{const{position:e}=x.getOptions();return e==="fixed"},jo=e=>{zo()&&(e.style.position="fixed")},as=(e,t)=>{zo()&&(e.style.bottom=qe(t))},cs=(e,t)=>{if(zo()){const{orientation:n}=x.getOptions();n==="right"?(e.style.left="initial",e.style.right=qe(t)):(e.style.left=qe(t),e.style.right="initial")}},us=e=>{const{zIndex:t}=x.getOptions();e.style.zIndex=String(t??"auto")},Kn=e=>{const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.border="none",t.style.display="block",t.style.textAlign="left",t.style.margin="0",t.style.padding="0",t.style.top="0",t.style.left="0",t.style.opacity="1",e&&e(t),t.getAttribute("style")??""},A_=e=>{jo(e),as(e,Af()),cs(e,Ef()),us(e)},E_=(e,t)=>{jo(e),as(e,w_(t)),cs(e,C_(t)),us(e),t||__(e)},Ff=e=>{jo(e),as(e,Af()+f_),cs(e,Ef()),us(e)},F_=e=>{e.style.position="fixed",e.style.width="100%",e.style.height="100%",as(e,0),cs(e,0),us(e)},hi=e=>{A_(e)},pi=(e,t)=>{E_(e,t)},gi=e=>{Ff(e)},vi=e=>{Ff(e)},mi=e=>{F_(e)},Sf=O(u_),S_=O(l_),k_=O(!1),kf=O(void 0),Uo=M([st,kf],([e,t])=>{const{buttonStyle:n}=x.getOptions();return t?t==="bubble":e||n==="bubble"}),x_=M([Uo,Sf],([e,t])=>e?_f:t),xf=O(),T_=M([xf],([e])=>typeof e>"u"?Xe(z.IsMessengerFrameExpanded)==="true":e),rA=e=>{ft({name:z.IsMessengerFrameExpanded,value:e.toString()}),xf.set(e)};var L=(e=>(e.Name="name",e.Group="group",e.Email="email",e.Phone="phone",e.Variables="variables",e.ContactData="contactData",e.Language="language",e.ChatClose="chat:close",e.ChatOpen="chat:open",e.ChatShow="chat:show",e.ChatHide="chat:hide",e.ThemeColor="theme:color",e.ChatMessage="chat:message",e.ChatSend="chat:send",e.HtmlApply="html:apply",e.On="on",e.AnalyticsConsent="analyticsConsent",e.MarketingConsent="marketingConsent",e.OpenRateForm="openRateForm",e.OpenAuthForm="openAuthForm",e.WidgetStatus="widgetStatus",e.Translations="translations",e.AuthFormFields="authFormFields",e.ButtonStyle="buttonStyle",e.PreviewTranslate="previewTranslate",e.DisableConnectionStatus="disableConnectionStatus",e.ReloadWithMockData="reloadWithMockData",e.Reload="reload",e))(L||{}),en=(e=>(e.MessageSent="message_sent",e.MessageReceived="message_received",e.MessengerClose="messenger_close",e.WidgetInit="widget_init",e))(en||{});const O_=e=>{G.on("messageSent",e)},M_=e=>{G.on("messageReceived",e)},D_=e=>{G.on("messengerClose",e)},R_=e=>{G.on("widgetInit",e)},B_={[en.MessageSent]:O_,[en.MessageReceived]:M_,[en.MessengerClose]:D_,[en.WidgetInit]:R_},I_=(e,t)=>{const n=B_[e];n&&n(t)},St="https://docs.smartsupp.com/chat-box/",P_=`${St}localization/#supported-languages`,L_=`${St}visitor-identification/#custom-visitor-data`,$_=`${St}visitor-identification/#custom-contact-data`,N_=`${St}javascript-api/events/`,q_="https://www.smartsupp.com/help/cookie-consent/#where-to-enable-cookie-consent-in-smartsupp",Tf="https://www.smartsupp.com/pricing",Vo=O({}),wr=(e,t)=>{Vo.update(n=>({...n,[e]:t}))},z_=e=>Object.values(L).some(t=>t===e),dt=(e,t)=>Ut(t)?!0:(X(`Parameter of '${e}' API command must be type string. See ${St} for more information.`),!1),Xn=(e,t)=>Ml(t)?!0:(X(`Parameter of '${e}' API command must be type boolean. See ${St} for more information.`),!1),j_=(e,t)=>typeof t!="function"?(X(`Parameter of '${e}' API command must be type function. See ${St} for more information.`),!1):!0,ls=(e,t)=>es(t)?!0:(X(`Parameter of '${e}' API command must be type object. See ${L_} for more information.`),!1),U_=(e,t)=>es(t)?!0:(X(`Parameter of '${e}' API command must be type object. See ${$_} for more information.`),!1),V_=(e,t)=>es(t)?!0:(X(`Parameter of '${e}' API command must be type object.`),!1),H_=(e,t)=>{const n=Object.values(en);return n.includes(t)?!0:(X(`Unknown event: '${t}'. Available event names are: ${n.join(", ")}. See ${N_} for more information.`),!1)},Of=e=>{X(`Unknown API command: '${e}'. See ${St} to check available API commands.`)},Mf=()=>{var e;return!!((e=x.getOptions().features)!=null&&e.api)},G_=()=>{var e;return!!((e=x.getOptions().features)!=null&&e.groups)},W_=()=>x.getOptions().isPreviewMode,Wt=()=>!Mf()&&!W_()?(X(`Chat box API feature is not enabled. See ${Tf} to upgrade your package.`),!1):!0,K_=()=>!Mf()||!G_()?(X(`Chat box Groups feature is not enabled. See ${Tf} to upgrade your package.`),!1):!0,Df=()=>{ao()||X(`Enable managing cookie consent in widget settings to allow this command. See ${q_} for more information.`)},X_=()=>{const e=()=>{Nt(),$o()};if(!E(Ie)){Vn.push(e);return}e()},Z_=()=>{if(Wt()){if(!E(Ie)){Vn.push(Rn);return}Rn()}},Y_=()=>{Wt()&&$o()},J_=()=>{Wt()&&_b()},Q_=(e,t)=>{if(Wt()&&e===L.Language&&dt(e,t)){if(!xl(t)){X(`Provided language '${t}' is not supported. See ${P_} to check supported languages.`);return}if(!E(Ie)){wr("lang",t);return}Zg(t)}},ew=(e,t)=>{let n,r=null,i=!0;if(Wt()){if(typeof t=="string"&&dt(e,t))n=t;else if(ls(e,t)){if(n=t.color,r=t.color2,i=t.colorGradient,!Xn(e,i))return}else return;if(Pr(n)){if(i&&r&&!Pr(r)){X(`Provided color '${r}' is not valid. Default color will be used instead.`);return}}else{X(`Provided color '${n}' is not valid. Please use hex color code.`);return}qo.setThemeColor({color:n,color2:r,colorGradient:i})}},tw=(e,t)=>{Wt()&&dt(e,t)&&Po(t)},nw=(e,t)=>{Wt()&&dt(e,t)&&(Po(t),ob())},rw=(e,t,n)=>{dt(e,t)&&H_(e,t)&&j_(e,n)&&I_(t,n)},sw=(e,t)=>{ls(e,t)&&Ye.updateVisitorVariables($v(t))},Cr=(e,t)=>{e!==L.Name&&e!==L.Email&&e!==L.Phone&&e!==L.Group||dt(e,t)&&Ye.updateVisitorProperty(e,t)},iw=(e,t)=>{if(!K_()||!dt(e,t))return;const n=E(wo)[t];if(E(Ie)&&!n){X(`Group with key '${t}' does not exist. Please provide correct group key from your group settings.`);return}Cr(e,t)},ow=(e,t)=>{U_(e,t)&&Ye.updateVisitorContactData(t)},aw=(e,t)=>{Xn(e,t)&&(Df(),G.emit("analyticsConsentChanged",!!t))},cw=(e,t)=>{Xn(e,t)&&(Df(),G.emit("marketingConsentChanged",!!t))},uw=()=>{To(E(xo)||"")},lw=()=>{_o(Jr.AuthForm)},fw=(e,t)=>{dt(e,t)&&(t!==re.AccountStatus.Online&&t!==re.AccountStatus.Offline||Vt.set(t))},dw=(e,t)=>{ls(e,t)&&Jg(t)},hw=(e,t)=>{ls(e,t)&&(E(li)||li.set(x.getOptions()),li.update(n=>({...n,...t})))},pw=(e,t)=>{dt(e,t)&&kf.set(t)},gw=()=>{let e=()=>{};e=Un.subscribe(()=>{E(it).forEach(t=>{var r;const n=((r=t.content)==null?void 0:r.data)||"";typeof n=="string"&&n.match(/widgetPreview\..*/)&&(t.content.text=E(oe)(n),H.replaceMessage(t))}),e()})},vw=(e,t)=>{Xn(e,t)&&cf.set(t)},mw=(e,t)=>{V_(e,t)&&he.reloadClient(t)},yw=(e,t)=>{Xn(e,t)&&he.reloadClient(void 0,t)},bw={version:"73644401c98550ba9806f9c0e2fde5d850f3fe71",execute:e=>{const t=e[0];if(typeof t=="function"){Cw(t);return}if(!z_(t)){Of(String(t));return}ww(t,e[1],...e.slice(2))},exec:function(...e){this.execute(e)}},_w={[L.ChatOpen]:X_,[L.ChatClose]:Z_,[L.ChatShow]:Y_,[L.ChatHide]:J_,[L.ChatMessage]:tw,[L.ChatSend]:nw,[L.Language]:Q_,[L.ThemeColor]:ew,[L.On]:rw,[L.Variables]:sw,[L.ContactData]:ow,[L.Name]:Cr,[L.Group]:iw,[L.Email]:Cr,[L.Phone]:Cr,[L.AnalyticsConsent]:aw,[L.MarketingConsent]:cw,[L.HtmlApply]:null,[L.OpenRateForm]:uw,[L.OpenAuthForm]:lw,[L.WidgetStatus]:fw,[L.Translations]:dw,[L.AuthFormFields]:hw,[L.ButtonStyle]:pw,[L.PreviewTranslate]:gw,[L.DisableConnectionStatus]:vw,[L.ReloadWithMockData]:mw,[L.Reload]:yw},ww=(e,t,...n)=>{const r=_w[e];if(r===void 0){Of(e);return}r!==null&&(r(e,t,...n),Be(`🧙‍♂️[API] ${e}${t?":":""}`,t??""))},Cw=e=>{E(Ie)?e():Vn.push(e)},Aw="5";var au;typeof window<"u"&&((au=window.__svelte??(window.__svelte={})).v??(au.v=new Set)).add(Aw);var Ew=Z("<div><!></div>");function Fw(e,t){ae(t,!0);let n=te(null);const r=`${ne().SMARTSUPP_AUTOCREATE!==!1?"smartsupp":so(window).id}-widget-container`;lt(()=>{k(n)&&Lt().body.appendChild(k(n))}),Xu(()=>{var l;(l=Lt().getElementById(r))==null||l.remove()});var i=Ew();K(i,"id",r);var o=R(i);Tr(o,()=>t.children??de),pn(i,l=>$(n,l),()=>k(n)),I(e,i),ce()}const Sw=e=>e;function Ho(e){const t=e-1;return t*t*t+1}function iu(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function kw(e,{delay:t=0,duration:n=400,easing:r=Sw}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function Ze(e,{delay:t=0,duration:n=400,easing:r=Ho,x:i=0,y:o=0,opacity:l=0}={}){const u=getComputedStyle(e),d=+u.opacity,c=u.transform==="none"?"":u.transform,a=d*(1-l),[s,f]=iu(i),[h,p]=iu(o);return{delay:t,duration:n,easing:r,css:(v,g)=>`
			transform: ${c} translate(${(1-v)*s}${f}, ${(1-v)*h}${p});
			opacity: ${d-a*g}`}}function sA(e,{delay:t=0,duration:n=400,easing:r=Ho,axis:i="y"}={}){const o=getComputedStyle(e),l=+o.opacity,u=i==="y"?"height":"width",d=parseFloat(o[u]),c=i==="y"?["top","bottom"]:["left","right"],a=c.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),s=parseFloat(o[`padding${a[0]}`]),f=parseFloat(o[`padding${a[1]}`]),h=parseFloat(o[`margin${a[0]}`]),p=parseFloat(o[`margin${a[1]}`]),v=parseFloat(o[`border${a[0]}Width`]),g=parseFloat(o[`border${a[1]}Width`]);return{delay:t,duration:n,easing:r,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*l};${u}: ${m*d}px;padding-${c[0]}: ${m*s}px;padding-${c[1]}: ${m*f}px;margin-${c[0]}: ${m*h}px;margin-${c[1]}: ${m*p}px;border-${c[0]}-width: ${m*v}px;border-${c[1]}-width: ${m*g}px;min-${u}: 0`}}function Go(e,{delay:t=0,duration:n=400,easing:r=Ho,start:i=0,opacity:o=0}={}){const l=getComputedStyle(e),u=+l.opacity,d=l.transform==="none"?"":l.transform,c=1-i,a=u*(1-o);return{delay:t,duration:n,easing:r,css:(s,f)=>`
			transform: ${d} scale(${1-c*f});
			opacity: ${u-a*f}
		`}}var xw=Z('<iframe allowfullscreen="" scrolling="no"></iframe>');function Zn(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(qo,"$themeColor",n);let o=te(void 0),l=te(null),u;nt(()=>{k(l)&&d(k(l))}),nt(()=>{k(l)&&c(i())});const d=async p=>{u&&await ra(u),p&&t.component&&(u=ju(t.component,{target:p.body}))},c=p=>{k(l)&&a_(k(l),p)},a=p=>{if(!k(l))return;const v=k(l).createElement("style");return v.textContent=p,k(l).head.appendChild(v),v},s=()=>{for(const p of window.document.styleSheets){let v="";try{v=[...p.cssRules].map(m=>m.cssText).join("")}catch{continue}if(!a(v))return}},f=()=>{!k(o)||!k(o).contentDocument||($(l,k(o).contentDocument,!0),s())};lt(async()=>{var p,v;await Td(),(p=k(o))!=null&&p.contentDocument&&k(o).contentDocument.readyState==="complete"&&k(o).contentDocument.defaultView?f():(v=k(o))==null||v.addEventListener("load",f)}),Xu(async()=>{k(o)&&k(o).removeEventListener("load",f),u&&await ra(u)});var h=xw();pn(h,p=>$(o,p),()=>k(o)),ie(()=>{K(h,"id",t.id),K(h,"title",t.title),$e(h,t.frameStyle)}),I(e,h),ce(),r()}Qf();var Tw=zu('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" fill="currentColor" preserveAspectRatio="xMidYMid meet"><path d="M63.113,18.51v-.16C60.323,7.05,44.582,3,31.972,3S3.582,7,.792,18.5a66.22,66.22,0,0,0,0,20.46c1.18,4.74,5.05,8.63,11.36,11.41l-4,5A3.47,3.47,0,0,0,10.882,61a3.39,3.39,0,0,0,1.44-.31L26.862,54c1.79.18,3.49.27,5.07.27,11.04.04,28.41-4.04,31.18-15.43a60.33,60.33,0,0,0,0-20.33Z"></path></svg>');function Ow(e,t){let n=De(t,"iconSize",3,16);var r=Tw();ie(()=>{K(r,"width",n()),K(r,"height",n())}),I(e,r)}function Mw(e,t){ae(t,!0);let n=te(!1);lt(()=>{$(n,!0)});var r=Me(),i=_e(r);{var o=l=>{var u=Me(),d=_e(u);Tr(d,()=>t.children??de),I(l,u)};Ce(i,l=>{k(n)&&l(o)})}I(e,r),ce()}var Dw=Z('<div class="transform transition-transform duration-300 group-hover:scale-115"><!></div>');function Rf(e){Mw(e,{children:(t,n)=>{var r=Dw(),i=R(r);Ow(i,{iconSize:24}),ye(3,r,()=>Go,()=>({delay:200,duration:300,start:.6,opacity:.8})),I(t,r)},$$slots:{default:!0}})}var Rw=Z('<div class="p-1"><div class="flex-center w-12 h-12 bg-white bg-opacity-10 rounded-full"><!></div></div>');function Bw(e){var t=Rw(),n=R(t),r=R(n);Rf(r),I(e,t)}var Iw=Z('<div class="flex"><div class="flex-center whitespace-nowrap pl-4 pr-1"> </div> <!></div>');function Pw(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(oe,"$t",n);let o=Xi();lt(()=>{const a=Math.ceil(k(o).getBoundingClientRect().width);Sf.set(a)}),zn();var l=Iw(),u=R(l),d=R(u),c=j(u,2);Bw(c),pn(l,a=>$(o,a),()=>k(o)),ie(a=>{K(u,"data-testid",Ee.widgetButtonText),Hr(d,a)},[()=>i()("button.greeting")],rn),I(e,l),ce(),r()}var Lw=Z('<div id="widget-online-badge" class="absolute left-0 bottom-0 w-2 h-2 p-1.5 bg-green-400 rounded-full border-2 border-white"></div>');function $w(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(Wv,"$isWidgetOnline",n);zn();var o=Me(),l=_e(o);{var u=d=>{var c=Lw();ie(()=>K(c,"data-testid",Ee.widgetOnlineBadge)),ye(3,c,()=>Go),I(d,c)};Ce(l,d=>{i()&&d(u)})}I(e,o),ce(),r()}var Nw=Z('<div id="widget-unread-messages-badge" class="absolute right-0 top-0 min-w-5 h-5 flex-center px-1 text-white bg-red-600 text-xs rounded-full shadow"> </div>');function qw(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(Yl,"$unreadMessagesCount",n);let o=Ge(()=>i()>0);var l=Me(),u=_e(l);{var d=c=>{var a=Nw(),s=R(a);ie(()=>{K(a,"data-testid",Ee.widgetUnreadMessagesBadge),Hr(s,i()>99?"99+":i())}),ye(3,a,()=>Go),I(c,a)};Ce(u,c=>{k(o)&&c(d)})}I(e,l),ce(),r()}var zw=Z('<div class="h-full w-full relative flex justify-end border-rounded-full"><div role="button" class="group flex-center w-full bg-primary-gradient bg-primary-gradient-hover text-primary-content rounded-full overflow-hidden cursor-pointer content-focus"><!> <!></div> <!></div>');function jw(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(oe,"$t",n),o=()=>W(Uo,"$isWidgetButtonBubble",n);zn();var l=zw(),u=R(l);K(u,"tabindex",0),u.__click=function(...h){Nt==null||Nt.apply(this,h)};var d=R(u);{var c=h=>{Rf(h)},a=h=>{Pw(h,{})};Ce(d,h=>{o()?h(c):h(a,!1)})}var s=j(d,2);$w(s,{});var f=j(u,2);qw(f,{}),ie(h=>{K(u,"aria-label",h),K(u,"data-testid",Ee.widgetButton)},[()=>i()("ariaLabel.openChat")],rn),vr("keypress",u,h=>h.key===rf.Enter&&Nt()),I(e,l),ce(),r()}Vr(["click"]);var Uw=Z("<div><!></div>");function Vw(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(x_,"$buttonFrameWidth",n),o=()=>W(Fb,"$shouldRenderButtonFrame",n),l=()=>W(Uo,"$isWidgetButtonBubble",n),u=()=>W(oe,"$t",n);let d=te(void 0);const c=p=>{k(d)&&(k(d).style.width=`${p}px`)},{widgetBlockingOptions:a}=x.getOptions();nt(()=>{k(d)&&c(i())});var s=Me(),f=_e(s);{var h=p=>{var v=Uw();let g;var m=R(v);zd(m,()=>l()||u(),y=>{const b=Ge(Kn);Zn(y,{component:jw,get id(){return Ee.widgetButtonFrame},title:"Smartsupp widget button",get frameStyle(){return k(b)}})}),pn(v,y=>$(d,y),()=>k(d)),qn(v,y=>hi==null?void 0:hi(y)),ie(y=>{g=$e(v,`border-radius: 9999px; box-shadow: rgb(0 0 0 / 6%) 0px 1px 6px, rgb(0 0 0 / ${a!=null&&a.limitShadow?"20%) 0px 2px 12px":"12%) 0px 2px 32px"}; color-scheme: normal;`,g,{height:y}),K(v,"data-testid",Ee.widgetButtonFrame)},[()=>qe(wf)]),ye(1,v,()=>Ze,()=>({y:20,delay:150,duration:300})),ye(2,v,()=>kw,()=>({duration:250})),I(p,v)};Ce(f,p=>{o()&&p(h)})}I(e,s),ce(),r()}var Hw=Z("<div></div>");function Qe(e,t){ae(t,!0);let n=De(t,"height",3,20),r=De(t,"width",3,"100%"),i=De(t,"colorScheme",3,"gray");const l=`${De(t,"roundedStyle",3,"rounded-full")()} animate-pulse`;var u=Hw();let d;ie((c,a)=>{_t(u,1,On([l,i()==="gray"&&"bg-gray-200",i()==="darkGray"&&"bg-gray-300"])),d=$e(u,"",d,{height:c,width:a})},[()=>qe(n()),()=>Dl(r())?qe(r()):r()]),I(e,u),ce()}function Pt(e,t){let n=De(t,"size",3,20);Qe(e,{colorScheme:"darkGray",get width(){return n()},get height(){return n()}})}var Ue=(e=>(e[e.Initialized=0]="Initialized",e[e.Loading=1]="Loading",e[e.Success=2]="Success",e[e.Error=3]="Error",e))(Ue||{});const Ui=new Map,Gw=async e=>{const t=(await e()).default;return Ui.set(e,t),t};function Bf(e,t){ae(t,!0);const n=De(t,"delay",3,200);let r=te(pt(Ue.Initialized)),i=te(void 0),o=te(void 0),l=te(void 0);const u=Ge(()=>k(i)),d=()=>{window.clearTimeout(k(l))},c=async()=>{d(),$(o,void 0),$(i,void 0),n()>0?($(r,Ue.Initialized,!0),$(l,window.setTimeout(()=>{$(r,Ue.Loading,!0)},n()),!0)):$(r,Ue.Loading,!0);try{$(i,await Gw(t.loader),!0),$(r,Ue.Success,!0)}catch(p){if($(r,Ue.Error,!0),p instanceof Error)$(o,p,!0);else throw p}d()};Ui.has(t.loader)?($(r,Ue.Success,!0),$(i,Ui.get(t.loader),!0)):lt(()=>{c()});var a=Me(),s=_e(a);{var f=p=>{var v=Me(),g=_e(v);Tr(g,()=>t.error,()=>({error:k(o)})),I(p,v)},h=(p,v)=>{{var g=y=>{var b=Me(),_=_e(b);Tr(_,()=>t.loading),I(y,b)},m=(y,b)=>{{var _=C=>{var A=Me(),w=_e(A);Uu(w,()=>k(u),(F,S)=>{S(F,{})}),I(C,A)};Ce(y,C=>{k(r)===Ue.Success&&C(_)},b)}};Ce(p,y=>{k(r)===Ue.Loading?y(g):y(m,!1)},v)}};Ce(s,p=>{k(r)===Ue.Error&&t.error?p(f):p(h,!1)})}I(e,a),ce()}const Ww="modulepreload",Kw=function(e,t){return new URL(e,t).href},ou={},If=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(a){return Promise.all(a.map(s=>Promise.resolve(s).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),c=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=l(n.map(a=>{if(a=Kw(a,r),a in ou)return;ou[a]=!0;const s=a.endsWith(".css"),f=s?'[rel="stylesheet"]':"";if(!!r)for(let v=u.length-1;v>=0;v--){const g=u[v];if(g.href===a&&(!s||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const p=document.createElement("link");if(p.rel=s?"stylesheet":Ww,s||(p.as="script"),p.crossOrigin="",p.href=a,c&&p.setAttribute("nonce",c),document.head.appendChild(p),s)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},Xw=()=>If(()=>import("./WidgetMessenger-BTQIYQ4X.js"),__vite__mapDeps([0,1]),import.meta.url),Zw=e=>{var t=Jw(),n=R(t),r=R(n),i=R(r);Pt(i,{size:32});var o=j(r,2),l=R(o);Pt(l,{size:32});var u=j(l,2);Pt(u,{size:32});var d=j(u,2);Pt(d,{size:32});var c=j(n,2),a=R(c),s=R(a);Pt(s,{size:44});var f=j(a,2),h=R(f);Qe(h,{height:20,width:270});var p=j(h,2);Qe(p,{height:20,width:122});var v=j(c,2),g=R(v),m=R(g);Pt(m,{size:28});var y=j(g,2),b=R(y);Qe(b,{height:112,width:295,roundedStyle:"rounded-6"});var _=j(v,2),C=R(_);Qe(C,{height:32,width:295});var A=j(C,2);Qe(A,{height:32,width:148});var w=j(A,2);Qe(w,{height:32,width:224}),I(e,t)},Yw=(e,t)=>{let n=()=>t==null?void 0:t().error;var r=Qw(),i=j(R(r),2),o=R(i);ie(()=>Hr(o,n())),I(e,r)};var Jw=Z('<div class="h-full p-2 bg-white" id="TODO test"><div class="flex justify-between"><div class="flex"><!></div> <div class="flex space-x-2"><!> <!> <!></div></div> <div class="flex mt-2"><div class="flex ml-1 mr-2"><!></div> <div class="flex-bottom space-y-2"><!> <!></div></div> <div class="flex items-baseline mt-8"><div class="flex ml-1 mr-2"><!></div> <div class="space-y-2"><!></div></div> <div class="flex flex-col items-end space-y-5 mt-8 mr-1"><!> <!> <!></div></div>'),Qw=Z('<div class="h-full p-4 bg-white text-red-500"><div class="text-lg font-bold">Failed to load widget</div> <div class="text-xs"> </div></div>');function eC(e){Bf(e,{loader:Xw,delay:0,error:Yw,loading:Zw})}var tC=Z("<div><!></div>");function nC(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(ol,"$isFullScreenEnabled",n),o=()=>W(T_,"$isMessengerFrameExpanded",n),l=()=>W(st,"$isMobileDevice",n),u=()=>W(Ab,"$shouldRenderMessengerFrame",n);let d=te(void 0);const c="MobileWidgetMessengerOpen",a=(v,g)=>{if(!k(d))return;const{widgetBlockingOptions:m}=x.getOptions(),{width:y,height:b}=b_(v,g);k(d).style.maxHeight=Ut(b)?b:qe(b),k(d).style.width=Ut(y)?y:qe(y),k(d).style.height=v||m!=null&&m.headlessMode?"100%":"calc(100% - 40px)"};nt(()=>{k(d)&&a(i(),o())});let s=te(!1);nt(()=>{if(l()){if(u()&&!k(s)){const v=Lt().createElement("style");v.textContent="* {overflow: hidden}",v.className=c,Lt().head.appendChild(v),$(s,!0)}if(!u()&&k(s)){const v=Lt().head.getElementsByClassName(c);for(let g=0;g<v.length;g++)Lt().head.removeChild(v[g]);$(s,!1)}}});var f=Me(),h=_e(f);{var p=v=>{var g=tC();$e(g,"",{},{transition:"max-height 250ms ease-in-out, width 250ms ease-in-out",overflow:"hidden"});var m=R(g);const y=Ge(Kn);Zn(m,{component:eC,get id(){return Ee.widgetMessengerFrame},title:"Smartsupp widget messenger",get frameStyle(){return k(y)}}),qn(g,(b,_)=>pi==null?void 0:pi(b,_),i),pn(g,b=>$(d,b),()=>k(d)),ie(()=>K(g,"data-testid",Ee.widgetMessengerFrame)),ye(1,g,()=>Ze,()=>({y:20,duration:200})),ye(2,g,()=>Ze,()=>({y:10,duration:150})),I(v,g)};Ce(h,v=>{u()&&v(p)})}I(e,f),ce(),r()}const rC=()=>If(()=>import("./WidgetPopup-DhhOIFGq.js"),__vite__mapDeps([2,1]),import.meta.url),sC=e=>{var t=iC(),n=R(t);Pt(n,{size:44});var r=j(n,2),i=R(r);Qe(i,{height:20,width:270});var o=j(i,2);Qe(o,{height:20,width:270});var l=j(o,2);Qe(l,{height:20,width:122}),I(e,t)};var iC=Z('<div class="h-full p-2 bg-white"><!> <div class="mt-4 space-y-2"><!> <!> <!></div></div>');function oC(e){Bf(e,{loader:rC,delay:0,loading:sC})}var aC=Z("<div><!></div>");function cC(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(S_,"$popupFrameHeight",n),o=()=>W(k_,"$hasPopupFrameHover",n),l=()=>W(Ob,"$shouldRenderPopupFrame",n);let u=te(void 0);const d=p=>{k(u)&&(k(u).style.maxHeight=`${p}px`)},{widgetBlockingOptions:c}=x.getOptions();nt(()=>{k(u)&&d(i())});let a=Ge(()=>o()?.28:.16);var s=Me(),f=_e(s);{var h=p=>{var v=aC();let g;var m=R(v);const y=Ge(Kn);Zn(m,{component:oC,get id(){return Ee.widgetPopupFrame},title:"Smartsupp widget popup",get frameStyle(){return k(y)}}),pn(v,b=>$(u,b),()=>k(u)),qn(v,b=>gi==null?void 0:gi(b)),ie(b=>{g=$e(v,"height: calc(100% - 40px); border-radius: 12px; transition: box-shadow 0.2s ease-in-out; transition: max-height 250ms ease-in-out",g,{width:b,overflow:"hidden","box-shadow":`rgba(0, 0, 0, ${c!=null&&c.limitShadow?"0.2) 0px 3px 12px":`${k(a)}) 0px 3px 16px`}`}),K(v,"data-testid",Ee.widgetPopupFrame)},[()=>qe(300)]),ye(1,v,()=>Ze,()=>({y:20,delay:300,duration:400})),ye(2,v,()=>Ze,()=>({y:10,duration:400})),I(p,v)};Ce(f,p=>{l()&&p(h)})}I(e,s),ce(),r()}var uC=Z('<div class="flex p-2"><div></div> <div></div> <div></div></div>');function lC(e,t){let n=De(t,"size",3,"md"),r=De(t,"color",3,"black"),i=Ge(()=>t.iterations??"infinite");var o=uC(),l=R(o);let u;var d=j(l,2);let c;var a=j(d,2);let s;ie(()=>{_t(l,1,`typing-indicator ${n()} indicator-color-${r()} animate-typing`,"svelte-13wgl1n"),u=$e(l,"",u,{"animation-iteration-count":k(i)}),_t(d,1,`typing-indicator ${n()} indicator-color-${r()} typing-indicator-second animate-typing`,"svelte-13wgl1n"),c=$e(d,"",c,{"animation-iteration-count":k(i)}),_t(a,1,`typing-indicator ${n()} indicator-color-${r()} typing-indicator-third animate-typing`,"svelte-13wgl1n"),s=$e(a,"",s,{"animation-iteration-count":k(i)})}),I(e,o)}var fC=Z('<div class="flex-center h-full bg-white rounded-lg"><!></div>');function dC(e){var t=fC(),n=R(t);lC(n,{iterations:2}),I(e,t)}var hC=Z("<div><!></div>");function pC(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(Tb,"$shouldRenderTypingFrame",n),{widgetBlockingOptions:o}=x.getOptions();zn();var l=Me(),u=_e(l);{var d=c=>{var a=hC();let s;var f=R(a);const h=rn(Kn);Zn(f,{component:dC,get id(){return Ee.widgetTypingFrame},title:"Smartsupp widget typing",get frameStyle(){return k(h)}}),qn(a,p=>vi==null?void 0:vi(p)),ie((p,v)=>{s=$e(a,`box-shadow: rgba(0, 0, 0, 0.2) ${o!=null&&o.limitShadow?"0px 3px 12px":"0px 3px 16px"}; border-radius: 24px;`,s,{height:p,width:v,overflow:"hidden"}),K(a,"data-testid",Ee.widgetTypingFrame)},[()=>qe(40),()=>qe(70)],rn),ye(1,a,()=>Ze,()=>({y:20,delay:300,duration:400})),ye(2,a,()=>Ze,()=>({y:10,duration:250})),I(c,a)};Ce(u,c=>{i()&&c(d)})}I(e,l),ce(),r()}const Vi=O(null),gC=M([Vi],([e])=>!!e);var vC=zu('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"></path></svg>');function mC(e,t){const n=eh(t,["$$slots","$$events","$$legacy"]);var r=vC();let i;ie(()=>i=Gd(r,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n})),I(e,r)}const yC=(e,t)=>{e.stopPropagation(),t.onClick&&t.onClick(e)};var bC=Z('<button type="button" tabindex="0"><div><!></div></button>');function _C(e,t){ae(t,!0);let n=De(t,"iconOrientation",3,"right"),r=De(t,"iconAnimation",3,"none"),i=De(t,"size",3,"md"),o=De(t,"variant",3,"ghost");const l=n()==="right"?1:-1;let u=Ge(()=>i()==="xl"?1.5:1.2);const d=Ge(()=>t.icon);var c=bC();c.__click=[yC,t];var a=R(c),s=R(a);Uu(s,()=>k(d),(f,h)=>{h(f,{width:"1em",height:"1em"})}),ie(f=>{_t(c,1,f,"svelte-14sk8ij"),c.disabled=t.disabled,K(c,"data-testid",t.testId),K(c,"aria-label",t.iconDescription),K(c,"aria-disabled",t.disabled),_t(a,1,On(["w-full h-full flex items-center justify-center",r()==="spin"&&"animate-spin"])),$e(a,`transform: scale(${k(u)}) scaleX(${l});`)},[()=>On([`btn btn-${o()} btn-${i()}`,!!t.disabled&&"btn-disabled",Dh()?"cursor-auto":"cursor-pointer","button-focus"])]),I(e,c),ce()}Vr(["click"]);var wC=(e,t)=>t("overlay"),CC=e=>e.stopPropagation(),AC=Z('<img class="m-auto max-h-full max-w-full select-none bg-black" width="auto" height="auto">'),EC=e=>e.stopPropagation(),FC=Z('<video controls class="m-auto max-h-full max-w-full bg-black object-contain"><track kind="captions"> <source></video>',2),SC=Z('<div class="w-full h-full flex flex-col"><div class="flex-shrink flex flex-row w-full bg-black text-white"><div class="flex-grow flex items-center text-md px-4 overflow-hidden"><span class="whitespace-nowrap text-ellipsis overflow-hidden"> </span></div> <div class="flex-shrink"><!></div></div> <div><!></div></div>');function kC(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(Lh,"$isDesktop",n),o=()=>W(Vi,"$previewedMedia",n),l=()=>W(oe,"$t",n);let u=Ge(i);const d=C=>{C==="overlay"&&!k(u)||Vi.set(null)};var c=SC(),a=R(c),s=R(a),f=R(s),h=R(f),p=j(s,2),v=R(p);const g=Ge(()=>l()("tooltip.close"));_C(v,{onClick:()=>d("button"),icon:mC,get iconDescription(){return k(g)},size:"xl"});var m=j(a,2);m.__click=[wC,d];var y=R(m);{var b=C=>{var A=AC();A.__click=[CC],ie(()=>{var w,F;K(A,"src",(w=o())==null?void 0:w.attachment.url),K(A,"alt",(F=o())==null?void 0:F.attachment.fileName)}),vr("keypress",A,()=>{}),I(C,A)},_=(C,A)=>{{var w=F=>{var S=FC();S.__click=[EC],S.autoplay=!0,S.loop=!0;var D=j(R(S),2);ie(()=>K(D,"src",o().attachment.url)),vr("keypress",S,()=>{}),I(F,S)};Ce(C,F=>{var S;((S=o())==null?void 0:S.type)===Ni.Video&&F(w)},A)}};Ce(y,C=>{var A;((A=o())==null?void 0:A.type)===Ni.Image?C(b):C(_,!1)})}ie(()=>{var C;Hr(h,(C=o())==null?void 0:C.attachment.fileName),_t(m,1,On(["relative overflow-hidden flex-grow flex items-center bg-black/80 z-10",i()?"p-8":"p-4"]))}),vr("keypress",m,()=>{}),ye(1,c,()=>Ze,()=>({y:20,delay:300,duration:400})),ye(2,c,()=>Ze,()=>({y:10,duration:250})),I(e,c),ce(),r()}Vr(["click"]);var xC=Z("<div><!></div>");function TC(e,t){ae(t,!1);const[n,r]=ze(),i=()=>W(gC,"$shouldRenderMediaPreview",n);zn();var o=Me(),l=_e(o);{var u=d=>{var c=xC();$e(c,"",{},{transition:"max-height 250ms ease-in-out, width 250ms ease-in-out"});var a=R(c);const s=rn(()=>Kn(f=>{f.style.position="fixed"}));Zn(a,{component:kC,get id(){return Ee.widgetImagePreview},title:"Smartsupp widget image preview",get frameStyle(){return k(s)}}),qn(c,f=>mi==null?void 0:mi(f)),ie(()=>K(c,"data-testid",Ee.widgetImagePreview)),ye(1,c,()=>Ze,()=>({y:20,delay:100,duration:250})),ye(2,c,()=>Ze,()=>({y:10,duration:250})),I(d,c)};Ce(l,d=>{i()&&d(u)})}I(e,o),ce(),r()}var OC=Z("<!> <!> <!> <!> <!>",1);function MC(e,t){ae(t,!0);const[n,r]=ze(),i=()=>W(dy,"$lastUnreadMessage",n),o=()=>W(be,"$isMessengerFrameOpen",n);lt(()=>{(async()=>{await Yg(),await he.initClient()})()}),nt(()=>{i()&&!o()&&gf()}),cb(ne()),E(st)&&ub(ne()),Fw(e,{children:(l,u)=>{var d=OC(),c=_e(d);pC(c,{});var a=j(c,2);cC(a,{});var s=j(a,2);Vw(s,{});var f=j(s,2);nC(f,{});var h=j(f,2);TC(h,{}),I(l,d)},$$slots:{default:!0}}),ce(),r()}const Wo=so(window);x.init(Wo.options);Wo.installApi(bw);qo.setThemeColor(Wo.options);lb();vy();ju(MC,{target:document.getElementById("app")});export{_t as $,Ce as A,jC as B,ne as C,k as D,rn as E,Un as F,Ge as G,Ee as H,_C as I,ye as J,kw as K,rf as L,Vr as M,De as N,$e as O,s1 as P,qe as Q,j as R,r1 as S,de as T,qn as U,Ze as V,i1 as W,mC as X,p_ as Y,YC as Z,Ep as _,NC as a,Qu as a$,Hr as a0,U1 as a1,Gd as a2,eh as a3,On as a4,Dh as a5,sf as a6,Lh as a7,GC as a8,V1 as a9,R1 as aA,cl as aB,mh as aC,Q1 as aD,Nh as aE,$1 as aF,ft as aG,B1 as aH,ZC as aI,m1 as aJ,E1 as aK,zu as aL,Uu as aM,G as aN,he as aO,Be as aP,p1 as aQ,Gv as aR,g1 as aS,fb as aT,J1 as aU,_o as aV,Ir as aW,Jr as aX,Gg as aY,ss as aZ,E0 as a_,q1 as aa,N1 as ab,lt as ac,q0 as ad,nt as ae,vr as af,Ye as ag,li as ah,H1 as ai,W1 as aj,G1 as ak,XC as al,Ke as am,jt as an,Gt as ao,HC as ap,wl as aq,zd as ar,$ as as,te as at,Yc as au,Rp as av,Xe as aw,z as ax,sA as ay,D1 as az,j1 as b,Co as b$,yo as b0,l1 as b1,T as b2,x1 as b3,k1 as b4,lC as b5,pn as b6,T_ as b7,LC as b8,t1 as b9,Ve as bA,Xu as bB,Kr as bC,y1 as bD,Yv as bE,T1 as bF,Wn as bG,Fo as bH,X1 as bI,bb as bJ,Td as bK,Rn as bL,v1 as bM,At as bN,rA as bO,Wv as bP,Go as bQ,Eo as bR,Vt as bS,d1 as bT,f1 as bU,ol as bV,nA as bW,tA as bX,K1 as bY,Ll as bZ,eA as b_,st as ba,e1 as bb,b1 as bc,_1 as bd,u1 as be,Vi as bf,Ni as bg,Qv as bh,$C as bi,VC as bj,C1 as bk,w1 as bl,A1 as bm,lm as bn,xo as bo,JC as bp,QC as bq,So as br,n1 as bs,H as bt,pt as bu,ay as bv,cm as bw,To as bx,re as by,Mn as bz,z1 as c,If as c$,Zl as c0,S_ as c1,dy as c2,Nt as c3,Pl as c4,kb as c5,k_ as c6,M1 as c7,Zi as c8,Ln as c9,WC as cA,vn as cB,it as cC,Ol as cD,Je as cE,o1 as cF,ui as cG,F1 as cH,S1 as cI,qm as cJ,I1 as cK,zv as cL,jv as cM,$t as cN,X as cO,Ao as cP,En as cQ,c1 as cR,br as cS,P1 as cT,UC as cU,Po as cV,Qt as cW,Y1 as cX,Do as cY,ib as cZ,be as c_,Jo as ca,on as cb,kn as cc,BC as cd,tn as ce,Lf as cf,zr as cg,U as ch,IC as ci,Xi as cj,Ki as ck,DC as cl,RC as cm,hd as cn,xu as co,qC as cp,_d as cq,wt as cr,PC as cs,cu as ct,Yi as cu,bd as cv,qu as cw,Tn as cx,sn as cy,KC as cz,M as d,Fl as d0,El as d1,og as d2,Qp as d3,cg as d4,lg as d5,fg as d6,pg as d7,_g as d8,wg as d9,Sg as da,xg as db,Tg as dc,Mg as dd,Ng as de,Qe as df,Pt as dg,Z1 as dh,Rh as di,a1 as dj,sb as dk,L1 as dl,Io as dm,Ri as dn,G0 as dp,h1 as dq,ob as dr,O1 as ds,Jl as dt,Pn as e,R as f,E as g,ie as h,In as i,W as j,K as k,zC as l,I as m,ce as n,ze as o,ae as p,oe as q,Qi as r,Tr as s,Z as t,ct as u,x as v,O as w,zn as x,Me as y,_e as z};
//# sourceMappingURL=main-rIGukFl3.js.map
